2025-12-26T12:35:36.961+01:00  INFO 18504 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : Starting PaymentServiceApplication using Java 25.0.1 with PID 18504 (C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes started by Lenovo in C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service)
2025-12-26T12:35:36.976+01:00 DEBUG 18504 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : Running with Spring Boot v3.5.8, Spring v6.2.14
2025-12-26T12:35:36.979+01:00  INFO 18504 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : No active profile set, falling back to 1 default profile: "default"
2025-12-26T12:35:39.354+01:00 DEBUG 18504 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\BlockchainServiceClient.class]
2025-12-26T12:35:39.355+01:00 DEBUG 18504 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\BookingServiceClient.class]
2025-12-26T12:35:39.356+01:00 DEBUG 18504 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\NotificationServiceClient.class]
2025-12-26T12:35:40.979+01:00  INFO 18504 --- [payment-service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26T12:35:41.593+01:00  INFO 18504 --- [payment-service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 582 ms. Found 1 JPA repository interface.
2025-12-26T12:35:43.011+01:00  INFO 18504 --- [payment-service] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=8a20e800-fe95-340a-866b-3856ca3f0074
2025-12-26T12:35:45.062+01:00  INFO 18504 --- [payment-service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8084 (http)
2025-12-26T12:35:45.119+01:00  INFO 18504 --- [payment-service] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-26T12:35:45.120+01:00  INFO 18504 --- [payment-service] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2025-12-26T12:35:45.280+01:00  INFO 18504 --- [payment-service] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-26T12:35:45.281+01:00  INFO 18504 --- [payment-service] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 8141 ms
2025-12-26T12:35:46.822+01:00  INFO 18504 --- [payment-service] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26T12:35:47.102+01:00  INFO 18504 --- [payment-service] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.36.Final
2025-12-26T12:35:47.255+01:00  INFO 18504 --- [payment-service] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-26T12:35:48.335+01:00  INFO 18504 --- [payment-service] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26T12:35:48.436+01:00  INFO 18504 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-26T12:35:48.894+01:00  INFO 18504 --- [payment-service] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@34cb1310
2025-12-26T12:35:48.920+01:00  INFO 18504 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-26T12:35:48.996+01:00  WARN 18504 --- [payment-service] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26T12:35:48.999+01:00  WARN 18504 --- [payment-service] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-12-26T12:35:49.045+01:00  INFO 18504 --- [payment-service] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26T12:35:51.112+01:00  INFO 18504 --- [payment-service] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26T12:35:51.537+01:00  INFO 18504 --- [payment-service] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26T12:35:51.635+01:00  INFO 18504 --- [payment-service] [main] com.rental.payment.config.Web3Config     : âœ… Web3 Configuration initialisÃ©e
2025-12-26T12:35:51.636+01:00  INFO 18504 --- [payment-service] [main] com.rental.payment.config.Web3Config     : ðŸ“ Contract Address: 0x4c5556c7bb47c8cadb5417af494AaE7792AF14d
2025-12-26T12:35:51.658+01:00  INFO 18504 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ”— Initialisation de la connexion Web3...
2025-12-26T12:35:51.659+01:00  INFO 18504 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ“¡ Endpoint Infura: https://sepolia.infura.io/v3/****
2025-12-26T12:35:54.545+01:00  INFO 18504 --- [payment-service] [main] c.r.payment.service.BlockchainService    : âœ… ConnectÃ© au rÃ©seau Ethereum: reth/v1.9.1-3afe69a/aarch64-unknown-linux-gnu
2025-12-26T12:35:54.546+01:00  INFO 18504 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ“ Adresse du wallet: 0x34f528b671cf1c31c2f579eef593ba537d63f1fd
2025-12-26T12:35:54.717+01:00 DEBUG 18504 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ’° Solde de 0x34f528b671cf1c31c2f579eef593ba537d63f1fd: 0.105752371841690974 ETH
2025-12-26T12:35:54.718+01:00  INFO 18504 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ’° Solde wallet admin: 0.105752371841690974 ETH
2025-12-26T12:35:56.534+01:00  WARN 18504 --- [payment-service] [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'paymentController' defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\controller\PaymentController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'paymentService' defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\service\PaymentService.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'rabbitMQService' defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\service\RabbitMQService.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'paymentService': Requested bean is currently in creation: Is there an unresolvable circular reference or an asynchronous initialization dependency?
2025-12-26T12:35:56.541+01:00  INFO 18504 --- [payment-service] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26T12:35:56.552+01:00  INFO 18504 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-26T12:35:56.568+01:00  INFO 18504 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-26T12:35:56.574+01:00  INFO 18504 --- [payment-service] [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-12-26T12:35:56.621+01:00  INFO 18504 --- [payment-service] [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-26T12:35:56.675+01:00 ERROR 18504 --- [payment-service] [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

The dependencies of some of the beans in the application context form a cycle:

   paymentController defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\controller\PaymentController.class]
â”Œâ”€â”€â”€â”€â”€â”
|  paymentService defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\service\PaymentService.class]
â†‘     â†“
|  rabbitMQService defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\service\RabbitMQService.class]
â””â”€â”€â”€â”€â”€â”˜


Action:

Relying upon circular references is discouraged and they are prohibited by default. Update your application to remove the dependency cycle between beans. As a last resort, it may be possible to break the cycle automatically by setting spring.main.allow-circular-references to true.

2025-12-26T12:38:21.064+01:00  INFO 23452 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : Starting PaymentServiceApplication using Java 25.0.1 with PID 23452 (C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes started by Lenovo in C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service)
2025-12-26T12:38:21.065+01:00 DEBUG 23452 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : Running with Spring Boot v3.5.8, Spring v6.2.14
2025-12-26T12:38:21.067+01:00  INFO 23452 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : No active profile set, falling back to 1 default profile: "default"
2025-12-26T12:38:21.861+01:00 DEBUG 23452 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\BlockchainServiceClient.class]
2025-12-26T12:38:21.862+01:00 DEBUG 23452 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\BookingServiceClient.class]
2025-12-26T12:38:21.862+01:00 DEBUG 23452 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\NotificationServiceClient.class]
2025-12-26T12:38:22.344+01:00  INFO 23452 --- [payment-service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26T12:38:22.512+01:00  INFO 23452 --- [payment-service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 159 ms. Found 1 JPA repository interface.
2025-12-26T12:38:22.914+01:00  INFO 23452 --- [payment-service] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=8a20e800-fe95-340a-866b-3856ca3f0074
2025-12-26T12:38:23.727+01:00  INFO 23452 --- [payment-service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8084 (http)
2025-12-26T12:38:23.744+01:00  INFO 23452 --- [payment-service] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-26T12:38:23.745+01:00  INFO 23452 --- [payment-service] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2025-12-26T12:38:23.843+01:00  INFO 23452 --- [payment-service] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-26T12:38:23.844+01:00  INFO 23452 --- [payment-service] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2707 ms
2025-12-26T12:38:24.430+01:00  INFO 23452 --- [payment-service] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26T12:38:24.492+01:00  INFO 23452 --- [payment-service] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.36.Final
2025-12-26T12:38:24.537+01:00  INFO 23452 --- [payment-service] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-26T12:38:24.844+01:00  INFO 23452 --- [payment-service] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26T12:38:24.901+01:00  INFO 23452 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-26T12:38:25.137+01:00  INFO 23452 --- [payment-service] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@118f2486
2025-12-26T12:38:25.141+01:00  INFO 23452 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-26T12:38:25.172+01:00  WARN 23452 --- [payment-service] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26T12:38:25.175+01:00  WARN 23452 --- [payment-service] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-12-26T12:38:25.200+01:00  INFO 23452 --- [payment-service] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26T12:38:26.147+01:00  INFO 23452 --- [payment-service] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26T12:38:26.422+01:00  INFO 23452 --- [payment-service] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26T12:38:26.491+01:00  INFO 23452 --- [payment-service] [main] com.rental.payment.config.Web3Config     : âœ… Web3 Configuration initialisÃ©e
2025-12-26T12:38:26.492+01:00  INFO 23452 --- [payment-service] [main] com.rental.payment.config.Web3Config     : ðŸ“ Contract Address: 0x4c5556c7bb47c8cadb5417af494AaE7792AF14d
2025-12-26T12:38:26.506+01:00  INFO 23452 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ”— Initialisation de la connexion Web3...
2025-12-26T12:38:26.506+01:00  INFO 23452 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ“¡ Endpoint Infura: https://sepolia.infura.io/v3/****
2025-12-26T12:38:28.269+01:00  INFO 23452 --- [payment-service] [main] c.r.payment.service.BlockchainService    : âœ… ConnectÃ© au rÃ©seau Ethereum: reth/v1.9.1-3afe69a/aarch64-unknown-linux-gnu
2025-12-26T12:38:28.269+01:00  INFO 23452 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ“ Adresse du wallet: 0x34f528b671cf1c31c2f579eef593ba537d63f1fd
2025-12-26T12:38:28.421+01:00 DEBUG 23452 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ’° Solde de 0x34f528b671cf1c31c2f579eef593ba537d63f1fd: 0.105752371841690974 ETH
2025-12-26T12:38:28.421+01:00  INFO 23452 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ’° Solde wallet admin: 0.105752371841690974 ETH
2025-12-26T12:38:29.024+01:00  WARN 23452 --- [payment-service] [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'paymentController' defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\controller\PaymentController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'paymentService' defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\service\PaymentService.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'rabbitMQService' defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\service\RabbitMQService.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'paymentService': Requested bean is currently in creation: Is there an unresolvable circular reference or an asynchronous initialization dependency?
2025-12-26T12:38:29.029+01:00  INFO 23452 --- [payment-service] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26T12:38:29.033+01:00  INFO 23452 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-26T12:38:29.041+01:00  INFO 23452 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-26T12:38:29.044+01:00  INFO 23452 --- [payment-service] [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-12-26T12:38:29.068+01:00  INFO 23452 --- [payment-service] [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-26T12:38:29.097+01:00 ERROR 23452 --- [payment-service] [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

The dependencies of some of the beans in the application context form a cycle:

   paymentController defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\controller\PaymentController.class]
â”Œâ”€â”€â”€â”€â”€â”
|  paymentService defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\service\PaymentService.class]
â†‘     â†“
|  rabbitMQService defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\service\RabbitMQService.class]
â””â”€â”€â”€â”€â”€â”˜


Action:

Relying upon circular references is discouraged and they are prohibited by default. Update your application to remove the dependency cycle between beans. As a last resort, it may be possible to break the cycle automatically by setting spring.main.allow-circular-references to true.

2025-12-26T12:41:55.431+01:00  INFO 19980 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : Starting PaymentServiceApplication using Java 25.0.1 with PID 19980 (C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes started by Lenovo in C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service)
2025-12-26T12:41:55.432+01:00 DEBUG 19980 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : Running with Spring Boot v3.5.8, Spring v6.2.14
2025-12-26T12:41:55.433+01:00  INFO 19980 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : No active profile set, falling back to 1 default profile: "default"
2025-12-26T12:41:56.253+01:00 DEBUG 19980 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\BlockchainServiceClient.class]
2025-12-26T12:41:56.253+01:00 DEBUG 19980 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\BookingServiceClient.class]
2025-12-26T12:41:56.253+01:00 DEBUG 19980 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\NotificationServiceClient.class]
2025-12-26T12:41:56.715+01:00  INFO 19980 --- [payment-service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26T12:41:56.897+01:00  INFO 19980 --- [payment-service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 159 ms. Found 1 JPA repository interface.
2025-12-26T12:41:57.386+01:00  INFO 19980 --- [payment-service] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=8a20e800-fe95-340a-866b-3856ca3f0074
2025-12-26T12:41:58.193+01:00  INFO 19980 --- [payment-service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8084 (http)
2025-12-26T12:41:58.218+01:00  INFO 19980 --- [payment-service] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-26T12:41:58.219+01:00  INFO 19980 --- [payment-service] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2025-12-26T12:41:58.312+01:00  INFO 19980 --- [payment-service] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-26T12:41:58.313+01:00  INFO 19980 --- [payment-service] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2811 ms
2025-12-26T12:41:58.860+01:00  INFO 19980 --- [payment-service] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26T12:41:58.926+01:00  INFO 19980 --- [payment-service] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.36.Final
2025-12-26T12:41:58.967+01:00  INFO 19980 --- [payment-service] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-26T12:41:59.340+01:00  INFO 19980 --- [payment-service] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26T12:41:59.386+01:00  INFO 19980 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-26T12:41:59.601+01:00  INFO 19980 --- [payment-service] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@78e4fa1
2025-12-26T12:41:59.605+01:00  INFO 19980 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-26T12:41:59.633+01:00  WARN 19980 --- [payment-service] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26T12:41:59.634+01:00  WARN 19980 --- [payment-service] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-12-26T12:41:59.657+01:00  INFO 19980 --- [payment-service] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26T12:42:00.635+01:00  INFO 19980 --- [payment-service] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26T12:42:00.910+01:00  INFO 19980 --- [payment-service] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26T12:42:00.975+01:00  INFO 19980 --- [payment-service] [main] com.rental.payment.config.Web3Config     : âœ… Web3 Configuration initialisÃ©e
2025-12-26T12:42:00.976+01:00  INFO 19980 --- [payment-service] [main] com.rental.payment.config.Web3Config     : ðŸ“ Contract Address: 0x4c5556c7bb47c8cadb5417af494AaE7792AF14d
2025-12-26T12:42:00.992+01:00  INFO 19980 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ”— Initialisation de la connexion Web3...
2025-12-26T12:42:00.993+01:00  INFO 19980 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ“¡ Endpoint Infura: https://sepolia.infura.io/v3/****
2025-12-26T12:42:02.535+01:00  INFO 19980 --- [payment-service] [main] c.r.payment.service.BlockchainService    : âœ… ConnectÃ© au rÃ©seau Ethereum: reth/v1.9.1-3afe69a/aarch64-unknown-linux-gnu
2025-12-26T12:42:02.535+01:00  INFO 19980 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ“ Adresse du wallet: 0x34f528b671cf1c31c2f579eef593ba537d63f1fd
2025-12-26T12:42:02.722+01:00 DEBUG 19980 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ’° Solde de 0x34f528b671cf1c31c2f579eef593ba537d63f1fd: 0.105752371841690974 ETH
2025-12-26T12:42:02.723+01:00  INFO 19980 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ’° Solde wallet admin: 0.105752371841690974 ETH
2025-12-26T12:42:03.360+01:00  WARN 19980 --- [payment-service] [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'paymentController' defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\controller\PaymentController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'paymentService' defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\service\PaymentService.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'rabbitMQService' defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\service\RabbitMQService.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'paymentService': Requested bean is currently in creation: Is there an unresolvable circular reference or an asynchronous initialization dependency?
2025-12-26T12:42:03.367+01:00  INFO 19980 --- [payment-service] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26T12:42:03.372+01:00  INFO 19980 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-26T12:42:03.381+01:00  INFO 19980 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-26T12:42:03.387+01:00  INFO 19980 --- [payment-service] [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-12-26T12:42:03.408+01:00  INFO 19980 --- [payment-service] [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-26T12:42:03.435+01:00 ERROR 19980 --- [payment-service] [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

The dependencies of some of the beans in the application context form a cycle:

   paymentController defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\controller\PaymentController.class]
â”Œâ”€â”€â”€â”€â”€â”
|  paymentService defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\service\PaymentService.class]
â†‘     â†“
|  rabbitMQService defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\service\RabbitMQService.class]
â””â”€â”€â”€â”€â”€â”˜


Action:

Relying upon circular references is discouraged and they are prohibited by default. Update your application to remove the dependency cycle between beans. As a last resort, it may be possible to break the cycle automatically by setting spring.main.allow-circular-references to true.

2025-12-26T12:46:38.360+01:00  INFO 17508 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : Starting PaymentServiceApplication using Java 25.0.1 with PID 17508 (C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes started by Lenovo in C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service)
2025-12-26T12:46:38.361+01:00 DEBUG 17508 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : Running with Spring Boot v3.5.8, Spring v6.2.14
2025-12-26T12:46:38.362+01:00  INFO 17508 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : No active profile set, falling back to 1 default profile: "default"
2025-12-26T12:46:39.187+01:00 DEBUG 17508 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\BlockchainServiceClient.class]
2025-12-26T12:46:39.189+01:00 DEBUG 17508 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\BookingServiceClient.class]
2025-12-26T12:46:39.189+01:00 DEBUG 17508 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\NotificationServiceClient.class]
2025-12-26T12:46:39.630+01:00  INFO 17508 --- [payment-service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26T12:46:39.802+01:00  INFO 17508 --- [payment-service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 159 ms. Found 1 JPA repository interface.
2025-12-26T12:46:40.166+01:00  INFO 17508 --- [payment-service] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=8a20e800-fe95-340a-866b-3856ca3f0074
2025-12-26T12:46:40.994+01:00  INFO 17508 --- [payment-service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8084 (http)
2025-12-26T12:46:41.016+01:00  INFO 17508 --- [payment-service] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-26T12:46:41.016+01:00  INFO 17508 --- [payment-service] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2025-12-26T12:46:41.110+01:00  INFO 17508 --- [payment-service] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-26T12:46:41.111+01:00  INFO 17508 --- [payment-service] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2679 ms
2025-12-26T12:46:41.673+01:00  INFO 17508 --- [payment-service] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26T12:46:41.738+01:00  INFO 17508 --- [payment-service] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.36.Final
2025-12-26T12:46:41.778+01:00  INFO 17508 --- [payment-service] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-26T12:46:42.103+01:00  INFO 17508 --- [payment-service] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26T12:46:42.151+01:00  INFO 17508 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-26T12:46:42.372+01:00  INFO 17508 --- [payment-service] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@22f7bf36
2025-12-26T12:46:42.374+01:00  INFO 17508 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-26T12:46:42.406+01:00  WARN 17508 --- [payment-service] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26T12:46:42.408+01:00  WARN 17508 --- [payment-service] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-12-26T12:46:42.432+01:00  INFO 17508 --- [payment-service] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26T12:46:43.363+01:00  INFO 17508 --- [payment-service] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26T12:46:43.659+01:00  INFO 17508 --- [payment-service] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26T12:46:43.727+01:00  INFO 17508 --- [payment-service] [main] com.rental.payment.config.Web3Config     : âœ… Web3 Configuration initialisÃ©e
2025-12-26T12:46:43.727+01:00  INFO 17508 --- [payment-service] [main] com.rental.payment.config.Web3Config     : ðŸ“ Contract Address: 0x4c5556c7bb47c8cadb5417af494AaE7792AF14d
2025-12-26T12:46:43.747+01:00  INFO 17508 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ”— Initialisation de la connexion Web3...
2025-12-26T12:46:43.748+01:00  INFO 17508 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ“¡ Endpoint Infura: https://sepolia.infura.io/v3/****
2025-12-26T12:46:45.418+01:00  INFO 17508 --- [payment-service] [main] c.r.payment.service.BlockchainService    : âœ… ConnectÃ© au rÃ©seau Ethereum: reth/v1.9.1-3afe69a/aarch64-unknown-linux-gnu
2025-12-26T12:46:45.418+01:00  INFO 17508 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ“ Adresse du wallet: 0x34f528b671cf1c31c2f579eef593ba537d63f1fd
2025-12-26T12:46:45.568+01:00 DEBUG 17508 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ’° Solde de 0x34f528b671cf1c31c2f579eef593ba537d63f1fd: 0.105752371841690974 ETH
2025-12-26T12:46:45.568+01:00  INFO 17508 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ’° Solde wallet admin: 0.105752371841690974 ETH
2025-12-26T12:46:46.211+01:00  WARN 17508 --- [payment-service] [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'paymentController' defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\controller\PaymentController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'paymentService' defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\service\PaymentService.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'rabbitMQService' defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\service\RabbitMQService.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'paymentService': Requested bean is currently in creation: Is there an unresolvable circular reference or an asynchronous initialization dependency?
2025-12-26T12:46:46.219+01:00  INFO 17508 --- [payment-service] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-12-26T12:46:46.222+01:00  INFO 17508 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-12-26T12:46:46.231+01:00  INFO 17508 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-12-26T12:46:46.234+01:00  INFO 17508 --- [payment-service] [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-12-26T12:46:46.256+01:00  INFO 17508 --- [payment-service] [main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-26T12:46:46.280+01:00 ERROR 17508 --- [payment-service] [main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

The dependencies of some of the beans in the application context form a cycle:

   paymentController defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\controller\PaymentController.class]
â”Œâ”€â”€â”€â”€â”€â”
|  paymentService defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\service\PaymentService.class]
â†‘     â†“
|  rabbitMQService defined in file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\service\RabbitMQService.class]
â””â”€â”€â”€â”€â”€â”˜


Action:

Despite circular references being allowed, the dependency cycle between beans could not be broken. Update your application to remove the dependency cycle.

2025-12-26T12:55:19.711+01:00  INFO 18528 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : Starting PaymentServiceApplication using Java 25.0.1 with PID 18528 (C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes started by Lenovo in C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service)
2025-12-26T12:55:19.711+01:00 DEBUG 18528 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : Running with Spring Boot v3.5.8, Spring v6.2.14
2025-12-26T12:55:19.711+01:00  INFO 18528 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : No active profile set, falling back to 1 default profile: "default"
2025-12-26T12:55:20.764+01:00 DEBUG 18528 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\BlockchainServiceClient.class]
2025-12-26T12:55:20.765+01:00 DEBUG 18528 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\BookingServiceClient.class]
2025-12-26T12:55:20.765+01:00 DEBUG 18528 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\NotificationServiceClient.class]
2025-12-26T12:55:21.333+01:00  INFO 18528 --- [payment-service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26T12:55:21.518+01:00  INFO 18528 --- [payment-service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 173 ms. Found 1 JPA repository interface.
2025-12-26T12:55:21.925+01:00  INFO 18528 --- [payment-service] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=8a20e800-fe95-340a-866b-3856ca3f0074
2025-12-26T12:55:22.955+01:00  INFO 18528 --- [payment-service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8084 (http)
2025-12-26T12:55:22.975+01:00  INFO 18528 --- [payment-service] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-26T12:55:22.976+01:00  INFO 18528 --- [payment-service] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2025-12-26T12:55:23.079+01:00  INFO 18528 --- [payment-service] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-26T12:55:23.080+01:00  INFO 18528 --- [payment-service] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3294 ms
2025-12-26T12:55:23.616+01:00  INFO 18528 --- [payment-service] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26T12:55:23.675+01:00  INFO 18528 --- [payment-service] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.36.Final
2025-12-26T12:55:23.716+01:00  INFO 18528 --- [payment-service] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-26T12:55:24.045+01:00  INFO 18528 --- [payment-service] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26T12:55:24.093+01:00  INFO 18528 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-26T12:55:24.347+01:00  INFO 18528 --- [payment-service] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@22f7bf36
2025-12-26T12:55:24.351+01:00  INFO 18528 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-26T12:55:24.383+01:00  WARN 18528 --- [payment-service] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26T12:55:24.385+01:00  WARN 18528 --- [payment-service] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-12-26T12:55:24.406+01:00  INFO 18528 --- [payment-service] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26T12:55:25.504+01:00  INFO 18528 --- [payment-service] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26T12:55:25.803+01:00  INFO 18528 --- [payment-service] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26T12:55:25.863+01:00  INFO 18528 --- [payment-service] [main] com.rental.payment.config.Web3Config     : âœ… Web3 Configuration initialisÃ©e
2025-12-26T12:55:25.864+01:00  INFO 18528 --- [payment-service] [main] com.rental.payment.config.Web3Config     : ðŸ“ Contract Address: 0x4c5556c7bb47c8cadb5417af494AaE7792AF14d
2025-12-26T12:55:25.893+01:00 DEBUG 18528 --- [payment-service] [main] o.s.c.openfeign.FeignClientFactoryBean   : Creating a FeignClientFactoryBean.
2025-12-26T12:55:26.039+01:00  WARN 18528 --- [payment-service] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26T12:55:26.217+01:00  INFO 18528 --- [payment-service] [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'BLOCKCHAIN-SERVICE' URL not provided. Will try picking an instance via load-balancing.
2025-12-26T12:55:26.306+01:00 DEBUG 18528 --- [payment-service] [main] o.s.c.openfeign.FeignClientFactoryBean   : Creating a FeignClientFactoryBean.
2025-12-26T12:55:26.338+01:00  INFO 18528 --- [payment-service] [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'booking-service' URL not provided. Will try picking an instance via load-balancing.
2025-12-26T12:55:26.349+01:00 DEBUG 18528 --- [payment-service] [main] o.s.c.openfeign.FeignClientFactoryBean   : Creating a FeignClientFactoryBean.
2025-12-26T12:55:26.381+01:00  INFO 18528 --- [payment-service] [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'NOTIFICATION-SERVICE' URL not provided. Will try picking an instance via load-balancing.
2025-12-26T12:55:26.426+01:00  INFO 18528 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ”— Initialisation de la connexion Web3...
2025-12-26T12:55:26.426+01:00  INFO 18528 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ“¡ Endpoint Infura: https://sepolia.infura.io/v3/****
2025-12-26T12:55:27.970+01:00  INFO 18528 --- [payment-service] [main] c.r.payment.service.BlockchainService    : âœ… ConnectÃ© au rÃ©seau Ethereum: reth/v1.9.1-3afe69a/aarch64-unknown-linux-gnu
2025-12-26T12:55:27.971+01:00  INFO 18528 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ“ Adresse du wallet: 0x34f528b671cf1c31c2f579eef593ba537d63f1fd
2025-12-26T12:55:28.116+01:00 DEBUG 18528 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ’° Solde de 0x34f528b671cf1c31c2f579eef593ba537d63f1fd: 0.105752371841690974 ETH
2025-12-26T12:55:28.118+01:00  INFO 18528 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ’° Solde wallet admin: 0.105752371841690974 ETH
2025-12-26T12:55:28.719+01:00  INFO 18528 --- [payment-service] [main] c.rental.payment.service.PaymentService  : âœ… PaymentService initialisÃ© avec @Lazy sur RabbitMQService
2025-12-26T12:55:28.796+01:00  INFO 18528 --- [payment-service] [main] com.rental.payment.config.Web3Config     : ðŸ”— Initialisation de la connexion Web3j...
2025-12-26T12:55:28.796+01:00  INFO 18528 --- [payment-service] [main] com.rental.payment.config.Web3Config     : ðŸ“ Endpoint Infura: https://sepolia.infura.io/v3/50e3d616c7ae4bb4bb5d48d97ab6d5a8
2025-12-26T12:55:29.548+01:00  INFO 18528 --- [payment-service] [main] com.rental.payment.config.Web3Config     : âœ… ConnectÃ© au rÃ©seau Ethereum: reth/v1.9.1-3afe69a/aarch64-unknown-linux-gnu
2025-12-26T12:55:29.568+01:00  INFO 18528 --- [payment-service] [main] com.rental.payment.config.Web3Config     : ðŸ”‘ Chargement des credentials du wallet...
2025-12-26T12:55:29.571+01:00  INFO 18528 --- [payment-service] [main] com.rental.payment.config.Web3Config     : ðŸ“ Adresse du wallet: 0x34f528b671cf1c31c2f579eef593ba537d63f1fd
2025-12-26T12:55:29.575+01:00  INFO 18528 --- [payment-service] [main] com.rental.payment.config.Web3Config     : â›½ Configuration Gas Provider - Price: 20 Gwei, Limit: 500000
2025-12-26T12:55:30.573+01:00  WARN 18528 --- [payment-service] [main] o.s.r.backoff.ExponentialBackOffPolicy   : Multiplier must be > 1.0 for effective exponential backoff, but was 1.0
2025-12-26T12:55:31.449+01:00  INFO 18528 --- [payment-service] [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2025-12-26T12:55:31.554+01:00  WARN 18528 --- [payment-service] [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-12-26T12:55:31.586+01:00  INFO 18528 --- [payment-service] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 4 endpoints beneath base path '/actuator'
2025-12-26T12:55:31.739+01:00  INFO 18528 --- [payment-service] [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2025-12-26T12:55:31.773+01:00  INFO 18528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2025-12-26T12:55:31.778+01:00  INFO 18528 --- [payment-service] [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T12:55:31.788+01:00  INFO 18528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2025-12-26T12:55:31.788+01:00  INFO 18528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2025-12-26T12:55:31.788+01:00  INFO 18528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2025-12-26T12:55:31.788+01:00  INFO 18528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2025-12-26T12:55:31.789+01:00  INFO 18528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2025-12-26T12:55:31.789+01:00  INFO 18528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2025-12-26T12:55:31.789+01:00  INFO 18528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2025-12-26T12:55:32.129+01:00  INFO 18528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2025-12-26T12:55:32.132+01:00  INFO 18528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2025-12-26T12:55:32.135+01:00  INFO 18528 --- [payment-service] [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-12-26T12:55:32.138+01:00  INFO 18528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1766750132136 with initial instances count: 3
2025-12-26T12:55:32.154+01:00  INFO 18528 --- [payment-service] [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application PAYMENT-SERVICE with eureka with status UP
2025-12-26T12:55:32.156+01:00  INFO 18528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1766750132156, current=UP, previous=STARTING]
2025-12-26T12:55:32.158+01:00  INFO 18528 --- [payment-service] [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_PAYMENT-SERVICE/payment-service:8084: registering service...
2025-12-26T12:55:32.191+01:00  INFO 18528 --- [payment-service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8084 (http) with context path '/'
2025-12-26T12:55:32.192+01:00  INFO 18528 --- [payment-service] [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 8084
2025-12-26T12:55:32.204+01:00  INFO 18528 --- [payment-service] [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_PAYMENT-SERVICE/payment-service:8084 - registration status: 204
2025-12-26T12:55:32.204+01:00  INFO 18528 --- [payment-service] [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [localhost:5672]
2025-12-26T12:55:32.276+01:00  INFO 18528 --- [payment-service] [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#2fd1f0e4:0/SimpleConnection@3922c5bc [delegate=amqp://admin@127.0.0.1:5672/, localPort=52835]
2025-12-26T12:55:32.601+01:00  INFO 18528 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : Started PaymentServiceApplication in 13.571 seconds (process running for 14.423)
2025-12-26T12:55:40.058+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26T12:55:40.058+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-26T12:55:40.066+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-12-26T12:55:40.113+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.controller.PaymentController       : ðŸ©º Health check complet du service payment
2025-12-26T12:55:40.113+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion Ã  la base de donnÃ©es...
2025-12-26T12:55:40.558+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.controller.PaymentController       : âœ… Base de donnÃ©es connectÃ©e. Nombre d'enregistrements dans payments: 9
2025-12-26T12:55:40.558+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.controller.PaymentController       : ðŸ©º VÃ©rification santÃ© blockchain
2025-12-26T12:55:40.558+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.s.ExternalServiceOrchestrator      : ðŸ©º VÃ©rification de la santÃ© du service blockchain
2025-12-26T12:55:40.566+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 310f7823-c7a8-4230-aa5c-afe582351b16
2025-12-26T12:55:40.570+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> GET http://BLOCKCHAIN-SERVICE/api/blockchain/health HTTP/1.1
2025-12-26T12:55:40.570+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept: application/json
2025-12-26T12:55:40.571+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept-Encoding: gzip, deflate
2025-12-26T12:55:40.571+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Content-Type: application/json
2025-12-26T12:55:40.571+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Correlation-ID: 310f7823-c7a8-4230-aa5c-afe582351b16
2025-12-26T12:55:40.571+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Name: payment-service
2025-12-26T12:55:40.571+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Version: 1.0
2025-12-26T12:55:40.572+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> END HTTP (0-byte body)
2025-12-26T12:55:40.678+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T12:55:40.721+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@35f086ec instance = InstanceInfo [instanceId = blockchain-service:b9841c9ad10cf8c07241da1e6ca4bd4d, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@46a09441]
2025-12-26T12:55:40.721+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@35f086ec instance = InstanceInfo [instanceId = blockchain-service:b9841c9ad10cf8c07241da1e6ca4bd4d, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@46a09441]
2025-12-26T12:55:41.058+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- HTTP/1.1 200 (487ms)
2025-12-26T12:55:41.058+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] connection: keep-alive
2025-12-26T12:55:41.058+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] content-type: application/json
2025-12-26T12:55:41.058+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] date: Fri, 26 Dec 2025 11:55:41 GMT
2025-12-26T12:55:41.058+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] keep-alive: timeout=60
2025-12-26T12:55:41.058+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] transfer-encoding: chunked
2025-12-26T12:55:41.058+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Origin
2025-12-26T12:55:41.058+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Method
2025-12-26T12:55:41.058+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Headers
2025-12-26T12:55:41.058+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] 
2025-12-26T12:55:41.058+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] {"status":"UP","message":"Blockchain Service is running","contractAddress":"0x23470CA6C42Fe32E3E48b85999123cC28a57Ca94","network":"sepolia","currentBlock":9917965,"adminWallet":"0x34f528b671cf1c31c2f579eef593ba537d63f1fd"}
2025-12-26T12:55:41.058+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- END HTTP (222-byte body)
2025-12-26T12:55:41.068+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.s.ExternalServiceOrchestrator      : âœ… Service blockchain en bonne santÃ©
2025-12-26T12:55:41.068+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion Ã  RabbitMQ...
2025-12-26T12:55:41.075+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.controller.PaymentController       : âœ… RabbitMQ connectÃ© avec succÃ¨s
2025-12-26T12:55:41.075+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion au booking-service...
2025-12-26T12:55:41.075+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: de482add-f85e-4ea4-b5c2-fe99eb5d3259
2025-12-26T12:55:41.075+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] ---> GET http://booking-service/bookings/health HTTP/1.1
2025-12-26T12:55:41.075+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Accept: application/json
2025-12-26T12:55:41.075+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Accept-Encoding: gzip, deflate
2025-12-26T12:55:41.075+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Content-Type: application/json
2025-12-26T12:55:41.075+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Correlation-ID: de482add-f85e-4ea4-b5c2-fe99eb5d3259
2025-12-26T12:55:41.075+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Service-Name: payment-service
2025-12-26T12:55:41.075+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Service-Version: 1.0
2025-12-26T12:55:41.075+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] ---> END HTTP (0-byte body)
2025-12-26T12:55:41.108+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T12:55:41.108+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@32a2f6a7 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@148a4b54]
2025-12-26T12:55:41.108+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@32a2f6a7 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@148a4b54]
2025-12-26T12:55:41.348+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] <--- HTTP/1.1 200 (272ms)
2025-12-26T12:55:41.348+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] cache-control: no-cache, no-store, max-age=0, must-revalidate
2025-12-26T12:55:41.350+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] connection: keep-alive
2025-12-26T12:55:41.350+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] content-type: application/json
2025-12-26T12:55:41.351+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] date: Fri, 26 Dec 2025 11:55:41 GMT
2025-12-26T12:55:41.352+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] expires: 0
2025-12-26T12:55:41.352+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] keep-alive: timeout=60
2025-12-26T12:55:41.352+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] pragma: no-cache
2025-12-26T12:55:41.352+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] transfer-encoding: chunked
2025-12-26T12:55:41.352+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Origin
2025-12-26T12:55:41.352+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Access-Control-Request-Method
2025-12-26T12:55:41.352+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Access-Control-Request-Headers
2025-12-26T12:55:41.352+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-content-type-options: nosniff
2025-12-26T12:55:41.354+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-frame-options: DENY
2025-12-26T12:55:41.354+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-xss-protection: 0
2025-12-26T12:55:41.356+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] 
2025-12-26T12:55:41.356+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] {"service":"booking-service","status":"UP"}
2025-12-26T12:55:41.356+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] <--- END HTTP (43-byte body)
2025-12-26T12:56:57.596+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.controller.PaymentController       : ðŸ“œ RÃ©cupÃ©ration des paiements pour rÃ©servation #1
2025-12-26T12:58:53.201+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.controller.PaymentController       : ðŸ©º Health check complet du service payment
2025-12-26T12:58:53.201+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion Ã  la base de donnÃ©es...
2025-12-26T12:58:53.207+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.controller.PaymentController       : âœ… Base de donnÃ©es connectÃ©e. Nombre d'enregistrements dans payments: 9
2025-12-26T12:58:53.207+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.controller.PaymentController       : ðŸ©º VÃ©rification santÃ© blockchain
2025-12-26T12:58:53.207+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.s.ExternalServiceOrchestrator      : ðŸ©º VÃ©rification de la santÃ© du service blockchain
2025-12-26T12:58:53.207+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 56421010-fbdc-4a9a-86c8-4ee069c6e510
2025-12-26T12:58:53.207+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> GET http://BLOCKCHAIN-SERVICE/api/blockchain/health HTTP/1.1
2025-12-26T12:58:53.208+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept: application/json
2025-12-26T12:58:53.208+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept-Encoding: gzip, deflate
2025-12-26T12:58:53.208+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Content-Type: application/json
2025-12-26T12:58:53.208+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Correlation-ID: 56421010-fbdc-4a9a-86c8-4ee069c6e510
2025-12-26T12:58:53.208+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Name: payment-service
2025-12-26T12:58:53.208+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Version: 1.0
2025-12-26T12:58:53.208+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> END HTTP (0-byte body)
2025-12-26T12:58:53.209+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T12:58:53.211+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@5f47a5da instance = InstanceInfo [instanceId = blockchain-service:b9841c9ad10cf8c07241da1e6ca4bd4d, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@46a09441]
2025-12-26T12:58:53.211+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@5f47a5da instance = InstanceInfo [instanceId = blockchain-service:b9841c9ad10cf8c07241da1e6ca4bd4d, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@46a09441]
2025-12-26T12:58:53.346+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- HTTP/1.1 200 (137ms)
2025-12-26T12:58:53.346+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] connection: keep-alive
2025-12-26T12:58:53.346+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] content-type: application/json
2025-12-26T12:58:53.346+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] date: Fri, 26 Dec 2025 11:58:53 GMT
2025-12-26T12:58:53.346+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] keep-alive: timeout=60
2025-12-26T12:58:53.346+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] transfer-encoding: chunked
2025-12-26T12:58:53.346+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Origin
2025-12-26T12:58:53.346+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Method
2025-12-26T12:58:53.346+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Headers
2025-12-26T12:58:53.346+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] 
2025-12-26T12:58:53.347+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] {"status":"UP","message":"Blockchain Service is running","contractAddress":"0x23470CA6C42Fe32E3E48b85999123cC28a57Ca94","network":"sepolia","currentBlock":9917979,"adminWallet":"0x34f528b671cf1c31c2f579eef593ba537d63f1fd"}
2025-12-26T12:58:53.347+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- END HTTP (222-byte body)
2025-12-26T12:58:53.348+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.s.ExternalServiceOrchestrator      : âœ… Service blockchain en bonne santÃ©
2025-12-26T12:58:53.348+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion Ã  RabbitMQ...
2025-12-26T12:58:53.353+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.controller.PaymentController       : âœ… RabbitMQ connectÃ© avec succÃ¨s
2025-12-26T12:58:53.353+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion au booking-service...
2025-12-26T12:58:53.354+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 69695116-a178-4199-8dd0-991a743b195a
2025-12-26T12:58:53.354+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] ---> GET http://booking-service/bookings/health HTTP/1.1
2025-12-26T12:58:53.354+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Accept: application/json
2025-12-26T12:58:53.354+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Accept-Encoding: gzip, deflate
2025-12-26T12:58:53.354+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Content-Type: application/json
2025-12-26T12:58:53.354+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Correlation-ID: 69695116-a178-4199-8dd0-991a743b195a
2025-12-26T12:58:53.354+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Service-Name: payment-service
2025-12-26T12:58:53.354+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Service-Version: 1.0
2025-12-26T12:58:53.354+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] ---> END HTTP (0-byte body)
2025-12-26T12:58:53.354+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T12:58:53.355+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@5784dcfa instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@148a4b54]
2025-12-26T12:58:53.355+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@5784dcfa instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@148a4b54]
2025-12-26T12:58:53.365+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] <--- HTTP/1.1 200 (10ms)
2025-12-26T12:58:53.365+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] cache-control: no-cache, no-store, max-age=0, must-revalidate
2025-12-26T12:58:53.365+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] connection: keep-alive
2025-12-26T12:58:53.365+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] content-type: application/json
2025-12-26T12:58:53.365+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] date: Fri, 26 Dec 2025 11:58:53 GMT
2025-12-26T12:58:53.365+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] expires: 0
2025-12-26T12:58:53.365+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] keep-alive: timeout=60
2025-12-26T12:58:53.365+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] pragma: no-cache
2025-12-26T12:58:53.365+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] transfer-encoding: chunked
2025-12-26T12:58:53.365+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Origin
2025-12-26T12:58:53.365+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Access-Control-Request-Method
2025-12-26T12:58:53.365+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Access-Control-Request-Headers
2025-12-26T12:58:53.365+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-content-type-options: nosniff
2025-12-26T12:58:53.365+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-frame-options: DENY
2025-12-26T12:58:53.365+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-xss-protection: 0
2025-12-26T12:58:53.365+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] 
2025-12-26T12:58:53.365+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] {"service":"booking-service","status":"UP"}
2025-12-26T12:58:53.366+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] <--- END HTTP (43-byte body)
2025-12-26T12:59:08.624+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.controller.PaymentController       : ðŸ©º Health check complet du service payment
2025-12-26T12:59:08.624+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion Ã  la base de donnÃ©es...
2025-12-26T12:59:08.629+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.controller.PaymentController       : âœ… Base de donnÃ©es connectÃ©e. Nombre d'enregistrements dans payments: 9
2025-12-26T12:59:08.630+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.controller.PaymentController       : ðŸ©º VÃ©rification santÃ© blockchain
2025-12-26T12:59:08.630+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.s.ExternalServiceOrchestrator      : ðŸ©º VÃ©rification de la santÃ© du service blockchain
2025-12-26T12:59:08.630+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 89c153c1-9912-4598-a6f5-1fac1299b44b
2025-12-26T12:59:08.630+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> GET http://BLOCKCHAIN-SERVICE/api/blockchain/health HTTP/1.1
2025-12-26T12:59:08.630+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept: application/json
2025-12-26T12:59:08.630+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept-Encoding: gzip, deflate
2025-12-26T12:59:08.630+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Content-Type: application/json
2025-12-26T12:59:08.630+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Correlation-ID: 89c153c1-9912-4598-a6f5-1fac1299b44b
2025-12-26T12:59:08.630+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Name: payment-service
2025-12-26T12:59:08.630+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Version: 1.0
2025-12-26T12:59:08.630+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> END HTTP (0-byte body)
2025-12-26T12:59:08.630+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T12:59:08.633+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@5f47a5da instance = InstanceInfo [instanceId = blockchain-service:b9841c9ad10cf8c07241da1e6ca4bd4d, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@46a09441]
2025-12-26T12:59:08.633+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@5f47a5da instance = InstanceInfo [instanceId = blockchain-service:b9841c9ad10cf8c07241da1e6ca4bd4d, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@46a09441]
2025-12-26T12:59:08.768+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- HTTP/1.1 200 (142ms)
2025-12-26T12:59:08.768+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] connection: keep-alive
2025-12-26T12:59:08.768+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] content-type: application/json
2025-12-26T12:59:08.768+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] date: Fri, 26 Dec 2025 11:59:08 GMT
2025-12-26T12:59:08.768+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] keep-alive: timeout=60
2025-12-26T12:59:08.768+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] transfer-encoding: chunked
2025-12-26T12:59:08.768+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Origin
2025-12-26T12:59:08.768+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Method
2025-12-26T12:59:08.768+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Headers
2025-12-26T12:59:08.768+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] 
2025-12-26T12:59:08.774+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] {"status":"UP","message":"Blockchain Service is running","contractAddress":"0x23470CA6C42Fe32E3E48b85999123cC28a57Ca94","network":"sepolia","currentBlock":9917980,"adminWallet":"0x34f528b671cf1c31c2f579eef593ba537d63f1fd"}
2025-12-26T12:59:08.774+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- END HTTP (222-byte body)
2025-12-26T12:59:08.776+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.s.ExternalServiceOrchestrator      : âœ… Service blockchain en bonne santÃ©
2025-12-26T12:59:08.776+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion Ã  RabbitMQ...
2025-12-26T12:59:08.785+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.controller.PaymentController       : âœ… RabbitMQ connectÃ© avec succÃ¨s
2025-12-26T12:59:08.786+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion au booking-service...
2025-12-26T12:59:08.786+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 75af0551-434b-4f97-bc0b-8f6d238fbc51
2025-12-26T12:59:08.786+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] ---> GET http://booking-service/bookings/health HTTP/1.1
2025-12-26T12:59:08.787+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Accept: application/json
2025-12-26T12:59:08.787+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Accept-Encoding: gzip, deflate
2025-12-26T12:59:08.787+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Content-Type: application/json
2025-12-26T12:59:08.787+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Correlation-ID: 75af0551-434b-4f97-bc0b-8f6d238fbc51
2025-12-26T12:59:08.787+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Service-Name: payment-service
2025-12-26T12:59:08.787+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Service-Version: 1.0
2025-12-26T12:59:08.787+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] ---> END HTTP (0-byte body)
2025-12-26T12:59:08.787+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T12:59:08.788+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@5784dcfa instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@148a4b54]
2025-12-26T12:59:08.788+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@5784dcfa instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@148a4b54]
2025-12-26T12:59:08.798+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] <--- HTTP/1.1 200 (10ms)
2025-12-26T12:59:08.798+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] cache-control: no-cache, no-store, max-age=0, must-revalidate
2025-12-26T12:59:08.798+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] connection: keep-alive
2025-12-26T12:59:08.798+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] content-type: application/json
2025-12-26T12:59:08.799+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] date: Fri, 26 Dec 2025 11:59:08 GMT
2025-12-26T12:59:08.799+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] expires: 0
2025-12-26T12:59:08.799+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] keep-alive: timeout=60
2025-12-26T12:59:08.799+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] pragma: no-cache
2025-12-26T12:59:08.799+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] transfer-encoding: chunked
2025-12-26T12:59:08.799+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Origin
2025-12-26T12:59:08.799+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Access-Control-Request-Method
2025-12-26T12:59:08.799+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Access-Control-Request-Headers
2025-12-26T12:59:08.799+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-content-type-options: nosniff
2025-12-26T12:59:08.799+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-frame-options: DENY
2025-12-26T12:59:08.799+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-xss-protection: 0
2025-12-26T12:59:08.799+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] 
2025-12-26T12:59:08.801+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] {"service":"booking-service","status":"UP"}
2025-12-26T12:59:08.801+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] <--- END HTTP (43-byte body)
2025-12-26T13:00:31.792+01:00  INFO 18528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T13:01:01.750+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.controller.PaymentController       : ðŸ“œ RÃ©cupÃ©ration des paiements pour rÃ©servation #1
2025-12-26T13:01:49.034+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.controller.PaymentController       : ðŸ“œ RÃ©cupÃ©ration des paiements pour rÃ©servation #1
2025-12-26T13:05:31.798+01:00  INFO 18528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T13:07:07.063+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ©º Health check complet du service payment
2025-12-26T13:07:07.063+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion Ã  la base de donnÃ©es...
2025-12-26T13:07:07.067+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : âœ… Base de donnÃ©es connectÃ©e. Nombre d'enregistrements dans payments: 9
2025-12-26T13:07:07.067+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ©º VÃ©rification santÃ© blockchain
2025-12-26T13:07:07.067+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.s.ExternalServiceOrchestrator      : ðŸ©º VÃ©rification de la santÃ© du service blockchain
2025-12-26T13:07:07.067+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 2baba704-fea9-4792-a19c-7f85af243cfe
2025-12-26T13:07:07.069+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> GET http://BLOCKCHAIN-SERVICE/api/blockchain/health HTTP/1.1
2025-12-26T13:07:07.069+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept: application/json
2025-12-26T13:07:07.069+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept-Encoding: gzip, deflate
2025-12-26T13:07:07.069+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Content-Type: application/json
2025-12-26T13:07:07.069+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Correlation-ID: 2baba704-fea9-4792-a19c-7f85af243cfe
2025-12-26T13:07:07.069+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Name: payment-service
2025-12-26T13:07:07.069+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Version: 1.0
2025-12-26T13:07:07.069+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> END HTTP (0-byte body)
2025-12-26T13:07:07.069+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T13:07:07.071+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@22775f92 instance = InstanceInfo [instanceId = blockchain-service:b9841c9ad10cf8c07241da1e6ca4bd4d, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@46a09441]
2025-12-26T13:07:07.071+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@22775f92 instance = InstanceInfo [instanceId = blockchain-service:b9841c9ad10cf8c07241da1e6ca4bd4d, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@46a09441]
2025-12-26T13:07:07.206+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- HTTP/1.1 200 (136ms)
2025-12-26T13:07:07.206+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] connection: keep-alive
2025-12-26T13:07:07.206+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] content-type: application/json
2025-12-26T13:07:07.206+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] date: Fri, 26 Dec 2025 12:07:07 GMT
2025-12-26T13:07:07.206+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] keep-alive: timeout=60
2025-12-26T13:07:07.206+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] transfer-encoding: chunked
2025-12-26T13:07:07.206+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Origin
2025-12-26T13:07:07.206+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Method
2025-12-26T13:07:07.206+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Headers
2025-12-26T13:07:07.206+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] 
2025-12-26T13:07:07.207+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] {"status":"UP","message":"Blockchain Service is running","contractAddress":"0x23470CA6C42Fe32E3E48b85999123cC28a57Ca94","network":"sepolia","currentBlock":9918015,"adminWallet":"0x34f528b671cf1c31c2f579eef593ba537d63f1fd"}
2025-12-26T13:07:07.207+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- END HTTP (222-byte body)
2025-12-26T13:07:07.208+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.s.ExternalServiceOrchestrator      : âœ… Service blockchain en bonne santÃ©
2025-12-26T13:07:07.209+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion Ã  RabbitMQ...
2025-12-26T13:07:07.214+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : âœ… RabbitMQ connectÃ© avec succÃ¨s
2025-12-26T13:07:07.214+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion au booking-service...
2025-12-26T13:07:07.215+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 77d62731-a0f9-4bc3-a2ec-39538826ba08
2025-12-26T13:07:07.215+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] ---> GET http://booking-service/bookings/health HTTP/1.1
2025-12-26T13:07:07.215+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Accept: application/json
2025-12-26T13:07:07.215+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Accept-Encoding: gzip, deflate
2025-12-26T13:07:07.215+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Content-Type: application/json
2025-12-26T13:07:07.215+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Correlation-ID: 77d62731-a0f9-4bc3-a2ec-39538826ba08
2025-12-26T13:07:07.215+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Service-Name: payment-service
2025-12-26T13:07:07.215+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Service-Version: 1.0
2025-12-26T13:07:07.215+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] ---> END HTTP (0-byte body)
2025-12-26T13:07:07.215+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T13:07:07.217+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@1836de53 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@148a4b54]
2025-12-26T13:07:07.217+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@1836de53 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@148a4b54]
2025-12-26T13:07:07.227+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] <--- HTTP/1.1 200 (11ms)
2025-12-26T13:07:07.227+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] cache-control: no-cache, no-store, max-age=0, must-revalidate
2025-12-26T13:07:07.228+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] connection: keep-alive
2025-12-26T13:07:07.228+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] content-type: application/json
2025-12-26T13:07:07.228+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] date: Fri, 26 Dec 2025 12:07:07 GMT
2025-12-26T13:07:07.228+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] expires: 0
2025-12-26T13:07:07.228+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] keep-alive: timeout=60
2025-12-26T13:07:07.228+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] pragma: no-cache
2025-12-26T13:07:07.228+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] transfer-encoding: chunked
2025-12-26T13:07:07.228+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Origin
2025-12-26T13:07:07.228+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Access-Control-Request-Method
2025-12-26T13:07:07.228+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Access-Control-Request-Headers
2025-12-26T13:07:07.228+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-content-type-options: nosniff
2025-12-26T13:07:07.228+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-frame-options: DENY
2025-12-26T13:07:07.228+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-xss-protection: 0
2025-12-26T13:07:07.228+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] 
2025-12-26T13:07:07.228+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] {"service":"booking-service","status":"UP"}
2025-12-26T13:07:07.228+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] <--- END HTTP (43-byte body)
2025-12-26T13:07:15.779+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.controller.PaymentController       : ðŸ©º VÃ©rification santÃ© notification service
2025-12-26T13:07:15.780+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.s.ExternalServiceOrchestrator      : ðŸ©º VÃ©rification de la santÃ© du service notification
2025-12-26T13:07:15.780+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: dd228fed-6bda-4136-876c-9e75853997ea
2025-12-26T13:07:15.780+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#healthCheck] ---> GET http://NOTIFICATION-SERVICE/api/notifications/health HTTP/1.1
2025-12-26T13:07:15.780+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#healthCheck] Accept: application/json
2025-12-26T13:07:15.780+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#healthCheck] Accept-Encoding: gzip, deflate
2025-12-26T13:07:15.781+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#healthCheck] Content-Type: application/json
2025-12-26T13:07:15.781+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#healthCheck] X-Correlation-ID: dd228fed-6bda-4136-876c-9e75853997ea
2025-12-26T13:07:15.781+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#healthCheck] X-Service-Name: payment-service
2025-12-26T13:07:15.781+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#healthCheck] X-Service-Version: 1.0
2025-12-26T13:07:15.781+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#healthCheck] ---> END HTTP (0-byte body)
2025-12-26T13:07:15.808+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T13:07:15.809+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@41f4b140 instance = InstanceInfo [instanceId = notification-service:1462f1f6d99097969a516d6ed791b753, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@639efb4d]
2025-12-26T13:07:15.809+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@41f4b140 instance = InstanceInfo [instanceId = notification-service:1462f1f6d99097969a516d6ed791b753, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@639efb4d]
2025-12-26T13:07:16.143+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#healthCheck] <--- HTTP/1.1 200 (362ms)
2025-12-26T13:07:16.143+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#healthCheck] connection: keep-alive
2025-12-26T13:07:16.143+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#healthCheck] content-type: application/json
2025-12-26T13:07:16.143+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#healthCheck] date: Fri, 26 Dec 2025 12:07:16 GMT
2025-12-26T13:07:16.143+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#healthCheck] keep-alive: timeout=60
2025-12-26T13:07:16.143+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#healthCheck] transfer-encoding: chunked
2025-12-26T13:07:16.143+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#healthCheck] 
2025-12-26T13:07:16.155+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#healthCheck] {"service":"Notification Service","port":"8086","status":"UP"}
2025-12-26T13:07:16.155+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#healthCheck] <--- END HTTP (62-byte body)
2025-12-26T13:07:16.156+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.s.ExternalServiceOrchestrator      : âœ… Service notification en bonne santÃ©
2025-12-26T13:07:24.419+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ©º VÃ©rification santÃ© blockchain
2025-12-26T13:07:24.419+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.s.ExternalServiceOrchestrator      : ðŸ©º VÃ©rification de la santÃ© du service blockchain
2025-12-26T13:07:24.420+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 064113be-b401-4647-87ff-f44e5729d1cd
2025-12-26T13:07:24.420+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> GET http://BLOCKCHAIN-SERVICE/api/blockchain/health HTTP/1.1
2025-12-26T13:07:24.420+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept: application/json
2025-12-26T13:07:24.420+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept-Encoding: gzip, deflate
2025-12-26T13:07:24.420+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Content-Type: application/json
2025-12-26T13:07:24.420+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Correlation-ID: 064113be-b401-4647-87ff-f44e5729d1cd
2025-12-26T13:07:24.420+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Name: payment-service
2025-12-26T13:07:24.420+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Version: 1.0
2025-12-26T13:07:24.420+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> END HTTP (0-byte body)
2025-12-26T13:07:24.421+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T13:07:24.421+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@22775f92 instance = InstanceInfo [instanceId = blockchain-service:b9841c9ad10cf8c07241da1e6ca4bd4d, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@46a09441]
2025-12-26T13:07:24.421+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@22775f92 instance = InstanceInfo [instanceId = blockchain-service:b9841c9ad10cf8c07241da1e6ca4bd4d, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@46a09441]
2025-12-26T13:07:24.554+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- HTTP/1.1 200 (133ms)
2025-12-26T13:07:24.554+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] connection: keep-alive
2025-12-26T13:07:24.554+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] content-type: application/json
2025-12-26T13:07:24.554+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] date: Fri, 26 Dec 2025 12:07:24 GMT
2025-12-26T13:07:24.554+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] keep-alive: timeout=60
2025-12-26T13:07:24.554+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] transfer-encoding: chunked
2025-12-26T13:07:24.554+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Origin
2025-12-26T13:07:24.554+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Method
2025-12-26T13:07:24.554+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Headers
2025-12-26T13:07:24.554+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] 
2025-12-26T13:07:24.554+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] {"status":"UP","message":"Blockchain Service is running","contractAddress":"0x23470CA6C42Fe32E3E48b85999123cC28a57Ca94","network":"sepolia","currentBlock":9918016,"adminWallet":"0x34f528b671cf1c31c2f579eef593ba537d63f1fd"}
2025-12-26T13:07:24.554+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- END HTTP (222-byte body)
2025-12-26T13:07:24.555+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.s.ExternalServiceOrchestrator      : âœ… Service blockchain en bonne santÃ©
2025-12-26T13:08:50.955+01:00  WARN 18528 --- [payment-service] [http-nio-8084-exec-9] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Unexpected character (''' (code 39)): expected a valid value (JSON String, Number, Array, Object or token 'null', 'true' or 'false')]
2025-12-26T13:09:25.044+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.controller.PaymentController       : ðŸ“§ Envoi notification de paiement pour utilisateur #1
2025-12-26T13:09:25.045+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“§ Envoi de notification Ã  l'utilisateur #1 - Type: PAYMENT_RECEIVED
2025-12-26T13:09:25.048+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 5e368d2c-bdec-4af5-95c3-ace902304efb
2025-12-26T13:09:25.048+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] ---> POST http://NOTIFICATION-SERVICE/api/notifications HTTP/1.1
2025-12-26T13:09:25.048+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Accept: application/json
2025-12-26T13:09:25.048+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Accept-Encoding: gzip, deflate
2025-12-26T13:09:25.048+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Content-Length: 156
2025-12-26T13:09:25.048+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Content-Type: application/json
2025-12-26T13:09:25.048+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] X-Correlation-ID: 5e368d2c-bdec-4af5-95c3-ace902304efb
2025-12-26T13:09:25.048+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] X-Service-Name: payment-service
2025-12-26T13:09:25.048+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] X-Service-Version: 1.0
2025-12-26T13:09:25.048+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] 
2025-12-26T13:09:25.048+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] {
  "userId" : 1,
  "notificationType" : "PAYMENT_RECEIVED",
  "message" : "Test de notification",
  "reservationId" : 1,
  "title" : "Test Payment"
}
2025-12-26T13:09:25.048+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] ---> END HTTP (156-byte body)
2025-12-26T13:09:25.049+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T13:09:25.049+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@69932707 instance = InstanceInfo [instanceId = notification-service:1462f1f6d99097969a516d6ed791b753, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@639efb4d]
2025-12-26T13:09:25.049+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@69932707 instance = InstanceInfo [instanceId = notification-service:1462f1f6d99097969a516d6ed791b753, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@639efb4d]
2025-12-26T13:09:25.458+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] <--- HTTP/1.1 201 (409ms)
2025-12-26T13:09:25.459+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] connection: keep-alive
2025-12-26T13:09:25.459+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] content-type: application/json
2025-12-26T13:09:25.459+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] date: Fri, 26 Dec 2025 12:09:25 GMT
2025-12-26T13:09:25.459+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] keep-alive: timeout=60
2025-12-26T13:09:25.459+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] transfer-encoding: chunked
2025-12-26T13:09:25.459+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] 
2025-12-26T13:09:25.461+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] {"id":7,"userId":1,"reservationId":1,"notificationType":"PAYMENT_RECEIVED","title":"Test Payment","message":"Test de notification","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-26T13:09:25.2967027"}
2025-12-26T13:09:25.461+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] <--- END HTTP (228-byte body)
2025-12-26T13:09:25.461+01:00  WARN 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.s.ExternalServiceOrchestrator      : âš ï¸ Ã‰chec de l'envoi de notification - RÃ©ponse: {id=7, userId=1, reservationId=1, notificationType=PAYMENT_RECEIVED, title=Test Payment, message=Test de notification, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-26T13:09:25.2967027}
2025-12-26T13:10:31.801+01:00  INFO 18528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T13:10:59.757+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : ðŸ“œ RÃ©cupÃ©ration notifications pour rÃ©servation #1
2025-12-26T13:10:59.765+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : ðŸ“Š Transactions trouvÃ©es pour rÃ©servation #1: 7
2025-12-26T13:10:59.765+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T13:10:59.766+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: cf53a80e-6dba-4c2f-9281-7063997d2398
2025-12-26T13:10:59.766+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> GET http://booking-service/bookings/1 HTTP/1.1
2025-12-26T13:10:59.766+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept: application/json
2025-12-26T13:10:59.766+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept-Encoding: gzip, deflate
2025-12-26T13:10:59.766+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Content-Type: application/json
2025-12-26T13:10:59.766+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Correlation-ID: cf53a80e-6dba-4c2f-9281-7063997d2398
2025-12-26T13:10:59.766+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Name: payment-service
2025-12-26T13:10:59.766+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Version: 1.0
2025-12-26T13:10:59.766+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> END HTTP (0-byte body)
2025-12-26T13:10:59.767+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T13:10:59.768+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@4670a634 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@148a4b54]
2025-12-26T13:10:59.768+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@4670a634 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@148a4b54]
2025-12-26T13:10:59.944+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- HTTP/1.1 200 (177ms)
2025-12-26T13:10:59.944+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] cache-control: no-cache, no-store, max-age=0, must-revalidate
2025-12-26T13:10:59.944+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] connection: keep-alive
2025-12-26T13:10:59.944+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] content-type: application/json
2025-12-26T13:10:59.944+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] date: Fri, 26 Dec 2025 12:10:59 GMT
2025-12-26T13:10:59.944+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] expires: 0
2025-12-26T13:10:59.944+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] keep-alive: timeout=60
2025-12-26T13:10:59.944+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] pragma: no-cache
2025-12-26T13:10:59.944+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] transfer-encoding: chunked
2025-12-26T13:10:59.944+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Origin
2025-12-26T13:10:59.944+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Method
2025-12-26T13:10:59.944+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Headers
2025-12-26T13:10:59.944+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-content-type-options: nosniff
2025-12-26T13:10:59.944+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-frame-options: DENY
2025-12-26T13:10:59.944+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-xss-protection: 0
2025-12-26T13:10:59.944+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] 
2025-12-26T13:10:59.947+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] {"blockchainTxHash":null,"cancelledAt":null,"checkInDate":"2025-01-15T15:00:00","checkOutDate":"2025-01-20T12:00:00","createdAt":"2025-12-24T23:08:06","escrowReleaseTxHash":null,"escrowReleased":false,"id":1,"numGuests":null,"priceBreakdown":{"lockedPricePerNight":null,"baseAmount":450.0,"discountAmount":null,"cleaningFee":null,"petFee":null,"serviceFee":null,"totalAmount":500.0,"platformFeePercentage":null},"propertyId":1,"status":"COMPLETED","totalNights":null,"userId":1,"versionId":null}
2025-12-26T13:10:59.947+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- END HTTP (495-byte body)
2025-12-26T13:10:59.950+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : âœ… UserId 1 trouvÃ© pour rÃ©servation #1
2025-12-26T13:10:59.950+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : ðŸ“Š UserId rÃ©cupÃ©rÃ©: 1
2025-12-26T13:10:59.950+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : ðŸ“Š Utilisation de userId: 1
2025-12-26T13:10:59.959+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“§ RÃ©cupÃ©ration des notifications pour l'utilisateur #1
2025-12-26T13:10:59.959+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T13:10:59.960+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: adae76c1-fb2e-4446-9f47-2312b030da8a
2025-12-26T13:10:59.961+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] ---> GET http://NOTIFICATION-SERVICE/api/notifications/user/1 HTTP/1.1
2025-12-26T13:10:59.961+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Accept: application/json
2025-12-26T13:10:59.961+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Accept-Encoding: gzip, deflate
2025-12-26T13:10:59.961+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Content-Type: application/json
2025-12-26T13:10:59.961+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Correlation-ID: adae76c1-fb2e-4446-9f47-2312b030da8a
2025-12-26T13:10:59.961+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Service-Name: payment-service
2025-12-26T13:10:59.961+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Service-Version: 1.0
2025-12-26T13:10:59.961+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] ---> END HTTP (0-byte body)
2025-12-26T13:10:59.961+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T13:10:59.962+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@36706089 instance = InstanceInfo [instanceId = notification-service:1462f1f6d99097969a516d6ed791b753, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@639efb4d]
2025-12-26T13:10:59.962+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@36706089 instance = InstanceInfo [instanceId = notification-service:1462f1f6d99097969a516d6ed791b753, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@639efb4d]
2025-12-26T13:11:00.178+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] <--- HTTP/1.1 200 (216ms)
2025-12-26T13:11:00.178+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] connection: keep-alive
2025-12-26T13:11:00.178+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] content-type: application/json
2025-12-26T13:11:00.178+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] date: Fri, 26 Dec 2025 12:11:00 GMT
2025-12-26T13:11:00.178+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] keep-alive: timeout=60
2025-12-26T13:11:00.178+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] transfer-encoding: chunked
2025-12-26T13:11:00.178+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] 
2025-12-26T13:11:00.178+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] [{"id":7,"userId":1,"reservationId":1,"notificationType":"PAYMENT_RECEIVED","title":"Test Payment","message":"Test de notification","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-26T13:09:25"},{"id":6,"userId":1,"reservationId":1,"notificationType":"PAYMENT_RECEIVED","title":"Paiement reÃ§u","message":"Votre paiement de 0.25 ETH a Ã©tÃ© reÃ§u et est en traitement","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-25T21:10:54"},{"id":5,"userId":1,"reservationId":1,"notificationType":"PAYMENT_RECEIVED","title":"Paiement reÃ§u","message":"Paiement crÃ©Ã© via API","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-25T15:51:36"},{"id":4,"userId":1,"reservationId":1,"notificationType":"CHECK_IN_REMINDER","title":"Rappel check-in","message":"Noubliez pas votre check-in demain","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-25T15:13:02"},{"id":3,"userId":1,"reservationId":1,"notificationType":"MESSAGE_RECEIVED","title":"Nouveau message","message":"Vous avez reÃ§u un nouveau message du propriÃ©taire","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-25T15:12:16"},{"id":2,"userId":1,"reservationId":1,"notificationType":"BOOKING_CONFIRMATION","title":"RÃ©servation confirmÃ©e","message":"Votre rÃ©servation #1 a Ã©tÃ© crÃ©Ã©e avec succÃ¨s","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-25T15:11:56"}]
2025-12-26T13:11:00.178+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] <--- END HTTP (1472-byte body)
2025-12-26T13:11:00.179+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“Š Type de rÃ©ponse reÃ§ue: java.util.ArrayList
2025-12-26T13:11:00.179+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“Š Valeur de rÃ©ponse: [{id=7, userId=1, reservationId=1, notificationType=PAYMENT_RECEIVED, title=Test Payment, message=Test de notification, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-26T13:09:25}, {id=6, userId=1, reservationId=1, notificationType=PAYMENT_RECEIVED, title=Paiement reÃ§u, message=Votre paiement de 0.25 ETH a Ã©tÃ© reÃ§u et est en traitement, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-25T21:10:54}, {id=5, userId=1, reservationId=1, notificationType=PAYMENT_RECEIVED, title=Paiement reÃ§u, message=Paiement crÃ©Ã© via API, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-25T15:51:36}, {id=4, userId=1, reservationId=1, notificationType=CHECK_IN_REMINDER, title=Rappel check-in, message=Noubliez pas votre check-in demain, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-25T15:13:02}, {id=3, userId=1, reservationId=1, notificationType=MESSAGE_RECEIVED, title=Nouveau message, message=Vous avez reÃ§u un nouveau message du propriÃ©taire, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-25T15:12:16}, {id=2, userId=1, reservationId=1, notificationType=BOOKING_CONFIRMATION, title=RÃ©servation confirmÃ©e, message=Votre rÃ©servation #1 a Ã©tÃ© crÃ©Ã©e avec succÃ¨s, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-25T15:11:56}]
2025-12-26T13:11:00.179+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“Š Taille de la liste: 6
2025-12-26T13:11:00.179+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“Š Premier Ã©lÃ©ment type: java.util.LinkedHashMap
2025-12-26T13:11:00.179+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“Š Premier Ã©lÃ©ment: {id=7, userId=1, reservationId=1, notificationType=PAYMENT_RECEIVED, title=Test Payment, message=Test de notification, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-26T13:09:25}
2025-12-26T13:11:00.179+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.s.ExternalServiceOrchestrator      : âœ… Conversion directe rÃ©ussie
2025-12-26T13:11:00.179+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : ðŸ“Š Notifications rÃ©cupÃ©rÃ©es (total): 6
2025-12-26T13:11:00.179+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : ðŸ“Š Notification - notificationType: PAYMENT_RECEIVED, reservationId: 1
2025-12-26T13:11:00.179+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : ðŸ“Š Notification - notificationType: PAYMENT_RECEIVED, reservationId: 1
2025-12-26T13:11:00.179+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : ðŸ“Š Notification - notificationType: PAYMENT_RECEIVED, reservationId: 1
2025-12-26T13:11:00.179+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : ðŸ“Š Notification - notificationType: CHECK_IN_REMINDER, reservationId: 1
2025-12-26T13:11:00.179+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : ðŸ“Š Notification - notificationType: MESSAGE_RECEIVED, reservationId: 1
2025-12-26T13:11:00.179+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : ðŸ“Š Notification - notificationType: BOOKING_CONFIRMATION, reservationId: 1
2025-12-26T13:11:00.180+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : ðŸ“Š Notifications pour rÃ©servation #1: 6
2025-12-26T13:11:00.181+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : ðŸ“Š Notifications filtrÃ©es par type: 6
2025-12-26T13:12:23.140+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.controller.PaymentController       : ðŸ” CrÃ©ation wallet pour utilisateur #2
2025-12-26T13:12:23.141+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.s.ExternalServiceOrchestrator      : ðŸ” CrÃ©ation d'un nouveau wallet via blockchain service
2025-12-26T13:12:23.141+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 68ca64c9-6aeb-49a4-804b-e1004bc964ff
2025-12-26T13:12:23.141+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] ---> POST http://BLOCKCHAIN-SERVICE/api/blockchain/wallets/create HTTP/1.1
2025-12-26T13:12:23.141+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] Accept: application/json
2025-12-26T13:12:23.141+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] Accept-Encoding: gzip, deflate
2025-12-26T13:12:23.141+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] Content-Type: application/json
2025-12-26T13:12:23.141+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] X-Correlation-ID: 68ca64c9-6aeb-49a4-804b-e1004bc964ff
2025-12-26T13:12:23.141+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] X-Service-Name: payment-service
2025-12-26T13:12:23.141+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] X-Service-Version: 1.0
2025-12-26T13:12:23.141+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] ---> END HTTP (0-byte body)
2025-12-26T13:12:23.142+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T13:12:23.143+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@7e022c4a instance = InstanceInfo [instanceId = blockchain-service:b9841c9ad10cf8c07241da1e6ca4bd4d, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@46a09441]
2025-12-26T13:12:23.143+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@7e022c4a instance = InstanceInfo [instanceId = blockchain-service:b9841c9ad10cf8c07241da1e6ca4bd4d, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@46a09441]
2025-12-26T13:12:23.250+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] <--- HTTP/1.1 200 (109ms)
2025-12-26T13:12:23.251+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] connection: keep-alive
2025-12-26T13:12:23.251+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] content-type: application/json
2025-12-26T13:12:23.251+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] date: Fri, 26 Dec 2025 12:12:23 GMT
2025-12-26T13:12:23.251+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] keep-alive: timeout=60
2025-12-26T13:12:23.251+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] transfer-encoding: chunked
2025-12-26T13:12:23.251+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] vary: Origin
2025-12-26T13:12:23.251+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] vary: Access-Control-Request-Method
2025-12-26T13:12:23.251+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] vary: Access-Control-Request-Headers
2025-12-26T13:12:23.251+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] 
2025-12-26T13:12:23.251+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] {"address":"0x4b7219783091771c2d55f7f01d447c83d60c22cb","encryptedPrivateKey":"eJtF1GMvgQ/7PJpzvWx/iZ3LQXnN+tpBHGq/lftXUDdQ0/F2PySe9EuNRnSqvrbJdKZoq9ZLD/A9IjNBLbZYdRGweRxfi36/dvKh+FBv9X4=","success":true,"message":"Wallet crÃ©Ã© avec succÃ¨s"}
2025-12-26T13:12:23.251+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#createWallet] <--- END HTTP (243-byte body)
2025-12-26T13:12:23.252+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.s.ExternalServiceOrchestrator      : âœ… Wallet crÃ©Ã©: 0x4b7219783091771c2d55f7f01d447c83d60c22cb
2025-12-26T13:12:34.883+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.controller.PaymentController       : ðŸ©º VÃ©rification santÃ© blockchain
2025-12-26T13:12:34.883+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.s.ExternalServiceOrchestrator      : ðŸ©º VÃ©rification de la santÃ© du service blockchain
2025-12-26T13:12:34.883+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 72d14d11-a004-4fd7-922d-091e986fa8c5
2025-12-26T13:12:34.884+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> GET http://BLOCKCHAIN-SERVICE/api/blockchain/health HTTP/1.1
2025-12-26T13:12:34.884+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept: application/json
2025-12-26T13:12:34.884+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept-Encoding: gzip, deflate
2025-12-26T13:12:34.884+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Content-Type: application/json
2025-12-26T13:12:34.884+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Correlation-ID: 72d14d11-a004-4fd7-922d-091e986fa8c5
2025-12-26T13:12:34.884+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Name: payment-service
2025-12-26T13:12:34.884+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Version: 1.0
2025-12-26T13:12:34.884+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> END HTTP (0-byte body)
2025-12-26T13:12:34.884+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T13:12:34.885+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@7e022c4a instance = InstanceInfo [instanceId = blockchain-service:b9841c9ad10cf8c07241da1e6ca4bd4d, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@46a09441]
2025-12-26T13:12:34.885+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@7e022c4a instance = InstanceInfo [instanceId = blockchain-service:b9841c9ad10cf8c07241da1e6ca4bd4d, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@46a09441]
2025-12-26T13:12:35.071+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- HTTP/1.1 200 (188ms)
2025-12-26T13:12:35.072+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] connection: keep-alive
2025-12-26T13:12:35.072+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] content-type: application/json
2025-12-26T13:12:35.072+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] date: Fri, 26 Dec 2025 12:12:35 GMT
2025-12-26T13:12:35.072+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] keep-alive: timeout=60
2025-12-26T13:12:35.072+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] transfer-encoding: chunked
2025-12-26T13:12:35.073+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Origin
2025-12-26T13:12:35.073+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Method
2025-12-26T13:12:35.073+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Headers
2025-12-26T13:12:35.073+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] 
2025-12-26T13:12:35.073+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] {"status":"UP","message":"Blockchain Service is running","contractAddress":"0x23470CA6C42Fe32E3E48b85999123cC28a57Ca94","network":"sepolia","currentBlock":9918040,"adminWallet":"0x34f528b671cf1c31c2f579eef593ba537d63f1fd"}
2025-12-26T13:12:35.073+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- END HTTP (222-byte body)
2025-12-26T13:12:35.074+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.s.ExternalServiceOrchestrator      : âœ… Service blockchain en bonne santÃ©
2025-12-26T13:14:24.141+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.controller.PaymentController       : ðŸ”“ Demande de libÃ©ration d'escrow pour rÃ©servation #999
2025-12-26T13:14:24.143+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-7] c.rental.payment.service.PaymentService  : ðŸ”“ LibÃ©ration d'escrow pour rÃ©servation #999
2025-12-26T13:14:24.151+01:00 ERROR 18528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.controller.PaymentController       : âŒ Erreur libÃ©ration escrow: Aucune transaction trouvÃ©e pour rÃ©servation #999
2025-12-26T13:14:39.385+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ”“ Demande de libÃ©ration d'escrow pour rÃ©servation #1
2025-12-26T13:14:39.388+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-6] c.rental.payment.service.PaymentService  : ðŸ”“ LibÃ©ration d'escrow pour rÃ©servation #1
2025-12-26T13:14:39.395+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T13:14:39.396+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: cab842b0-421b-4a6b-b61a-9769220d4156
2025-12-26T13:14:39.396+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> GET http://booking-service/bookings/1 HTTP/1.1
2025-12-26T13:14:39.396+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept: application/json
2025-12-26T13:14:39.396+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept-Encoding: gzip, deflate
2025-12-26T13:14:39.396+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Content-Type: application/json
2025-12-26T13:14:39.396+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Correlation-ID: cab842b0-421b-4a6b-b61a-9769220d4156
2025-12-26T13:14:39.396+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Name: payment-service
2025-12-26T13:14:39.396+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Version: 1.0
2025-12-26T13:14:39.396+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> END HTTP (0-byte body)
2025-12-26T13:14:39.396+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T13:14:39.398+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@7992b70a instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@148a4b54]
2025-12-26T13:14:39.398+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@7992b70a instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@148a4b54]
2025-12-26T13:14:39.411+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- HTTP/1.1 200 (14ms)
2025-12-26T13:14:39.411+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] cache-control: no-cache, no-store, max-age=0, must-revalidate
2025-12-26T13:14:39.411+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] connection: keep-alive
2025-12-26T13:14:39.411+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] content-type: application/json
2025-12-26T13:14:39.411+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] date: Fri, 26 Dec 2025 12:14:39 GMT
2025-12-26T13:14:39.411+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] expires: 0
2025-12-26T13:14:39.411+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] keep-alive: timeout=60
2025-12-26T13:14:39.411+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] pragma: no-cache
2025-12-26T13:14:39.411+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] transfer-encoding: chunked
2025-12-26T13:14:39.411+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Origin
2025-12-26T13:14:39.411+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Method
2025-12-26T13:14:39.411+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Headers
2025-12-26T13:14:39.411+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-content-type-options: nosniff
2025-12-26T13:14:39.411+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-frame-options: DENY
2025-12-26T13:14:39.411+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-xss-protection: 0
2025-12-26T13:14:39.411+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] 
2025-12-26T13:14:39.411+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] {"blockchainTxHash":null,"cancelledAt":null,"checkInDate":"2025-01-15T15:00:00","checkOutDate":"2025-01-20T12:00:00","createdAt":"2025-12-24T23:08:06","escrowReleaseTxHash":null,"escrowReleased":false,"id":1,"numGuests":null,"priceBreakdown":{"lockedPricePerNight":null,"baseAmount":450.0,"discountAmount":null,"cleaningFee":null,"petFee":null,"serviceFee":null,"totalAmount":500.0,"platformFeePercentage":null},"propertyId":1,"status":"COMPLETED","totalNights":null,"userId":1,"versionId":null}
2025-12-26T13:14:39.412+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- END HTTP (495-byte body)
2025-12-26T13:14:39.412+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-6] c.rental.payment.service.PaymentService  : ðŸ”‘ Utilisation de la clÃ© admin pour libÃ©ration escrow
2025-12-26T13:14:39.414+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T13:14:39.415+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 3868cce1-de73-41f8-a821-f0372108f57d
2025-12-26T13:14:39.415+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] ---> POST http://BLOCKCHAIN-SERVICE/api/blockchain/bookings/1/checkout HTTP/1.1
2025-12-26T13:14:39.415+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] Accept: application/json
2025-12-26T13:14:39.415+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] Accept-Encoding: gzip, deflate
2025-12-26T13:14:39.415+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] Content-Length: 99
2025-12-26T13:14:39.415+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] Content-Type: application/json
2025-12-26T13:14:39.415+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] X-Correlation-ID: 3868cce1-de73-41f8-a821-f0372108f57d
2025-12-26T13:14:39.415+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] X-Service-Name: payment-service
2025-12-26T13:14:39.415+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] X-Service-Version: 1.0
2025-12-26T13:14:39.415+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] 
2025-12-26T13:14:39.415+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] {
  "userWalletPrivateKey" : "95f943fbd16b6288242988cc02a48e9519fe37a71f989bde1687e7c471ea214f"
}
2025-12-26T13:14:39.415+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] ---> END HTTP (99-byte body)
2025-12-26T13:14:39.416+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T13:14:39.417+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@58b23b9b instance = InstanceInfo [instanceId = blockchain-service:b9841c9ad10cf8c07241da1e6ca4bd4d, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@46a09441]
2025-12-26T13:14:39.417+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@58b23b9b instance = InstanceInfo [instanceId = blockchain-service:b9841c9ad10cf8c07241da1e6ca4bd4d, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@46a09441]
2025-12-26T13:14:55.254+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] <--- HTTP/1.1 500 (15839ms)
2025-12-26T13:14:55.255+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] connection: close
2025-12-26T13:14:55.255+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] content-type: application/json
2025-12-26T13:14:55.255+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] date: Fri, 26 Dec 2025 12:14:55 GMT
2025-12-26T13:14:55.255+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] transfer-encoding: chunked
2025-12-26T13:14:55.255+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] vary: Origin
2025-12-26T13:14:55.255+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] vary: Access-Control-Request-Method
2025-12-26T13:14:55.255+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] vary: Access-Control-Request-Headers
2025-12-26T13:14:55.255+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] 
2025-12-26T13:14:55.256+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] {"success":false,"message":"Erreur blockchain","blockchainBookingId":null,"txHash":null,"blockNumber":null,"etherscanLink":null,"error":"Transaction 0xc8f8eac446f65e0d437a543062b8856b20b0b061dc0373773daa4353b44d2c47 has failed with status: 0x0. Gas used: 28285. Revert reason: 'execution reverted: Statut de reservation invalide'."}
2025-12-26T13:14:55.256+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] <--- END HTTP (332-byte body)
2025-12-26T13:14:55.258+01:00 ERROR 18528 --- [payment-service] [http-nio-8084-exec-6] com.rental.payment.config.FeignConfig    : âŒ Feign Client Error: Feign Error - Method: BlockchainServiceClient#releaseEscrow(Long,Map), Status: 500, Reason: null
2025-12-26T13:14:55.258+01:00 ERROR 18528 --- [payment-service] [http-nio-8084-exec-6] c.rental.payment.service.PaymentService  : âŒ Erreur libÃ©ration escrow: Internal Server Error: Feign Error - Method: BlockchainServiceClient#releaseEscrow(Long,Map), Status: 500, Reason: null

java.lang.RuntimeException: Internal Server Error: Feign Error - Method: BlockchainServiceClient#releaseEscrow(Long,Map), Status: 500, Reason: null
	at com.rental.payment.config.FeignConfig.lambda$errorDecoder$0(FeignConfig.java:75) ~[classes/:na]
	at feign.InvocationContext.decodeError(InvocationContext.java:133) ~[feign-core-13.6.jar:na]
	at feign.InvocationContext.proceed(InvocationContext.java:80) ~[feign-core-13.6.jar:na]
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:69) ~[feign-core-13.6.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:109) ~[feign-core-13.6.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:53) ~[feign-core-13.6.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:104) ~[feign-core-13.6.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy172.releaseEscrow(Unknown Source) ~[na:na]
	at com.rental.payment.service.PaymentService.releaseEscrow(PaymentService.java:99) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.14.jar:6.2.14]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.14.jar:6.2.14]
	at com.rental.payment.service.PaymentService$$SpringCGLIB$$1.releaseEscrow(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:724) ~[spring-aop-6.2.14.jar:6.2.14]
	at com.rental.payment.service.PaymentService$$SpringCGLIB$$0.releaseEscrow(<generated>) ~[classes/:na]
	at com.rental.payment.controller.PaymentController.releaseEscrow(PaymentController.java:95) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at java.base/java.lang.Thread.run(Thread.java:1474) ~[na:na]

2025-12-26T13:14:55.291+01:00 ERROR 18528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : âŒ Erreur libÃ©ration escrow: Ã‰chec technique: Internal Server Error: Feign Error - Method: BlockchainServiceClient#releaseEscrow(Long,Map), Status: 500, Reason: null
2025-12-26T13:15:31.804+01:00  INFO 18528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T13:17:32.681+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.controller.PaymentController       : ðŸ“¥ Demande de paiement reÃ§ue pour rÃ©servation #999
2025-12-26T13:17:32.682+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-9] c.rental.payment.service.PaymentService  : ðŸ’³ VÃ©rification solde pour rÃ©servation #999
2025-12-26T13:17:32.683+01:00 ERROR 18528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.service.BlockchainService    : âŒ Adresse invalide: Adresse Ethereum invalide: 0xTestPayer123
2025-12-26T13:17:32.683+01:00 ERROR 18528 --- [payment-service] [http-nio-8084-exec-9] c.rental.payment.service.PaymentService  : âŒ Erreur crÃ©ation paiement: Adresse Ethereum invalide: 0xTestPayer123

java.lang.IllegalArgumentException: Adresse Ethereum invalide: 0xTestPayer123
	at com.rental.payment.service.BlockchainService.getBalance(BlockchainService.java:71) ~[classes/:na]
	at com.rental.payment.service.PaymentService.createBookingPayment(PaymentService.java:309) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.14.jar:6.2.14]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.14.jar:6.2.14]
	at com.rental.payment.service.PaymentService$$SpringCGLIB$$1.createBookingPayment(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:724) ~[spring-aop-6.2.14.jar:6.2.14]
	at com.rental.payment.service.PaymentService$$SpringCGLIB$$0.createBookingPayment(<generated>) ~[classes/:na]
	at com.rental.payment.controller.PaymentController.createPayment(PaymentController.java:75) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at java.base/java.lang.Thread.run(Thread.java:1474) ~[na:na]

2025-12-26T13:17:32.685+01:00 ERROR 18528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.controller.PaymentController       : âŒ Erreur crÃ©ation paiement: Ã‰chec du paiement: Adresse Ethereum invalide: 0xTestPayer123
2025-12-26T13:20:31.806+01:00  INFO 18528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T13:25:31.807+01:00  INFO 18528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T13:27:57.356+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.controller.PaymentController       : ðŸ”“ Demande de libÃ©ration d'escrow pour rÃ©servation #4
2025-12-26T13:27:57.356+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-10] c.rental.payment.service.PaymentService  : ðŸ”“ LibÃ©ration d'escrow pour rÃ©servation #4
2025-12-26T13:27:57.367+01:00 ERROR 18528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.controller.PaymentController       : âŒ Erreur libÃ©ration escrow: Aucune transaction trouvÃ©e pour rÃ©servation #4
2025-12-26T13:30:31.825+01:00  INFO 18528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T13:30:59.433+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : ðŸ“¥ Demande de paiement reÃ§ue pour rÃ©servation #4
2025-12-26T13:30:59.434+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.rental.payment.service.PaymentService  : ðŸ’³ VÃ©rification solde pour rÃ©servation #4
2025-12-26T13:31:00.272+01:00 DEBUG 18528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.service.BlockchainService    : ðŸ’° Solde de 0x34f528b671cf1c31c2f579eef593ba537d63f1fd: 0.095565991841690974 ETH
2025-12-26T13:31:00.272+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.rental.payment.service.PaymentService  : ðŸ’° Solde locataire: 0.095565991841690974 ETH, Requis: 0.001 ETH
2025-12-26T13:31:00.272+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-1] c.rental.payment.service.PaymentService  : ðŸ“± Demande de paiement prÃ©parÃ©e pour signature MetaMask
2025-12-26T13:35:31.835+01:00  INFO 18528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T13:40:19.856+01:00  INFO 18528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.controller.PaymentController       : ðŸ“œ RÃ©cupÃ©ration des paiements pour rÃ©servation #4
2025-12-26T13:40:31.846+01:00  INFO 18528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T15:31:52.322+01:00  INFO 3816 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : Starting PaymentServiceApplication using Java 25.0.1 with PID 3816 (C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes started by Lenovo in C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service)
2025-12-26T15:31:52.326+01:00 DEBUG 3816 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : Running with Spring Boot v3.5.8, Spring v6.2.14
2025-12-26T15:31:52.327+01:00  INFO 3816 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : No active profile set, falling back to 1 default profile: "default"
2025-12-26T15:31:53.478+01:00 DEBUG 3816 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\BlockchainServiceClient.class]
2025-12-26T15:31:53.479+01:00 DEBUG 3816 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\BookingServiceClient.class]
2025-12-26T15:31:53.480+01:00 DEBUG 3816 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\NotificationServiceClient.class]
2025-12-26T15:31:54.185+01:00  INFO 3816 --- [payment-service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26T15:31:54.400+01:00  INFO 3816 --- [payment-service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 195 ms. Found 1 JPA repository interface.
2025-12-26T15:31:54.921+01:00  INFO 3816 --- [payment-service] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=8a20e800-fe95-340a-866b-3856ca3f0074
2025-12-26T15:31:56.065+01:00  INFO 3816 --- [payment-service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8084 (http)
2025-12-26T15:31:56.091+01:00  INFO 3816 --- [payment-service] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-26T15:31:56.091+01:00  INFO 3816 --- [payment-service] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2025-12-26T15:31:56.201+01:00  INFO 3816 --- [payment-service] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-26T15:31:56.202+01:00  INFO 3816 --- [payment-service] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3772 ms
2025-12-26T15:31:56.935+01:00  INFO 3816 --- [payment-service] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26T15:31:57.098+01:00  INFO 3816 --- [payment-service] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.36.Final
2025-12-26T15:31:57.163+01:00  INFO 3816 --- [payment-service] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-26T15:31:57.642+01:00  INFO 3816 --- [payment-service] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26T15:31:57.695+01:00  INFO 3816 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-26T15:31:57.968+01:00  INFO 3816 --- [payment-service] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@22f7bf36
2025-12-26T15:31:57.971+01:00  INFO 3816 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-26T15:31:58.011+01:00  WARN 3816 --- [payment-service] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26T15:31:58.013+01:00  WARN 3816 --- [payment-service] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-12-26T15:31:58.040+01:00  INFO 3816 --- [payment-service] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26T15:31:59.529+01:00  INFO 3816 --- [payment-service] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26T15:31:59.957+01:00  INFO 3816 --- [payment-service] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26T15:32:00.174+01:00  INFO 3816 --- [payment-service] [main] com.rental.payment.config.Web3Config     : âœ… Web3 Configuration initialisÃ©e
2025-12-26T15:32:00.175+01:00  INFO 3816 --- [payment-service] [main] com.rental.payment.config.Web3Config     : ðŸ“ Contract Address: 0x4c5556c7bb47c8cadb5417af494AaE7792AF14d
2025-12-26T15:32:00.282+01:00 DEBUG 3816 --- [payment-service] [main] o.s.c.openfeign.FeignClientFactoryBean   : Creating a FeignClientFactoryBean.
2025-12-26T15:32:00.581+01:00  WARN 3816 --- [payment-service] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26T15:32:00.830+01:00  INFO 3816 --- [payment-service] [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'BLOCKCHAIN-SERVICE' URL not provided. Will try picking an instance via load-balancing.
2025-12-26T15:32:00.990+01:00 DEBUG 3816 --- [payment-service] [main] o.s.c.openfeign.FeignClientFactoryBean   : Creating a FeignClientFactoryBean.
2025-12-26T15:32:01.041+01:00  INFO 3816 --- [payment-service] [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'booking-service' URL not provided. Will try picking an instance via load-balancing.
2025-12-26T15:32:01.061+01:00 DEBUG 3816 --- [payment-service] [main] o.s.c.openfeign.FeignClientFactoryBean   : Creating a FeignClientFactoryBean.
2025-12-26T15:32:01.098+01:00  INFO 3816 --- [payment-service] [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'NOTIFICATION-SERVICE' URL not provided. Will try picking an instance via load-balancing.
2025-12-26T15:32:01.143+01:00  INFO 3816 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ”— Initialisation de la connexion Web3...
2025-12-26T15:32:01.144+01:00  INFO 3816 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ“¡ Endpoint Infura: https://sepolia.infura.io/v3/****
2025-12-26T15:32:03.605+01:00  INFO 3816 --- [payment-service] [main] c.r.payment.service.BlockchainService    : âœ… ConnectÃ© au rÃ©seau Ethereum: reth/v1.9.1-3afe69a/aarch64-unknown-linux-gnu
2025-12-26T15:32:03.606+01:00  INFO 3816 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ“ Adresse du wallet: 0x34f528b671cf1c31c2f579eef593ba537d63f1fd
2025-12-26T15:32:03.767+01:00 DEBUG 3816 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ’° Solde de 0x34f528b671cf1c31c2f579eef593ba537d63f1fd: 0.084995631841690974 ETH
2025-12-26T15:32:03.767+01:00  INFO 3816 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ’° Solde wallet admin: 0.084995631841690974 ETH
2025-12-26T15:32:04.743+01:00  INFO 3816 --- [payment-service] [main] c.rental.payment.service.PaymentService  : âœ… PaymentService initialisÃ© avec @Lazy sur RabbitMQService
2025-12-26T15:32:04.842+01:00  INFO 3816 --- [payment-service] [main] com.rental.payment.config.Web3Config     : ðŸ”— Initialisation de la connexion Web3j...
2025-12-26T15:32:04.842+01:00  INFO 3816 --- [payment-service] [main] com.rental.payment.config.Web3Config     : ðŸ“ Endpoint Infura: https://sepolia.infura.io/v3/50e3d616c7ae4bb4bb5d48d97ab6d5a8
2025-12-26T15:32:05.753+01:00  INFO 3816 --- [payment-service] [main] com.rental.payment.config.Web3Config     : âœ… ConnectÃ© au rÃ©seau Ethereum: reth/v1.9.1-3afe69a/aarch64-unknown-linux-gnu
2025-12-26T15:32:05.770+01:00  INFO 3816 --- [payment-service] [main] com.rental.payment.config.Web3Config     : ðŸ”‘ Chargement des credentials du wallet...
2025-12-26T15:32:05.774+01:00  INFO 3816 --- [payment-service] [main] com.rental.payment.config.Web3Config     : ðŸ“ Adresse du wallet: 0x34f528b671cf1c31c2f579eef593ba537d63f1fd
2025-12-26T15:32:05.777+01:00  INFO 3816 --- [payment-service] [main] com.rental.payment.config.Web3Config     : â›½ Configuration Gas Provider - Price: 20 Gwei, Limit: 500000
2025-12-26T15:32:07.293+01:00  WARN 3816 --- [payment-service] [main] o.s.r.backoff.ExponentialBackOffPolicy   : Multiplier must be > 1.0 for effective exponential backoff, but was 1.0
2025-12-26T15:32:08.378+01:00  INFO 3816 --- [payment-service] [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2025-12-26T15:32:08.518+01:00  WARN 3816 --- [payment-service] [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-12-26T15:32:08.563+01:00  INFO 3816 --- [payment-service] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 4 endpoints beneath base path '/actuator'
2025-12-26T15:32:08.819+01:00  INFO 3816 --- [payment-service] [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2025-12-26T15:32:08.869+01:00  INFO 3816 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2025-12-26T15:32:08.875+01:00  INFO 3816 --- [payment-service] [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T15:32:08.895+01:00  INFO 3816 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2025-12-26T15:32:08.895+01:00  INFO 3816 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2025-12-26T15:32:08.896+01:00  INFO 3816 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2025-12-26T15:32:08.896+01:00  INFO 3816 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2025-12-26T15:32:08.896+01:00  INFO 3816 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2025-12-26T15:32:08.896+01:00  INFO 3816 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2025-12-26T15:32:08.897+01:00  INFO 3816 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2025-12-26T15:32:09.625+01:00  INFO 3816 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2025-12-26T15:32:09.629+01:00  INFO 3816 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2025-12-26T15:32:09.633+01:00  INFO 3816 --- [payment-service] [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-12-26T15:32:09.638+01:00  INFO 3816 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1766759529636 with initial instances count: 0
2025-12-26T15:32:09.660+01:00  INFO 3816 --- [payment-service] [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application PAYMENT-SERVICE with eureka with status UP
2025-12-26T15:32:09.662+01:00  INFO 3816 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1766759529661, current=UP, previous=STARTING]
2025-12-26T15:32:09.664+01:00  INFO 3816 --- [payment-service] [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_PAYMENT-SERVICE/payment-service:8084: registering service...
2025-12-26T15:32:09.699+01:00  INFO 3816 --- [payment-service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8084 (http) with context path '/'
2025-12-26T15:32:09.700+01:00  INFO 3816 --- [payment-service] [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 8084
2025-12-26T15:32:09.715+01:00  INFO 3816 --- [payment-service] [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [localhost:5672]
2025-12-26T15:32:09.814+01:00  INFO 3816 --- [payment-service] [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#3ed3f72a:0/SimpleConnection@39e89471 [delegate=amqp://admin@127.0.0.1:5672/, localPort=65360]
2025-12-26T15:32:09.916+01:00  INFO 3816 --- [payment-service] [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_PAYMENT-SERVICE/payment-service:8084 - registration status: 204
2025-12-26T15:32:10.096+01:00  INFO 3816 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : Started PaymentServiceApplication in 18.636 seconds (process running for 19.516)
2025-12-26T15:32:39.636+01:00  INFO 3816 --- [payment-service] [DiscoveryClient-CacheRefreshExecutor-%d] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2025-12-26T15:32:39.636+01:00  INFO 3816 --- [payment-service] [DiscoveryClient-CacheRefreshExecutor-%d] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2025-12-26T15:32:39.636+01:00  INFO 3816 --- [payment-service] [DiscoveryClient-CacheRefreshExecutor-%d] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2025-12-26T15:32:39.636+01:00  INFO 3816 --- [payment-service] [DiscoveryClient-CacheRefreshExecutor-%d] com.netflix.discovery.DiscoveryClient    : Application is null : false
2025-12-26T15:32:39.636+01:00  INFO 3816 --- [payment-service] [DiscoveryClient-CacheRefreshExecutor-%d] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2025-12-26T15:32:39.636+01:00  INFO 3816 --- [payment-service] [DiscoveryClient-CacheRefreshExecutor-%d] com.netflix.discovery.DiscoveryClient    : Application version is -1: false
2025-12-26T15:32:39.636+01:00  INFO 3816 --- [payment-service] [DiscoveryClient-CacheRefreshExecutor-%d] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2025-12-26T15:32:39.675+01:00  INFO 3816 --- [payment-service] [DiscoveryClient-CacheRefreshExecutor-%d] com.netflix.discovery.DiscoveryClient    : The response status is 200
2025-12-26T15:36:24.733+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26T15:36:24.734+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-26T15:36:24.736+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-12-26T15:36:31.162+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-3] c.r.p.controller.PaymentController       : ðŸ“œ RÃ©cupÃ©ration des paiements pour rÃ©servation #4
2025-12-26T15:36:35.375+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.controller.PaymentController       : ðŸ“œ RÃ©cupÃ©ration des paiements pour rÃ©servation #10
2025-12-26T15:36:38.965+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“œ RÃ©cupÃ©ration des paiements pour rÃ©servation #1
2025-12-26T15:37:08.901+01:00  INFO 3816 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T15:42:08.908+01:00  INFO 3816 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T15:47:08.919+01:00  INFO 3816 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T15:52:08.924+01:00  INFO 3816 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T15:57:08.937+01:00  INFO 3816 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T16:02:08.939+01:00  INFO 3816 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T16:07:08.949+01:00  INFO 3816 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T16:12:08.956+01:00  INFO 3816 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T16:13:34.891+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ“œ RÃ©cupÃ©ration notifications pour rÃ©servation #1
2025-12-26T16:13:34.989+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ“Š Transactions trouvÃ©es pour rÃ©servation #1: 7
2025-12-26T16:13:34.994+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T16:13:35.012+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: e4182790-82e2-4155-a952-38ed177fc94d
2025-12-26T16:13:35.032+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> GET http://booking-service/bookings/1 HTTP/1.1
2025-12-26T16:13:35.032+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept: application/json
2025-12-26T16:13:35.032+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept-Encoding: gzip, deflate
2025-12-26T16:13:35.032+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Content-Type: application/json
2025-12-26T16:13:35.032+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Correlation-ID: e4182790-82e2-4155-a952-38ed177fc94d
2025-12-26T16:13:35.032+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Name: payment-service
2025-12-26T16:13:35.032+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Version: 1.0
2025-12-26T16:13:35.032+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> END HTTP (0-byte body)
2025-12-26T16:13:35.364+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T16:13:35.447+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@3794b143 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6d1b2fbb]
2025-12-26T16:13:35.447+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@3794b143 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6d1b2fbb]
2025-12-26T16:13:36.312+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- HTTP/1.1 200 (1272ms)
2025-12-26T16:13:36.312+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] cache-control: no-cache, no-store, max-age=0, must-revalidate
2025-12-26T16:13:36.312+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] connection: keep-alive
2025-12-26T16:13:36.312+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] content-type: application/json
2025-12-26T16:13:36.312+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] date: Fri, 26 Dec 2025 15:13:36 GMT
2025-12-26T16:13:36.312+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] expires: 0
2025-12-26T16:13:36.313+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] keep-alive: timeout=60
2025-12-26T16:13:36.313+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] pragma: no-cache
2025-12-26T16:13:36.313+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] transfer-encoding: chunked
2025-12-26T16:13:36.313+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Origin
2025-12-26T16:13:36.313+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Method
2025-12-26T16:13:36.313+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Headers
2025-12-26T16:13:36.313+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-content-type-options: nosniff
2025-12-26T16:13:36.313+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-frame-options: DENY
2025-12-26T16:13:36.313+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-xss-protection: 0
2025-12-26T16:13:36.313+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] 
2025-12-26T16:13:36.318+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] {"blockchainTxHash":null,"cancelledAt":null,"checkInDate":"2025-01-15T15:00:00","checkOutDate":"2025-01-20T12:00:00","createdAt":"2025-12-24T23:08:06","escrowReleaseTxHash":null,"escrowReleased":false,"id":1,"numGuests":null,"priceBreakdown":{"lockedPricePerNight":null,"baseAmount":450.0,"discountAmount":null,"cleaningFee":null,"petFee":null,"serviceFee":null,"totalAmount":500.0,"platformFeePercentage":null},"propertyId":1,"status":"COMPLETED","totalNights":null,"userId":1,"versionId":null}
2025-12-26T16:13:36.318+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- END HTTP (495-byte body)
2025-12-26T16:13:36.333+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : âœ… UserId 1 trouvÃ© pour rÃ©servation #1
2025-12-26T16:13:36.333+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ“Š UserId rÃ©cupÃ©rÃ©: 1
2025-12-26T16:13:36.333+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ“Š Utilisation de userId: 1
2025-12-26T16:13:36.357+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“§ RÃ©cupÃ©ration des notifications pour l'utilisateur #1
2025-12-26T16:13:36.358+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T16:13:36.359+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 150d45ca-c506-4523-9cbf-3bb3f4742201
2025-12-26T16:13:36.359+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] ---> GET http://NOTIFICATION-SERVICE/api/notifications/user/1 HTTP/1.1
2025-12-26T16:13:36.359+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Accept: application/json
2025-12-26T16:13:36.359+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Accept-Encoding: gzip, deflate
2025-12-26T16:13:36.359+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Content-Type: application/json
2025-12-26T16:13:36.359+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Correlation-ID: 150d45ca-c506-4523-9cbf-3bb3f4742201
2025-12-26T16:13:36.359+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Service-Name: payment-service
2025-12-26T16:13:36.359+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Service-Version: 1.0
2025-12-26T16:13:36.359+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] ---> END HTTP (0-byte body)
2025-12-26T16:13:36.396+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T16:13:36.396+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@7f731792 instance = InstanceInfo [instanceId = notification-service:c0d0e2b241aed3ba78c34595d446c118, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@51608bc8]
2025-12-26T16:13:36.402+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@7f731792 instance = InstanceInfo [instanceId = notification-service:c0d0e2b241aed3ba78c34595d446c118, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@51608bc8]
2025-12-26T16:13:37.638+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] <--- HTTP/1.1 200 (1277ms)
2025-12-26T16:13:37.638+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] connection: keep-alive
2025-12-26T16:13:37.638+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] content-type: application/json
2025-12-26T16:13:37.638+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] date: Fri, 26 Dec 2025 15:13:37 GMT
2025-12-26T16:13:37.638+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] keep-alive: timeout=60
2025-12-26T16:13:37.638+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] transfer-encoding: chunked
2025-12-26T16:13:37.638+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] 
2025-12-26T16:13:37.648+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] [{"id":7,"userId":1,"reservationId":1,"notificationType":"PAYMENT_RECEIVED","title":"Test Payment","message":"Test de notification","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-26T13:09:25"},{"id":6,"userId":1,"reservationId":1,"notificationType":"PAYMENT_RECEIVED","title":"Paiement reÃ§u","message":"Votre paiement de 0.25 ETH a Ã©tÃ© reÃ§u et est en traitement","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-25T21:10:54"},{"id":5,"userId":1,"reservationId":1,"notificationType":"PAYMENT_RECEIVED","title":"Paiement reÃ§u","message":"Paiement crÃ©Ã© via API","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-25T15:51:36"},{"id":4,"userId":1,"reservationId":1,"notificationType":"CHECK_IN_REMINDER","title":"Rappel check-in","message":"Noubliez pas votre check-in demain","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-25T15:13:02"},{"id":3,"userId":1,"reservationId":1,"notificationType":"MESSAGE_RECEIVED","title":"Nouveau message","message":"Vous avez reÃ§u un nouveau message du propriÃ©taire","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-25T15:12:16"},{"id":2,"userId":1,"reservationId":1,"notificationType":"BOOKING_CONFIRMATION","title":"RÃ©servation confirmÃ©e","message":"Votre rÃ©servation #1 a Ã©tÃ© crÃ©Ã©e avec succÃ¨s","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-25T15:11:56"}]
2025-12-26T16:13:37.649+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] <--- END HTTP (1472-byte body)
2025-12-26T16:13:37.653+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“Š Type de rÃ©ponse reÃ§ue: java.util.ArrayList
2025-12-26T16:13:37.654+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“Š Valeur de rÃ©ponse: [{id=7, userId=1, reservationId=1, notificationType=PAYMENT_RECEIVED, title=Test Payment, message=Test de notification, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-26T13:09:25}, {id=6, userId=1, reservationId=1, notificationType=PAYMENT_RECEIVED, title=Paiement reÃ§u, message=Votre paiement de 0.25 ETH a Ã©tÃ© reÃ§u et est en traitement, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-25T21:10:54}, {id=5, userId=1, reservationId=1, notificationType=PAYMENT_RECEIVED, title=Paiement reÃ§u, message=Paiement crÃ©Ã© via API, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-25T15:51:36}, {id=4, userId=1, reservationId=1, notificationType=CHECK_IN_REMINDER, title=Rappel check-in, message=Noubliez pas votre check-in demain, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-25T15:13:02}, {id=3, userId=1, reservationId=1, notificationType=MESSAGE_RECEIVED, title=Nouveau message, message=Vous avez reÃ§u un nouveau message du propriÃ©taire, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-25T15:12:16}, {id=2, userId=1, reservationId=1, notificationType=BOOKING_CONFIRMATION, title=RÃ©servation confirmÃ©e, message=Votre rÃ©servation #1 a Ã©tÃ© crÃ©Ã©e avec succÃ¨s, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-25T15:11:56}]
2025-12-26T16:13:37.655+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“Š Taille de la liste: 6
2025-12-26T16:13:37.655+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“Š Premier Ã©lÃ©ment type: java.util.LinkedHashMap
2025-12-26T16:13:37.655+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“Š Premier Ã©lÃ©ment: {id=7, userId=1, reservationId=1, notificationType=PAYMENT_RECEIVED, title=Test Payment, message=Test de notification, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-26T13:09:25}
2025-12-26T16:13:37.656+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.s.ExternalServiceOrchestrator      : âœ… Conversion directe rÃ©ussie
2025-12-26T16:13:37.656+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ“Š Notifications rÃ©cupÃ©rÃ©es (total): 6
2025-12-26T16:13:37.656+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ“Š Notification - notificationType: PAYMENT_RECEIVED, reservationId: 1
2025-12-26T16:13:37.656+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ“Š Notification - notificationType: PAYMENT_RECEIVED, reservationId: 1
2025-12-26T16:13:37.656+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ“Š Notification - notificationType: PAYMENT_RECEIVED, reservationId: 1
2025-12-26T16:13:37.656+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ“Š Notification - notificationType: CHECK_IN_REMINDER, reservationId: 1
2025-12-26T16:13:37.656+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ“Š Notification - notificationType: MESSAGE_RECEIVED, reservationId: 1
2025-12-26T16:13:37.657+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ“Š Notification - notificationType: BOOKING_CONFIRMATION, reservationId: 1
2025-12-26T16:13:37.659+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ“Š Notifications pour rÃ©servation #1: 6
2025-12-26T16:13:37.660+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ“Š Notifications filtrÃ©es par type: 6
2025-12-26T16:14:05.086+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-9] c.r.p.controller.PaymentController       : ðŸ“Š RÃ©cupÃ©ration du statut pour rÃ©servation #1
2025-12-26T16:15:58.760+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.controller.PaymentController       : ðŸ“§ Envoi notification de paiement pour utilisateur #1
2025-12-26T16:15:58.766+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“§ Envoi de notification Ã  l'utilisateur #1 - Type: PAYMENT_RECEIVED
2025-12-26T16:15:58.772+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 47cd9d8a-92ff-4f82-917b-2ffff9541ea4
2025-12-26T16:15:58.772+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] ---> POST http://NOTIFICATION-SERVICE/api/notifications HTTP/1.1
2025-12-26T16:15:58.772+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Accept: application/json
2025-12-26T16:15:58.772+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Accept-Encoding: gzip, deflate
2025-12-26T16:15:58.772+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Content-Length: 239
2025-12-26T16:15:58.772+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Content-Type: application/json
2025-12-26T16:15:58.772+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] X-Correlation-ID: 47cd9d8a-92ff-4f82-917b-2ffff9541ea4
2025-12-26T16:15:58.772+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] X-Service-Name: payment-service
2025-12-26T16:15:58.772+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] X-Service-Version: 1.0
2025-12-26T16:15:58.772+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] 
2025-12-26T16:15:58.772+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] {
  "userId" : 1,
  "notificationType" : "PAYMENT_RECEIVED",
  "message" : "Ceci est un test de notification",
  "reservationId" : 123,
  "title" : "Test Notification",
  "data" : {
    "amount" : 1.5,
    "status" : "TEST"
  }
}
2025-12-26T16:15:58.772+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] ---> END HTTP (239-byte body)
2025-12-26T16:15:58.772+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T16:15:58.776+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@62a6137e instance = InstanceInfo [instanceId = notification-service:c0d0e2b241aed3ba78c34595d446c118, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@51608bc8]
2025-12-26T16:15:58.776+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@62a6137e instance = InstanceInfo [instanceId = notification-service:c0d0e2b241aed3ba78c34595d446c118, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@51608bc8]
2025-12-26T16:15:59.070+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] <--- HTTP/1.1 201 (295ms)
2025-12-26T16:15:59.070+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] connection: keep-alive
2025-12-26T16:15:59.071+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] content-type: application/json
2025-12-26T16:15:59.071+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] date: Fri, 26 Dec 2025 15:15:59 GMT
2025-12-26T16:15:59.071+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] keep-alive: timeout=60
2025-12-26T16:15:59.071+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] transfer-encoding: chunked
2025-12-26T16:15:59.071+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] 
2025-12-26T16:15:59.071+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] {"id":8,"userId":1,"reservationId":123,"notificationType":"PAYMENT_RECEIVED","title":"Test Notification","message":"Ceci est un test de notification","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-26T16:15:58.9860768"}
2025-12-26T16:15:59.072+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] <--- END HTTP (247-byte body)
2025-12-26T16:15:59.072+01:00  WARN 3816 --- [payment-service] [http-nio-8084-exec-2] c.r.p.s.ExternalServiceOrchestrator      : âš ï¸ Ã‰chec de l'envoi de notification - RÃ©ponse: {id=8, userId=1, reservationId=123, notificationType=PAYMENT_RECEIVED, title=Test Notification, message=Ceci est un test de notification, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-26T16:15:58.9860768}
2025-12-26T16:16:51.523+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.controller.PaymentController       : ðŸ©º VÃ©rification santÃ© blockchain
2025-12-26T16:16:51.523+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.s.ExternalServiceOrchestrator      : ðŸ©º VÃ©rification de la santÃ© du service blockchain
2025-12-26T16:16:51.523+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: fc25a2e1-3444-4589-8d9b-07e53ccff478
2025-12-26T16:16:51.523+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> GET http://BLOCKCHAIN-SERVICE/api/blockchain/health HTTP/1.1
2025-12-26T16:16:51.533+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept: application/json
2025-12-26T16:16:51.533+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept-Encoding: gzip, deflate
2025-12-26T16:16:51.533+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Content-Type: application/json
2025-12-26T16:16:51.533+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Correlation-ID: fc25a2e1-3444-4589-8d9b-07e53ccff478
2025-12-26T16:16:51.533+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Name: payment-service
2025-12-26T16:16:51.533+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Version: 1.0
2025-12-26T16:16:51.533+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> END HTTP (0-byte body)
2025-12-26T16:16:51.563+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T16:16:51.563+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@75a1abf7 instance = InstanceInfo [instanceId = blockchain-service:f006bbfacd2ead6fefb009a5f7a5b9b7, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@1dd475f7]
2025-12-26T16:16:51.563+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@75a1abf7 instance = InstanceInfo [instanceId = blockchain-service:f006bbfacd2ead6fefb009a5f7a5b9b7, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@1dd475f7]
2025-12-26T16:16:51.797+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- HTTP/1.1 200 (263ms)
2025-12-26T16:16:51.798+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] connection: keep-alive
2025-12-26T16:16:51.798+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] content-type: application/json
2025-12-26T16:16:51.798+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] date: Fri, 26 Dec 2025 15:16:51 GMT
2025-12-26T16:16:51.798+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] keep-alive: timeout=60
2025-12-26T16:16:51.798+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] transfer-encoding: chunked
2025-12-26T16:16:51.798+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Origin
2025-12-26T16:16:51.798+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Method
2025-12-26T16:16:51.798+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Headers
2025-12-26T16:16:51.798+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] 
2025-12-26T16:16:51.800+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] {"status":"UP","message":"Blockchain Service is running","contractAddress":"0x23470CA6C42Fe32E3E48b85999123cC28a57Ca94","network":"sepolia","currentBlock":9918904,"adminWallet":"0x34f528b671cf1c31c2f579eef593ba537d63f1fd"}
2025-12-26T16:16:51.800+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- END HTTP (222-byte body)
2025-12-26T16:16:51.800+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-5] c.r.p.s.ExternalServiceOrchestrator      : âœ… Service blockchain en bonne santÃ©
2025-12-26T16:17:08.966+01:00  INFO 3816 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T16:17:49.630+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ”“ Demande de libÃ©ration d'escrow pour rÃ©servation #1
2025-12-26T16:17:49.657+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-6] c.rental.payment.service.PaymentService  : ðŸ”“ LibÃ©ration d'escrow pour rÃ©servation #1
2025-12-26T16:17:49.667+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T16:17:49.667+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 3a4180b3-e7e5-4c18-b6ef-51667ef33684
2025-12-26T16:17:49.667+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> GET http://booking-service/bookings/1 HTTP/1.1
2025-12-26T16:17:49.667+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept: application/json
2025-12-26T16:17:49.667+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept-Encoding: gzip, deflate
2025-12-26T16:17:49.667+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Content-Type: application/json
2025-12-26T16:17:49.667+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Correlation-ID: 3a4180b3-e7e5-4c18-b6ef-51667ef33684
2025-12-26T16:17:49.667+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Name: payment-service
2025-12-26T16:17:49.667+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Version: 1.0
2025-12-26T16:17:49.670+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> END HTTP (0-byte body)
2025-12-26T16:17:49.670+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T16:17:49.671+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@421838e8 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6d1b2fbb]
2025-12-26T16:17:49.671+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@421838e8 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6d1b2fbb]
2025-12-26T16:17:49.690+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- HTTP/1.1 200 (20ms)
2025-12-26T16:17:49.690+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] cache-control: no-cache, no-store, max-age=0, must-revalidate
2025-12-26T16:17:49.690+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] connection: keep-alive
2025-12-26T16:17:49.690+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] content-type: application/json
2025-12-26T16:17:49.690+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] date: Fri, 26 Dec 2025 15:17:49 GMT
2025-12-26T16:17:49.690+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] expires: 0
2025-12-26T16:17:49.690+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] keep-alive: timeout=60
2025-12-26T16:17:49.690+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] pragma: no-cache
2025-12-26T16:17:49.690+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] transfer-encoding: chunked
2025-12-26T16:17:49.690+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Origin
2025-12-26T16:17:49.690+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Method
2025-12-26T16:17:49.690+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Headers
2025-12-26T16:17:49.690+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-content-type-options: nosniff
2025-12-26T16:17:49.690+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-frame-options: DENY
2025-12-26T16:17:49.690+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-xss-protection: 0
2025-12-26T16:17:49.690+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] 
2025-12-26T16:17:49.690+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] {"blockchainTxHash":null,"cancelledAt":null,"checkInDate":"2025-01-15T15:00:00","checkOutDate":"2025-01-20T12:00:00","createdAt":"2025-12-24T23:08:06","escrowReleaseTxHash":null,"escrowReleased":false,"id":1,"numGuests":null,"priceBreakdown":{"lockedPricePerNight":null,"baseAmount":450.0,"discountAmount":null,"cleaningFee":null,"petFee":null,"serviceFee":null,"totalAmount":500.0,"platformFeePercentage":null},"propertyId":1,"status":"COMPLETED","totalNights":null,"userId":1,"versionId":null}
2025-12-26T16:17:49.690+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- END HTTP (495-byte body)
2025-12-26T16:17:49.690+01:00  INFO 3816 --- [payment-service] [http-nio-8084-exec-6] c.rental.payment.service.PaymentService  : ðŸ”‘ Utilisation de la clÃ© admin pour libÃ©ration escrow
2025-12-26T16:17:49.693+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T16:17:49.693+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 99d764b4-8664-468e-90c0-704c410cf5fc
2025-12-26T16:17:49.693+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] ---> POST http://BLOCKCHAIN-SERVICE/api/blockchain/bookings/1/checkout HTTP/1.1
2025-12-26T16:17:49.693+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] Accept: application/json
2025-12-26T16:17:49.693+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] Accept-Encoding: gzip, deflate
2025-12-26T16:17:49.693+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] Content-Length: 99
2025-12-26T16:17:49.693+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] Content-Type: application/json
2025-12-26T16:17:49.693+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] X-Correlation-ID: 99d764b4-8664-468e-90c0-704c410cf5fc
2025-12-26T16:17:49.693+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] X-Service-Name: payment-service
2025-12-26T16:17:49.693+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] X-Service-Version: 1.0
2025-12-26T16:17:49.693+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] 
2025-12-26T16:17:49.693+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] {
  "userWalletPrivateKey" : "95f943fbd16b6288242988cc02a48e9519fe37a71f989bde1687e7c471ea214f"
}
2025-12-26T16:17:49.693+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] ---> END HTTP (99-byte body)
2025-12-26T16:17:49.693+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T16:17:49.693+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@7124b954 instance = InstanceInfo [instanceId = blockchain-service:f006bbfacd2ead6fefb009a5f7a5b9b7, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@1dd475f7]
2025-12-26T16:17:49.693+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@7124b954 instance = InstanceInfo [instanceId = blockchain-service:f006bbfacd2ead6fefb009a5f7a5b9b7, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@1dd475f7]
2025-12-26T16:18:13.211+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] <--- HTTP/1.1 500 (23515ms)
2025-12-26T16:18:13.211+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] connection: close
2025-12-26T16:18:13.211+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] content-type: application/json
2025-12-26T16:18:13.212+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] date: Fri, 26 Dec 2025 15:18:13 GMT
2025-12-26T16:18:13.212+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] transfer-encoding: chunked
2025-12-26T16:18:13.212+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] vary: Origin
2025-12-26T16:18:13.212+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] vary: Access-Control-Request-Method
2025-12-26T16:18:13.212+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] vary: Access-Control-Request-Headers
2025-12-26T16:18:13.212+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] 
2025-12-26T16:18:13.212+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] {"success":false,"message":"Erreur blockchain","blockchainBookingId":null,"txHash":null,"blockNumber":null,"etherscanLink":null,"error":"Transaction 0x8cdb4fdd0ba1394fb53fc32c8f48118491e5a44e68c795b8b3874c48734a696a has failed with status: 0x0. Gas used: 28285. Revert reason: 'execution reverted: Statut de reservation invalide'."}
2025-12-26T16:18:13.212+01:00 DEBUG 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] <--- END HTTP (332-byte body)
2025-12-26T16:18:13.213+01:00 ERROR 3816 --- [payment-service] [http-nio-8084-exec-6] com.rental.payment.config.FeignConfig    : âŒ Feign Client Error: Feign Error - Method: BlockchainServiceClient#releaseEscrow(Long,Map), Status: 500, Reason: null
2025-12-26T16:18:13.213+01:00 ERROR 3816 --- [payment-service] [http-nio-8084-exec-6] c.rental.payment.service.PaymentService  : âŒ Erreur libÃ©ration escrow: Internal Server Error: Feign Error - Method: BlockchainServiceClient#releaseEscrow(Long,Map), Status: 500, Reason: null

java.lang.RuntimeException: Internal Server Error: Feign Error - Method: BlockchainServiceClient#releaseEscrow(Long,Map), Status: 500, Reason: null
	at com.rental.payment.config.FeignConfig.lambda$errorDecoder$0(FeignConfig.java:75) ~[classes/:na]
	at feign.InvocationContext.decodeError(InvocationContext.java:133) ~[feign-core-13.6.jar:na]
	at feign.InvocationContext.proceed(InvocationContext.java:80) ~[feign-core-13.6.jar:na]
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:69) ~[feign-core-13.6.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:109) ~[feign-core-13.6.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:53) ~[feign-core-13.6.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:104) ~[feign-core-13.6.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy172.releaseEscrow(Unknown Source) ~[na:na]
	at com.rental.payment.service.PaymentService.releaseEscrow(PaymentService.java:99) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.14.jar:6.2.14]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.14.jar:6.2.14]
	at com.rental.payment.service.PaymentService$$SpringCGLIB$$1.releaseEscrow(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:724) ~[spring-aop-6.2.14.jar:6.2.14]
	at com.rental.payment.service.PaymentService$$SpringCGLIB$$0.releaseEscrow(<generated>) ~[classes/:na]
	at com.rental.payment.controller.PaymentController.releaseEscrow(PaymentController.java:95) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at java.base/java.lang.Thread.run(Thread.java:1474) ~[na:na]

2025-12-26T16:18:13.240+01:00 ERROR 3816 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : âŒ Erreur libÃ©ration escrow: Ã‰chec technique: Internal Server Error: Feign Error - Method: BlockchainServiceClient#releaseEscrow(Long,Map), Status: 500, Reason: null
2025-12-26T16:22:08.981+01:00  INFO 3816 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T16:24:41.040+01:00  INFO 26528 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : Starting PaymentServiceApplication using Java 25.0.1 with PID 26528 (C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes started by Lenovo in C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service)
2025-12-26T16:24:41.043+01:00 DEBUG 26528 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : Running with Spring Boot v3.5.8, Spring v6.2.14
2025-12-26T16:24:41.044+01:00  INFO 26528 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : No active profile set, falling back to 1 default profile: "default"
2025-12-26T16:24:42.374+01:00 DEBUG 26528 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\BlockchainServiceClient.class]
2025-12-26T16:24:42.375+01:00 DEBUG 26528 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\BookingServiceClient.class]
2025-12-26T16:24:42.375+01:00 DEBUG 26528 --- [payment-service] [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [C:\Users\Lenovo\Desktop\projet_JEE\JEE-Project\payment-service\target\classes\com\rental\payment\client\NotificationServiceClient.class]
2025-12-26T16:24:42.914+01:00  INFO 26528 --- [payment-service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-12-26T16:24:43.109+01:00  INFO 26528 --- [payment-service] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 181 ms. Found 1 JPA repository interface.
2025-12-26T16:24:43.492+01:00  INFO 26528 --- [payment-service] [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=8a20e800-fe95-340a-866b-3856ca3f0074
2025-12-26T16:24:44.457+01:00  INFO 26528 --- [payment-service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8084 (http)
2025-12-26T16:24:44.483+01:00  INFO 26528 --- [payment-service] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-12-26T16:24:44.484+01:00  INFO 26528 --- [payment-service] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2025-12-26T16:24:44.589+01:00  INFO 26528 --- [payment-service] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-12-26T16:24:44.591+01:00  INFO 26528 --- [payment-service] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3474 ms
2025-12-26T16:24:45.163+01:00  INFO 26528 --- [payment-service] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-12-26T16:24:45.262+01:00  INFO 26528 --- [payment-service] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.36.Final
2025-12-26T16:24:45.309+01:00  INFO 26528 --- [payment-service] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-12-26T16:24:45.676+01:00  INFO 26528 --- [payment-service] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-12-26T16:24:45.719+01:00  INFO 26528 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-12-26T16:24:45.958+01:00  INFO 26528 --- [payment-service] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3f31892e
2025-12-26T16:24:45.963+01:00  INFO 26528 --- [payment-service] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-12-26T16:24:46.006+01:00  WARN 26528 --- [payment-service] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-12-26T16:24:46.008+01:00  WARN 26528 --- [payment-service] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-12-26T16:24:46.050+01:00  INFO 26528 --- [payment-service] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-12-26T16:24:47.239+01:00  INFO 26528 --- [payment-service] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-12-26T16:24:47.498+01:00  INFO 26528 --- [payment-service] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-12-26T16:24:47.554+01:00  INFO 26528 --- [payment-service] [main] com.rental.payment.config.Web3Config     : âœ… Web3 Configuration initialisÃ©e
2025-12-26T16:24:47.555+01:00  INFO 26528 --- [payment-service] [main] com.rental.payment.config.Web3Config     : ðŸ“ Contract Address: 0x4c5556c7bb47c8cadb5417af494AaE7792AF14d
2025-12-26T16:24:47.578+01:00 DEBUG 26528 --- [payment-service] [main] o.s.c.openfeign.FeignClientFactoryBean   : Creating a FeignClientFactoryBean.
2025-12-26T16:24:47.741+01:00  WARN 26528 --- [payment-service] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-12-26T16:24:47.929+01:00  INFO 26528 --- [payment-service] [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'BLOCKCHAIN-SERVICE' URL not provided. Will try picking an instance via load-balancing.
2025-12-26T16:24:48.011+01:00 DEBUG 26528 --- [payment-service] [main] o.s.c.openfeign.FeignClientFactoryBean   : Creating a FeignClientFactoryBean.
2025-12-26T16:24:48.040+01:00  INFO 26528 --- [payment-service] [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'booking-service' URL not provided. Will try picking an instance via load-balancing.
2025-12-26T16:24:48.054+01:00 DEBUG 26528 --- [payment-service] [main] o.s.c.openfeign.FeignClientFactoryBean   : Creating a FeignClientFactoryBean.
2025-12-26T16:24:48.083+01:00  INFO 26528 --- [payment-service] [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'NOTIFICATION-SERVICE' URL not provided. Will try picking an instance via load-balancing.
2025-12-26T16:24:48.115+01:00  INFO 26528 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ”— Initialisation de la connexion Web3...
2025-12-26T16:24:48.115+01:00  INFO 26528 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ“¡ Endpoint Infura: https://sepolia.infura.io/v3/****
2025-12-26T16:24:49.920+01:00  INFO 26528 --- [payment-service] [main] c.r.payment.service.BlockchainService    : âœ… ConnectÃ© au rÃ©seau Ethereum: reth/v1.9.1-3afe69a/aarch64-unknown-linux-gnu
2025-12-26T16:24:49.920+01:00  INFO 26528 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ“ Adresse du wallet: 0x34f528b671cf1c31c2f579eef593ba537d63f1fd
2025-12-26T16:24:50.098+01:00 DEBUG 26528 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ’° Solde de 0x34f528b671cf1c31c2f579eef593ba537d63f1fd: 0.066456351841690974 ETH
2025-12-26T16:24:50.099+01:00  INFO 26528 --- [payment-service] [main] c.r.payment.service.BlockchainService    : ðŸ’° Solde wallet admin: 0.066456351841690974 ETH
2025-12-26T16:24:50.766+01:00  INFO 26528 --- [payment-service] [main] c.rental.payment.service.PaymentService  : âœ… PaymentService initialisÃ© avec @Lazy sur RabbitMQService
2025-12-26T16:24:50.847+01:00  INFO 26528 --- [payment-service] [main] com.rental.payment.config.Web3Config     : ðŸ”— Initialisation de la connexion Web3j...
2025-12-26T16:24:50.848+01:00  INFO 26528 --- [payment-service] [main] com.rental.payment.config.Web3Config     : ðŸ“ Endpoint Infura: https://sepolia.infura.io/v3/50e3d616c7ae4bb4bb5d48d97ab6d5a8
2025-12-26T16:24:51.747+01:00  INFO 26528 --- [payment-service] [main] com.rental.payment.config.Web3Config     : âœ… ConnectÃ© au rÃ©seau Ethereum: reth/v1.9.1-3afe69a/aarch64-unknown-linux-gnu
2025-12-26T16:24:51.767+01:00  INFO 26528 --- [payment-service] [main] com.rental.payment.config.Web3Config     : ðŸ”‘ Chargement des credentials du wallet...
2025-12-26T16:24:51.770+01:00  INFO 26528 --- [payment-service] [main] com.rental.payment.config.Web3Config     : ðŸ“ Adresse du wallet: 0x34f528b671cf1c31c2f579eef593ba537d63f1fd
2025-12-26T16:24:51.774+01:00  INFO 26528 --- [payment-service] [main] com.rental.payment.config.Web3Config     : â›½ Configuration Gas Provider - Price: 20 Gwei, Limit: 500000
2025-12-26T16:24:52.786+01:00  WARN 26528 --- [payment-service] [main] o.s.r.backoff.ExponentialBackOffPolicy   : Multiplier must be > 1.0 for effective exponential backoff, but was 1.0
2025-12-26T16:24:53.517+01:00  INFO 26528 --- [payment-service] [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2025-12-26T16:24:53.607+01:00  WARN 26528 --- [payment-service] [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2025-12-26T16:24:53.668+01:00  INFO 26528 --- [payment-service] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 4 endpoints beneath base path '/actuator'
2025-12-26T16:24:53.819+01:00  INFO 26528 --- [payment-service] [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2025-12-26T16:24:53.852+01:00  INFO 26528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2025-12-26T16:24:53.867+01:00  INFO 26528 --- [payment-service] [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T16:24:53.880+01:00  INFO 26528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2025-12-26T16:24:53.881+01:00  INFO 26528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2025-12-26T16:24:53.881+01:00  INFO 26528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2025-12-26T16:24:53.882+01:00  INFO 26528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2025-12-26T16:24:53.882+01:00  INFO 26528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2025-12-26T16:24:53.882+01:00  INFO 26528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2025-12-26T16:24:53.882+01:00  INFO 26528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2025-12-26T16:24:54.252+01:00  INFO 26528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2025-12-26T16:24:54.254+01:00  INFO 26528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2025-12-26T16:24:54.259+01:00  INFO 26528 --- [payment-service] [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2025-12-26T16:24:54.262+01:00  INFO 26528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1766762694260 with initial instances count: 4
2025-12-26T16:24:54.277+01:00  INFO 26528 --- [payment-service] [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application PAYMENT-SERVICE with eureka with status UP
2025-12-26T16:24:54.278+01:00  INFO 26528 --- [payment-service] [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1766762694278, current=UP, previous=STARTING]
2025-12-26T16:24:54.280+01:00  INFO 26528 --- [payment-service] [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_PAYMENT-SERVICE/payment-service:8084: registering service...
2025-12-26T16:24:54.311+01:00  INFO 26528 --- [payment-service] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8084 (http) with context path '/'
2025-12-26T16:24:54.312+01:00  INFO 26528 --- [payment-service] [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 8084
2025-12-26T16:24:54.331+01:00  INFO 26528 --- [payment-service] [main] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [localhost:5672]
2025-12-26T16:24:54.331+01:00  INFO 26528 --- [payment-service] [DiscoveryClient-InstanceInfoReplicator-%d] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_PAYMENT-SERVICE/payment-service:8084 - registration status: 204
2025-12-26T16:24:54.399+01:00  INFO 26528 --- [payment-service] [main] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#612c4c10:0/SimpleConnection@7613e5b4 [delegate=amqp://admin@127.0.0.1:5672/, localPort=62268]
2025-12-26T16:24:54.620+01:00  INFO 26528 --- [payment-service] [main] c.r.payment.PaymentServiceApplication    : Started PaymentServiceApplication in 14.529 seconds (process running for 15.339)
2025-12-26T16:25:19.324+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-26T16:25:19.324+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-12-26T16:25:19.326+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-12-26T16:25:19.373+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : ðŸ”“ Demande de libÃ©ration d'escrow pour rÃ©servation #1
2025-12-26T16:25:19.383+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.rental.payment.service.PaymentService  : ðŸ”“ LibÃ©ration d'escrow pour rÃ©servation #1
2025-12-26T16:25:19.567+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T16:25:19.570+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 33b0c8c4-515d-4600-b318-01cd5f79da10
2025-12-26T16:25:19.572+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> GET http://booking-service/bookings/1 HTTP/1.1
2025-12-26T16:25:19.572+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept: application/json
2025-12-26T16:25:19.572+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept-Encoding: gzip, deflate
2025-12-26T16:25:19.572+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Content-Type: application/json
2025-12-26T16:25:19.573+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Correlation-ID: 33b0c8c4-515d-4600-b318-01cd5f79da10
2025-12-26T16:25:19.573+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Name: payment-service
2025-12-26T16:25:19.573+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Version: 1.0
2025-12-26T16:25:19.574+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> END HTTP (0-byte body)
2025-12-26T16:25:19.636+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T16:25:19.667+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@213ae6b8 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T16:25:19.667+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@213ae6b8 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T16:25:19.709+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- HTTP/1.1 200 (134ms)
2025-12-26T16:25:19.709+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] cache-control: no-cache, no-store, max-age=0, must-revalidate
2025-12-26T16:25:19.709+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] connection: keep-alive
2025-12-26T16:25:19.709+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] content-type: application/json
2025-12-26T16:25:19.709+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] date: Fri, 26 Dec 2025 15:25:19 GMT
2025-12-26T16:25:19.710+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] expires: 0
2025-12-26T16:25:19.710+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] keep-alive: timeout=60
2025-12-26T16:25:19.710+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] pragma: no-cache
2025-12-26T16:25:19.710+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] transfer-encoding: chunked
2025-12-26T16:25:19.710+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Origin
2025-12-26T16:25:19.710+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Method
2025-12-26T16:25:19.710+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Headers
2025-12-26T16:25:19.711+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-content-type-options: nosniff
2025-12-26T16:25:19.711+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-frame-options: DENY
2025-12-26T16:25:19.711+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-xss-protection: 0
2025-12-26T16:25:19.711+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] 
2025-12-26T16:25:19.713+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] {"blockchainTxHash":null,"cancelledAt":null,"checkInDate":"2025-01-15T15:00:00","checkOutDate":"2025-01-20T12:00:00","createdAt":"2025-12-24T23:08:06","escrowReleaseTxHash":null,"escrowReleased":false,"id":1,"numGuests":null,"priceBreakdown":{"lockedPricePerNight":null,"baseAmount":450.0,"discountAmount":null,"cleaningFee":null,"petFee":null,"serviceFee":null,"totalAmount":500.0,"platformFeePercentage":null},"propertyId":1,"status":"COMPLETED","totalNights":null,"userId":1,"versionId":null}
2025-12-26T16:25:19.713+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- END HTTP (495-byte body)
2025-12-26T16:25:19.717+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.rental.payment.service.PaymentService  : ðŸ”‘ Utilisation de la clÃ© admin pour libÃ©ration escrow
2025-12-26T16:25:19.720+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T16:25:19.721+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: af559be8-2913-4ca6-8a2e-62086f6d791c
2025-12-26T16:25:19.721+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] ---> POST http://BLOCKCHAIN-SERVICE/api/blockchain/bookings/1/release-funds HTTP/1.1
2025-12-26T16:25:19.721+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] Accept: application/json
2025-12-26T16:25:19.721+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] Accept-Encoding: gzip, deflate
2025-12-26T16:25:19.722+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] Content-Length: 99
2025-12-26T16:25:19.722+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] Content-Type: application/json
2025-12-26T16:25:19.722+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] X-Correlation-ID: af559be8-2913-4ca6-8a2e-62086f6d791c
2025-12-26T16:25:19.723+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] X-Service-Name: payment-service
2025-12-26T16:25:19.723+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] X-Service-Version: 1.0
2025-12-26T16:25:19.723+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] 
2025-12-26T16:25:19.723+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] {
  "userWalletPrivateKey" : "95f943fbd16b6288242988cc02a48e9519fe37a71f989bde1687e7c471ea214f"
}
2025-12-26T16:25:19.723+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] ---> END HTTP (99-byte body)
2025-12-26T16:25:19.752+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T16:25:19.755+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@7bf4c058 instance = InstanceInfo [instanceId = blockchain-service:f006bbfacd2ead6fefb009a5f7a5b9b7, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@31fd33d0]
2025-12-26T16:25:19.755+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@7bf4c058 instance = InstanceInfo [instanceId = blockchain-service:f006bbfacd2ead6fefb009a5f7a5b9b7, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@31fd33d0]
2025-12-26T16:25:35.796+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] <--- HTTP/1.1 500 (16072ms)
2025-12-26T16:25:35.797+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] connection: close
2025-12-26T16:25:35.797+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] content-type: application/json
2025-12-26T16:25:35.797+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] date: Fri, 26 Dec 2025 15:25:35 GMT
2025-12-26T16:25:35.797+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] transfer-encoding: chunked
2025-12-26T16:25:35.797+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] vary: Origin
2025-12-26T16:25:35.797+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] vary: Access-Control-Request-Method
2025-12-26T16:25:35.797+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] vary: Access-Control-Request-Headers
2025-12-26T16:25:35.797+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] 
2025-12-26T16:25:35.798+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] {"success":false,"message":"Erreur blockchain","blockchainBookingId":null,"txHash":null,"blockNumber":null,"etherscanLink":null,"error":"Transaction 0x2920642a2c4e78ef144bc9adf457a7ff8ab8052c413b0e2db96994f65f6dc5c9 has failed with status: 0x0. Gas used: 33369. Revert reason: 'execution reverted: Statut de reservation invalide'."}
2025-12-26T16:25:35.798+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#releaseEscrow] <--- END HTTP (332-byte body)
2025-12-26T16:25:35.798+01:00 ERROR 26528 --- [payment-service] [http-nio-8084-exec-1] com.rental.payment.config.FeignConfig    : âŒ Feign Client Error: Feign Error - Method: BlockchainServiceClient#releaseEscrow(Long,Map), Status: 500, Reason: null
2025-12-26T16:25:35.799+01:00 ERROR 26528 --- [payment-service] [http-nio-8084-exec-1] c.rental.payment.service.PaymentService  : âŒ Erreur libÃ©ration escrow: Internal Server Error: Feign Error - Method: BlockchainServiceClient#releaseEscrow(Long,Map), Status: 500, Reason: null

java.lang.RuntimeException: Internal Server Error: Feign Error - Method: BlockchainServiceClient#releaseEscrow(Long,Map), Status: 500, Reason: null
	at com.rental.payment.config.FeignConfig.lambda$errorDecoder$0(FeignConfig.java:75) ~[classes/:na]
	at feign.InvocationContext.decodeError(InvocationContext.java:133) ~[feign-core-13.6.jar:na]
	at feign.InvocationContext.proceed(InvocationContext.java:80) ~[feign-core-13.6.jar:na]
	at feign.ResponseHandler.handleResponse(ResponseHandler.java:69) ~[feign-core-13.6.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:109) ~[feign-core-13.6.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:53) ~[feign-core-13.6.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:104) ~[feign-core-13.6.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy172.releaseEscrow(Unknown Source) ~[na:na]
	at com.rental.payment.service.PaymentService.releaseEscrow(PaymentService.java:99) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.14.jar:6.2.14]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.14.jar:6.2.14]
	at com.rental.payment.service.PaymentService$$SpringCGLIB$$1.releaseEscrow(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:724) ~[spring-aop-6.2.14.jar:6.2.14]
	at com.rental.payment.service.PaymentService$$SpringCGLIB$$0.releaseEscrow(<generated>) ~[classes/:na]
	at com.rental.payment.controller.PaymentController.releaseEscrow(PaymentController.java:95) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at java.base/java.lang.Thread.run(Thread.java:1474) ~[na:na]

2025-12-26T16:25:35.814+01:00 ERROR 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : âŒ Erreur libÃ©ration escrow: Ã‰chec technique: Internal Server Error: Feign Error - Method: BlockchainServiceClient#releaseEscrow(Long,Map), Status: 500, Reason: null
2025-12-26T16:29:53.892+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T16:34:53.896+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T16:39:53.892+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T16:44:53.882+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T16:49:53.871+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T16:54:53.881+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T16:59:53.882+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T17:04:53.874+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T17:09:53.879+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T17:14:53.872+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T17:19:53.867+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T17:24:53.870+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T17:29:53.868+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T17:34:53.868+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T17:39:53.869+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T17:44:53.878+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T17:49:53.878+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T17:54:53.889+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T17:59:53.900+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T18:04:53.907+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T18:09:53.919+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T18:14:53.931+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T18:19:53.940+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T18:24:53.954+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T18:29:53.959+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T18:34:53.972+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T18:39:53.980+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T18:44:53.990+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T18:49:54.003+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T18:54:54.005+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T18:59:54.040+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T19:04:54.051+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T19:06:10.628+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.controller.PaymentController       : ðŸ©º Health check complet du service payment
2025-12-26T19:06:10.628+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion Ã  la base de donnÃ©es...
2025-12-26T19:06:11.059+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.controller.PaymentController       : âœ… Base de donnÃ©es connectÃ©e. Nombre d'enregistrements dans payments: 9
2025-12-26T19:06:11.059+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.controller.PaymentController       : ðŸ©º VÃ©rification santÃ© blockchain
2025-12-26T19:06:11.060+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.s.ExternalServiceOrchestrator      : ðŸ©º VÃ©rification de la santÃ© du service blockchain
2025-12-26T19:06:11.061+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 94b8e8a8-5271-4268-a0a4-bddf80a4d8ee
2025-12-26T19:06:11.062+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> GET http://BLOCKCHAIN-SERVICE/api/blockchain/health HTTP/1.1
2025-12-26T19:06:11.062+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept: application/json
2025-12-26T19:06:11.062+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept-Encoding: gzip, deflate
2025-12-26T19:06:11.062+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Content-Type: application/json
2025-12-26T19:06:11.062+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Correlation-ID: 94b8e8a8-5271-4268-a0a4-bddf80a4d8ee
2025-12-26T19:06:11.062+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Name: payment-service
2025-12-26T19:06:11.062+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Version: 1.0
2025-12-26T19:06:11.062+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> END HTTP (0-byte body)
2025-12-26T19:06:11.063+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:06:11.064+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@4394de5a instance = InstanceInfo [instanceId = blockchain-service:bca984643220b07faa3c15ce98a84da5, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@2eb04d12]
2025-12-26T19:06:11.064+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@4394de5a instance = InstanceInfo [instanceId = blockchain-service:bca984643220b07faa3c15ce98a84da5, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@2eb04d12]
2025-12-26T19:06:11.226+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- HTTP/1.1 200 (163ms)
2025-12-26T19:06:11.226+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] connection: keep-alive
2025-12-26T19:06:11.226+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] content-type: application/json
2025-12-26T19:06:11.226+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] date: Fri, 26 Dec 2025 18:06:11 GMT
2025-12-26T19:06:11.226+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] keep-alive: timeout=60
2025-12-26T19:06:11.226+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] transfer-encoding: chunked
2025-12-26T19:06:11.226+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Origin
2025-12-26T19:06:11.226+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Method
2025-12-26T19:06:11.226+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Headers
2025-12-26T19:06:11.231+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] 
2025-12-26T19:06:11.231+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] {"status":"UP","message":"Blockchain Service is running","contractAddress":"0x23470CA6C42Fe32E3E48b85999123cC28a57Ca94","network":"sepolia","currentBlock":9919698,"adminWallet":"0x34f528b671cf1c31c2f579eef593ba537d63f1fd"}
2025-12-26T19:06:11.232+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- END HTTP (222-byte body)
2025-12-26T19:06:11.233+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.s.ExternalServiceOrchestrator      : âœ… Service blockchain en bonne santÃ©
2025-12-26T19:06:11.233+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion Ã  RabbitMQ...
2025-12-26T19:06:11.261+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.controller.PaymentController       : âœ… RabbitMQ connectÃ© avec succÃ¨s
2025-12-26T19:06:11.262+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion au booking-service...
2025-12-26T19:06:11.263+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 78c28579-b574-4623-bf3c-b678c0971ecc
2025-12-26T19:06:11.263+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] ---> GET http://booking-service/bookings/health HTTP/1.1
2025-12-26T19:06:11.263+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Accept: application/json
2025-12-26T19:06:11.263+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Accept-Encoding: gzip, deflate
2025-12-26T19:06:11.263+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Content-Type: application/json
2025-12-26T19:06:11.263+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Correlation-ID: 78c28579-b574-4623-bf3c-b678c0971ecc
2025-12-26T19:06:11.263+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Service-Name: payment-service
2025-12-26T19:06:11.263+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Service-Version: 1.0
2025-12-26T19:06:11.264+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] ---> END HTTP (0-byte body)
2025-12-26T19:06:11.264+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:06:11.265+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@1d0a86e6 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:06:11.266+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@1d0a86e6 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:06:11.466+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] <--- HTTP/1.1 200 (201ms)
2025-12-26T19:06:11.466+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] cache-control: no-cache, no-store, max-age=0, must-revalidate
2025-12-26T19:06:11.466+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] connection: keep-alive
2025-12-26T19:06:11.466+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] content-type: application/json
2025-12-26T19:06:11.466+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] date: Fri, 26 Dec 2025 18:06:11 GMT
2025-12-26T19:06:11.466+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] expires: 0
2025-12-26T19:06:11.466+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] keep-alive: timeout=60
2025-12-26T19:06:11.466+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] pragma: no-cache
2025-12-26T19:06:11.466+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] transfer-encoding: chunked
2025-12-26T19:06:11.466+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Origin
2025-12-26T19:06:11.466+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Access-Control-Request-Method
2025-12-26T19:06:11.466+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Access-Control-Request-Headers
2025-12-26T19:06:11.466+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-content-type-options: nosniff
2025-12-26T19:06:11.467+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-frame-options: DENY
2025-12-26T19:06:11.467+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-xss-protection: 0
2025-12-26T19:06:11.467+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] 
2025-12-26T19:06:11.473+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] {"service":"booking-service","status":"UP"}
2025-12-26T19:06:11.474+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] <--- END HTTP (43-byte body)
2025-12-26T19:07:07.897+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“œ RÃ©cupÃ©ration notifications pour rÃ©servation #1
2025-12-26T19:07:07.910+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š Transactions trouvÃ©es pour rÃ©servation #1: 7
2025-12-26T19:07:07.910+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T19:07:07.910+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: ec1b4f6d-26f9-41d8-b762-dc943afa61a7
2025-12-26T19:07:07.910+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> GET http://booking-service/bookings/1 HTTP/1.1
2025-12-26T19:07:07.910+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept: application/json
2025-12-26T19:07:07.910+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept-Encoding: gzip, deflate
2025-12-26T19:07:07.910+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Content-Type: application/json
2025-12-26T19:07:07.910+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Correlation-ID: ec1b4f6d-26f9-41d8-b762-dc943afa61a7
2025-12-26T19:07:07.910+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Name: payment-service
2025-12-26T19:07:07.910+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Version: 1.0
2025-12-26T19:07:07.910+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> END HTTP (0-byte body)
2025-12-26T19:07:07.910+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:07:07.916+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@479a119b instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:07:07.916+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@479a119b instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:07:08.051+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- HTTP/1.1 200 (136ms)
2025-12-26T19:07:08.051+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] cache-control: no-cache, no-store, max-age=0, must-revalidate
2025-12-26T19:07:08.051+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] connection: keep-alive
2025-12-26T19:07:08.051+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] content-type: application/json
2025-12-26T19:07:08.051+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] date: Fri, 26 Dec 2025 18:07:08 GMT
2025-12-26T19:07:08.051+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] expires: 0
2025-12-26T19:07:08.051+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] keep-alive: timeout=60
2025-12-26T19:07:08.051+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] pragma: no-cache
2025-12-26T19:07:08.051+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] transfer-encoding: chunked
2025-12-26T19:07:08.051+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Origin
2025-12-26T19:07:08.051+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Method
2025-12-26T19:07:08.051+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Headers
2025-12-26T19:07:08.051+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-content-type-options: nosniff
2025-12-26T19:07:08.051+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-frame-options: DENY
2025-12-26T19:07:08.051+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-xss-protection: 0
2025-12-26T19:07:08.051+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] 
2025-12-26T19:07:08.054+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] {"blockchainTxHash":null,"cancelledAt":null,"checkInDate":"2025-01-15T15:00:00","checkOutDate":"2025-01-20T12:00:00","createdAt":"2025-12-24T23:08:06","escrowReleaseTxHash":null,"escrowReleased":false,"id":1,"numGuests":null,"priceBreakdown":{"lockedPricePerNight":null,"baseAmount":450.0,"discountAmount":null,"cleaningFee":null,"petFee":null,"serviceFee":null,"totalAmount":500.0,"platformFeePercentage":null},"propertyId":1,"status":"COMPLETED","totalNights":null,"userId":1,"versionId":null}
2025-12-26T19:07:08.054+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- END HTTP (495-byte body)
2025-12-26T19:07:08.054+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : âœ… UserId 1 trouvÃ© pour rÃ©servation #1
2025-12-26T19:07:08.054+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š UserId rÃ©cupÃ©rÃ©: 1
2025-12-26T19:07:08.054+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š Utilisation de userId: 1
2025-12-26T19:07:08.067+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“§ RÃ©cupÃ©ration des notifications pour l'utilisateur #1
2025-12-26T19:07:08.067+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T19:07:08.067+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 4d07b65f-81a6-4a06-a040-70147b2bed50
2025-12-26T19:07:08.067+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] ---> GET http://NOTIFICATION-SERVICE/api/notifications/user/1 HTTP/1.1
2025-12-26T19:07:08.067+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Accept: application/json
2025-12-26T19:07:08.067+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Accept-Encoding: gzip, deflate
2025-12-26T19:07:08.067+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Content-Type: application/json
2025-12-26T19:07:08.067+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Correlation-ID: 4d07b65f-81a6-4a06-a040-70147b2bed50
2025-12-26T19:07:08.067+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Service-Name: payment-service
2025-12-26T19:07:08.067+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Service-Version: 1.0
2025-12-26T19:07:08.067+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] ---> END HTTP (0-byte body)
2025-12-26T19:07:08.113+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:07:08.113+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@57c07709 instance = InstanceInfo [instanceId = notification-service:c0d0e2b241aed3ba78c34595d446c118, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@490ce377]
2025-12-26T19:07:08.113+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@57c07709 instance = InstanceInfo [instanceId = notification-service:c0d0e2b241aed3ba78c34595d446c118, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@490ce377]
2025-12-26T19:07:08.637+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] <--- HTTP/1.1 200 (568ms)
2025-12-26T19:07:08.637+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] connection: keep-alive
2025-12-26T19:07:08.637+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] content-type: application/json
2025-12-26T19:07:08.637+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] date: Fri, 26 Dec 2025 18:07:08 GMT
2025-12-26T19:07:08.637+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] keep-alive: timeout=60
2025-12-26T19:07:08.637+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] transfer-encoding: chunked
2025-12-26T19:07:08.637+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] 
2025-12-26T19:07:08.644+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] [{"id":8,"userId":1,"reservationId":123,"notificationType":"PAYMENT_RECEIVED","title":"Test Notification","message":"Ceci est un test de notification","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-26T16:15:58"},{"id":7,"userId":1,"reservationId":1,"notificationType":"PAYMENT_RECEIVED","title":"Test Payment","message":"Test de notification","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-26T13:09:25"},{"id":6,"userId":1,"reservationId":1,"notificationType":"PAYMENT_RECEIVED","title":"Paiement reÃ§u","message":"Votre paiement de 0.25 ETH a Ã©tÃ© reÃ§u et est en traitement","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-25T21:10:54"},{"id":5,"userId":1,"reservationId":1,"notificationType":"PAYMENT_RECEIVED","title":"Paiement reÃ§u","message":"Paiement crÃ©Ã© via API","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-25T15:51:36"},{"id":4,"userId":1,"reservationId":1,"notificationType":"CHECK_IN_REMINDER","title":"Rappel check-in","message":"Noubliez pas votre check-in demain","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-25T15:13:02"},{"id":3,"userId":1,"reservationId":1,"notificationType":"MESSAGE_RECEIVED","title":"Nouveau message","message":"Vous avez reÃ§u un nouveau message du propriÃ©taire","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-25T15:12:16"},{"id":2,"userId":1,"reservationId":1,"notificationType":"BOOKING_CONFIRMATION","title":"RÃ©servation confirmÃ©e","message":"Votre rÃ©servation #1 a Ã©tÃ© crÃ©Ã©e avec succÃ¨s","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-25T15:11:56"}]
2025-12-26T19:07:08.644+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] <--- END HTTP (1712-byte body)
2025-12-26T19:07:08.646+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“Š Type de rÃ©ponse reÃ§ue: java.util.ArrayList
2025-12-26T19:07:08.646+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“Š Valeur de rÃ©ponse: [{id=8, userId=1, reservationId=123, notificationType=PAYMENT_RECEIVED, title=Test Notification, message=Ceci est un test de notification, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-26T16:15:58}, {id=7, userId=1, reservationId=1, notificationType=PAYMENT_RECEIVED, title=Test Payment, message=Test de notification, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-26T13:09:25}, {id=6, userId=1, reservationId=1, notificationType=PAYMENT_RECEIVED, title=Paiement reÃ§u, message=Votre paiement de 0.25 ETH a Ã©tÃ© reÃ§u et est en traitement, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-25T21:10:54}, {id=5, userId=1, reservationId=1, notificationType=PAYMENT_RECEIVED, title=Paiement reÃ§u, message=Paiement crÃ©Ã© via API, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-25T15:51:36}, {id=4, userId=1, reservationId=1, notificationType=CHECK_IN_REMINDER, title=Rappel check-in, message=Noubliez pas votre check-in demain, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-25T15:13:02}, {id=3, userId=1, reservationId=1, notificationType=MESSAGE_RECEIVED, title=Nouveau message, message=Vous avez reÃ§u un nouveau message du propriÃ©taire, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-25T15:12:16}, {id=2, userId=1, reservationId=1, notificationType=BOOKING_CONFIRMATION, title=RÃ©servation confirmÃ©e, message=Votre rÃ©servation #1 a Ã©tÃ© crÃ©Ã©e avec succÃ¨s, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-25T15:11:56}]
2025-12-26T19:07:08.647+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“Š Taille de la liste: 7
2025-12-26T19:07:08.647+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“Š Premier Ã©lÃ©ment type: java.util.LinkedHashMap
2025-12-26T19:07:08.647+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“Š Premier Ã©lÃ©ment: {id=8, userId=1, reservationId=123, notificationType=PAYMENT_RECEIVED, title=Test Notification, message=Ceci est un test de notification, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-26T16:15:58}
2025-12-26T19:07:08.647+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.s.ExternalServiceOrchestrator      : âœ… Conversion directe rÃ©ussie
2025-12-26T19:07:08.647+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š Notifications rÃ©cupÃ©rÃ©es (total): 7
2025-12-26T19:07:08.647+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š Notification - notificationType: PAYMENT_RECEIVED, reservationId: 123
2025-12-26T19:07:08.647+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š Notification - notificationType: PAYMENT_RECEIVED, reservationId: 1
2025-12-26T19:07:08.647+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š Notification - notificationType: PAYMENT_RECEIVED, reservationId: 1
2025-12-26T19:07:08.647+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š Notification - notificationType: PAYMENT_RECEIVED, reservationId: 1
2025-12-26T19:07:08.647+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š Notification - notificationType: CHECK_IN_REMINDER, reservationId: 1
2025-12-26T19:07:08.647+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š Notification - notificationType: MESSAGE_RECEIVED, reservationId: 1
2025-12-26T19:07:08.647+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š Notification - notificationType: BOOKING_CONFIRMATION, reservationId: 1
2025-12-26T19:07:08.647+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š Notifications pour rÃ©servation #1: 6
2025-12-26T19:07:08.647+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š Notifications filtrÃ©es par type: 6
2025-12-26T19:08:33.081+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.controller.PaymentController       : ðŸ©º Health check complet du service payment
2025-12-26T19:08:33.081+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion Ã  la base de donnÃ©es...
2025-12-26T19:08:33.087+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.controller.PaymentController       : âœ… Base de donnÃ©es connectÃ©e. Nombre d'enregistrements dans payments: 9
2025-12-26T19:08:33.087+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.controller.PaymentController       : ðŸ©º VÃ©rification santÃ© blockchain
2025-12-26T19:08:33.087+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.s.ExternalServiceOrchestrator      : ðŸ©º VÃ©rification de la santÃ© du service blockchain
2025-12-26T19:08:33.087+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: eb5d5b28-cdfb-492c-a60c-6c55ec8f639b
2025-12-26T19:08:33.087+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> GET http://BLOCKCHAIN-SERVICE/api/blockchain/health HTTP/1.1
2025-12-26T19:08:33.087+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept: application/json
2025-12-26T19:08:33.087+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept-Encoding: gzip, deflate
2025-12-26T19:08:33.087+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Content-Type: application/json
2025-12-26T19:08:33.087+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Correlation-ID: eb5d5b28-cdfb-492c-a60c-6c55ec8f639b
2025-12-26T19:08:33.087+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Name: payment-service
2025-12-26T19:08:33.087+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Version: 1.0
2025-12-26T19:08:33.087+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> END HTTP (0-byte body)
2025-12-26T19:08:33.087+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:08:33.087+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@10362d2f instance = InstanceInfo [instanceId = blockchain-service:bca984643220b07faa3c15ce98a84da5, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@2eb04d12]
2025-12-26T19:08:33.087+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@10362d2f instance = InstanceInfo [instanceId = blockchain-service:bca984643220b07faa3c15ce98a84da5, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@2eb04d12]
2025-12-26T19:08:33.256+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- HTTP/1.1 200 (167ms)
2025-12-26T19:08:33.256+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] connection: keep-alive
2025-12-26T19:08:33.256+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] content-type: application/json
2025-12-26T19:08:33.256+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] date: Fri, 26 Dec 2025 18:08:33 GMT
2025-12-26T19:08:33.256+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] keep-alive: timeout=60
2025-12-26T19:08:33.256+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] transfer-encoding: chunked
2025-12-26T19:08:33.256+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Origin
2025-12-26T19:08:33.256+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Method
2025-12-26T19:08:33.256+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Headers
2025-12-26T19:08:33.256+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] 
2025-12-26T19:08:33.256+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] {"status":"UP","message":"Blockchain Service is running","contractAddress":"0x23470CA6C42Fe32E3E48b85999123cC28a57Ca94","network":"sepolia","currentBlock":9919710,"adminWallet":"0x34f528b671cf1c31c2f579eef593ba537d63f1fd"}
2025-12-26T19:08:33.256+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- END HTTP (222-byte body)
2025-12-26T19:08:33.256+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.s.ExternalServiceOrchestrator      : âœ… Service blockchain en bonne santÃ©
2025-12-26T19:08:33.256+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion Ã  RabbitMQ...
2025-12-26T19:08:33.265+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.controller.PaymentController       : âœ… RabbitMQ connectÃ© avec succÃ¨s
2025-12-26T19:08:33.266+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion au booking-service...
2025-12-26T19:08:33.266+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: c6193874-51c7-4201-bd68-b8a34f3d0ffe
2025-12-26T19:08:33.266+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] ---> GET http://booking-service/bookings/health HTTP/1.1
2025-12-26T19:08:33.266+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Accept: application/json
2025-12-26T19:08:33.266+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Accept-Encoding: gzip, deflate
2025-12-26T19:08:33.266+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Content-Type: application/json
2025-12-26T19:08:33.266+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Correlation-ID: c6193874-51c7-4201-bd68-b8a34f3d0ffe
2025-12-26T19:08:33.267+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Service-Name: payment-service
2025-12-26T19:08:33.267+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Service-Version: 1.0
2025-12-26T19:08:33.267+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] ---> END HTTP (0-byte body)
2025-12-26T19:08:33.267+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:08:33.268+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@52d087d3 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:08:33.268+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@52d087d3 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:08:33.278+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] <--- HTTP/1.1 200 (12ms)
2025-12-26T19:08:33.278+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] cache-control: no-cache, no-store, max-age=0, must-revalidate
2025-12-26T19:08:33.278+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] connection: keep-alive
2025-12-26T19:08:33.278+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] content-type: application/json
2025-12-26T19:08:33.278+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] date: Fri, 26 Dec 2025 18:08:33 GMT
2025-12-26T19:08:33.278+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] expires: 0
2025-12-26T19:08:33.278+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] keep-alive: timeout=60
2025-12-26T19:08:33.278+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] pragma: no-cache
2025-12-26T19:08:33.278+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] transfer-encoding: chunked
2025-12-26T19:08:33.278+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Origin
2025-12-26T19:08:33.278+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Access-Control-Request-Method
2025-12-26T19:08:33.278+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Access-Control-Request-Headers
2025-12-26T19:08:33.278+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-content-type-options: nosniff
2025-12-26T19:08:33.280+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-frame-options: DENY
2025-12-26T19:08:33.280+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-xss-protection: 0
2025-12-26T19:08:33.280+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] 
2025-12-26T19:08:33.280+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] {"service":"booking-service","status":"UP"}
2025-12-26T19:08:33.280+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] <--- END HTTP (43-byte body)
2025-12-26T19:09:06.054+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.controller.PaymentController       : ðŸ“§ Envoi notification de paiement pour utilisateur #1
2025-12-26T19:09:06.057+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“§ Envoi de notification Ã  l'utilisateur #1 - Type: PAYMENT_RECEIVED
2025-12-26T19:09:06.060+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 338e2955-4e0a-4683-986c-bba1b62a213e
2025-12-26T19:09:06.061+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] ---> POST http://NOTIFICATION-SERVICE/api/notifications HTTP/1.1
2025-12-26T19:09:06.061+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Accept: application/json
2025-12-26T19:09:06.061+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Accept-Encoding: gzip, deflate
2025-12-26T19:09:06.061+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Content-Length: 147
2025-12-26T19:09:06.061+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Content-Type: application/json
2025-12-26T19:09:06.061+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] X-Correlation-ID: 338e2955-4e0a-4683-986c-bba1b62a213e
2025-12-26T19:09:06.061+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] X-Service-Name: payment-service
2025-12-26T19:09:06.061+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] X-Service-Version: 1.0
2025-12-26T19:09:06.061+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] 
2025-12-26T19:09:06.061+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] {
  "userId" : 1,
  "notificationType" : "PAYMENT_RECEIVED",
  "message" : "Ceci est un test",
  "reservationId" : 1001,
  "title" : "Test"
}
2025-12-26T19:09:06.062+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] ---> END HTTP (147-byte body)
2025-12-26T19:09:06.062+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:09:06.064+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@472280e3 instance = InstanceInfo [instanceId = notification-service:c0d0e2b241aed3ba78c34595d446c118, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@490ce377]
2025-12-26T19:09:06.064+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@472280e3 instance = InstanceInfo [instanceId = notification-service:c0d0e2b241aed3ba78c34595d446c118, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@490ce377]
2025-12-26T19:09:06.245+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] <--- HTTP/1.1 201 (183ms)
2025-12-26T19:09:06.246+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] connection: keep-alive
2025-12-26T19:09:06.246+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] content-type: application/json
2025-12-26T19:09:06.246+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] date: Fri, 26 Dec 2025 18:09:06 GMT
2025-12-26T19:09:06.246+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] keep-alive: timeout=60
2025-12-26T19:09:06.246+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] transfer-encoding: chunked
2025-12-26T19:09:06.246+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] 
2025-12-26T19:09:06.246+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] {"id":9,"userId":1,"reservationId":1001,"notificationType":"PAYMENT_RECEIVED","title":"Test","message":"Ceci est un test","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-26T19:09:06.1973323"}
2025-12-26T19:09:06.246+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] <--- END HTTP (219-byte body)
2025-12-26T19:09:06.247+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-2] c.r.p.s.ExternalServiceOrchestrator      : âš ï¸ Ã‰chec de l'envoi de notification - RÃ©ponse: {id=9, userId=1, reservationId=1001, notificationType=PAYMENT_RECEIVED, title=Test, message=Ceci est un test, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-26T19:09:06.1973323}
2025-12-26T19:09:36.992+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.controller.PaymentController       : âœ… RÃ©ception transaction signÃ©e pour rÃ©servation #1200 - Hash: 0xTEST1234567890abcdef1234567890abcdef1234567890abcdef1234567890
2025-12-26T19:09:37.086+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.controller.PaymentController       : âœ… Transaction enregistrÃ©e: ID 14
2025-12-26T19:09:37.087+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T19:09:37.087+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 29eab363-096a-42ca-924b-93d52ac7819c
2025-12-26T19:09:37.087+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> GET http://booking-service/bookings/1200 HTTP/1.1
2025-12-26T19:09:37.087+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept: application/json
2025-12-26T19:09:37.088+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept-Encoding: gzip, deflate
2025-12-26T19:09:37.088+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Content-Type: application/json
2025-12-26T19:09:37.088+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Correlation-ID: 29eab363-096a-42ca-924b-93d52ac7819c
2025-12-26T19:09:37.088+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Name: payment-service
2025-12-26T19:09:37.088+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Version: 1.0
2025-12-26T19:09:37.088+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> END HTTP (0-byte body)
2025-12-26T19:09:37.088+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:09:37.089+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@28e2dda6 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:09:37.089+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@28e2dda6 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:09:37.187+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- HTTP/1.1 404 (98ms)
2025-12-26T19:09:37.187+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] cache-control: no-cache, no-store, max-age=0, must-revalidate
2025-12-26T19:09:37.187+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] connection: keep-alive
2025-12-26T19:09:37.187+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] content-type: application/json
2025-12-26T19:09:37.187+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] date: Fri, 26 Dec 2025 18:09:37 GMT
2025-12-26T19:09:37.187+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] expires: 0
2025-12-26T19:09:37.187+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] keep-alive: timeout=60
2025-12-26T19:09:37.187+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] pragma: no-cache
2025-12-26T19:09:37.187+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] transfer-encoding: chunked
2025-12-26T19:09:37.187+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Origin
2025-12-26T19:09:37.187+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Method
2025-12-26T19:09:37.187+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Headers
2025-12-26T19:09:37.187+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-content-type-options: nosniff
2025-12-26T19:09:37.187+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-frame-options: DENY
2025-12-26T19:09:37.188+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-xss-protection: 0
2025-12-26T19:09:37.188+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] 
2025-12-26T19:09:37.195+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] {"message":"RÃ©servation non trouvÃ©e avec l'ID: 1200","timestamp":"2025-12-26T19:09:37.1816275","status":404}
2025-12-26T19:09:37.195+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- END HTTP (110-byte body)
2025-12-26T19:09:37.195+01:00 ERROR 26528 --- [payment-service] [http-nio-8084-exec-4] com.rental.payment.config.FeignConfig    : âŒ Feign Client Error: Feign Error - Method: BookingServiceClient#getBookingById(Integer), Status: 404, Reason: null
2025-12-26T19:09:37.196+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.controller.PaymentController       : âš ï¸ Impossible de rÃ©cupÃ©rer hostWalletAddress: Service Not Found: Feign Error - Method: BookingServiceClient#getBookingById(Integer), Status: 404, Reason: null
2025-12-26T19:09:37.230+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T19:09:37.231+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T19:09:37.235+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: ae4aacc5-6f5b-4cc9-943c-0b4755a70bac
2025-12-26T19:09:37.235+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] ---> PATCH http://booking-service/bookings/1200/confirm?blockchainTxHash=0xTEST1234567890abcdef1234567890abcdef1234567890abcdef1234567890 HTTP/1.1
2025-12-26T19:09:37.235+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] Accept: application/json
2025-12-26T19:09:37.235+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] Accept-Encoding: gzip, deflate
2025-12-26T19:09:37.235+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] Content-Type: application/json
2025-12-26T19:09:37.235+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Correlation-ID: ae4aacc5-6f5b-4cc9-943c-0b4755a70bac
2025-12-26T19:09:37.235+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Service-Name: payment-service
2025-12-26T19:09:37.235+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Service-Version: 1.0
2025-12-26T19:09:37.236+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] ---> END HTTP (0-byte body)
2025-12-26T19:09:37.236+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:09:37.240+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@28e2dda6 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:09:37.240+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@28e2dda6 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:09:37.241+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] <--- ERROR ProtocolException: Invalid HTTP method: PATCH (5ms)
2025-12-26T19:09:37.243+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] java.net.ProtocolException: Invalid HTTP method: PATCH
	at java.base/java.net.HttpURLConnection.setRequestMethod(HttpURLConnection.java:453)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.setRequestMethod(HttpURLConnection.java:576)
	at feign.Client$Default.convertAndSend(Client.java:176)
	at feign.Client$Default.execute(Client.java:109)
	at org.springframework.cloud.openfeign.loadbalancer.LoadBalancerUtils.executeWithLoadBalancerLifecycleProcessing(LoadBalancerUtils.java:56)
	at org.springframework.cloud.openfeign.loadbalancer.RetryableFeignBlockingLoadBalancerClient.lambda$execute$2(RetryableFeignBlockingLoadBalancerClient.java:189)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:246)
	at org.springframework.cloud.openfeign.loadbalancer.RetryableFeignBlockingLoadBalancerClient.execute(RetryableFeignBlockingLoadBalancerClient.java:136)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:92)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:53)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:104)
	at jdk.proxy2/jdk.proxy2.$Proxy174.confirmBooking(Unknown Source)
	at com.rental.payment.controller.PaymentController.confirmPayment(PaymentController.java:172)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1474)

2025-12-26T19:09:37.244+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] <--- END ERROR
2025-12-26T19:09:37.403+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] ---> RETRYING
2025-12-26T19:09:37.408+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 0e8a1bed-890f-4342-890e-b8ae5a85264f
2025-12-26T19:09:37.408+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] ---> PATCH http://booking-service/bookings/1200/confirm?blockchainTxHash=0xTEST1234567890abcdef1234567890abcdef1234567890abcdef1234567890 HTTP/1.1
2025-12-26T19:09:37.409+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] Accept: application/json
2025-12-26T19:09:37.409+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] Accept-Encoding: gzip, deflate
2025-12-26T19:09:37.409+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] Content-Type: application/json
2025-12-26T19:09:37.409+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Correlation-ID: ae4aacc5-6f5b-4cc9-943c-0b4755a70bac
2025-12-26T19:09:37.409+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Correlation-ID: 0e8a1bed-890f-4342-890e-b8ae5a85264f
2025-12-26T19:09:37.409+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Service-Name: payment-service
2025-12-26T19:09:37.409+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Service-Version: 1.0
2025-12-26T19:09:37.409+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] ---> END HTTP (0-byte body)
2025-12-26T19:09:37.409+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:09:37.410+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@28e2dda6 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:09:37.411+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@28e2dda6 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:09:37.412+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] <--- ERROR ProtocolException: Invalid HTTP method: PATCH (2ms)
2025-12-26T19:09:37.412+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] java.net.ProtocolException: Invalid HTTP method: PATCH
	at java.base/java.net.HttpURLConnection.setRequestMethod(HttpURLConnection.java:453)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.setRequestMethod(HttpURLConnection.java:576)
	at feign.Client$Default.convertAndSend(Client.java:176)
	at feign.Client$Default.execute(Client.java:109)
	at org.springframework.cloud.openfeign.loadbalancer.LoadBalancerUtils.executeWithLoadBalancerLifecycleProcessing(LoadBalancerUtils.java:56)
	at org.springframework.cloud.openfeign.loadbalancer.RetryableFeignBlockingLoadBalancerClient.lambda$execute$2(RetryableFeignBlockingLoadBalancerClient.java:189)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:246)
	at org.springframework.cloud.openfeign.loadbalancer.RetryableFeignBlockingLoadBalancerClient.execute(RetryableFeignBlockingLoadBalancerClient.java:136)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:92)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:53)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:104)
	at jdk.proxy2/jdk.proxy2.$Proxy174.confirmBooking(Unknown Source)
	at com.rental.payment.controller.PaymentController.confirmPayment(PaymentController.java:172)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1474)

2025-12-26T19:09:37.412+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] <--- END ERROR
2025-12-26T19:09:37.638+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] ---> RETRYING
2025-12-26T19:09:37.638+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 86156749-8da2-4ed3-b6fa-05e28a6ba8b7
2025-12-26T19:09:37.642+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] ---> PATCH http://booking-service/bookings/1200/confirm?blockchainTxHash=0xTEST1234567890abcdef1234567890abcdef1234567890abcdef1234567890 HTTP/1.1
2025-12-26T19:09:37.642+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] Accept: application/json
2025-12-26T19:09:37.642+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] Accept-Encoding: gzip, deflate
2025-12-26T19:09:37.642+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] Content-Type: application/json
2025-12-26T19:09:37.642+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Correlation-ID: ae4aacc5-6f5b-4cc9-943c-0b4755a70bac
2025-12-26T19:09:37.642+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Correlation-ID: 0e8a1bed-890f-4342-890e-b8ae5a85264f
2025-12-26T19:09:37.642+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Correlation-ID: 86156749-8da2-4ed3-b6fa-05e28a6ba8b7
2025-12-26T19:09:37.642+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Service-Name: payment-service
2025-12-26T19:09:37.642+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Service-Version: 1.0
2025-12-26T19:09:37.642+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] ---> END HTTP (0-byte body)
2025-12-26T19:09:37.643+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:09:37.643+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@28e2dda6 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:09:37.643+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@28e2dda6 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:09:37.644+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] <--- ERROR ProtocolException: Invalid HTTP method: PATCH (2ms)
2025-12-26T19:09:37.646+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] java.net.ProtocolException: Invalid HTTP method: PATCH
	at java.base/java.net.HttpURLConnection.setRequestMethod(HttpURLConnection.java:453)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.setRequestMethod(HttpURLConnection.java:576)
	at feign.Client$Default.convertAndSend(Client.java:176)
	at feign.Client$Default.execute(Client.java:109)
	at org.springframework.cloud.openfeign.loadbalancer.LoadBalancerUtils.executeWithLoadBalancerLifecycleProcessing(LoadBalancerUtils.java:56)
	at org.springframework.cloud.openfeign.loadbalancer.RetryableFeignBlockingLoadBalancerClient.lambda$execute$2(RetryableFeignBlockingLoadBalancerClient.java:189)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:246)
	at org.springframework.cloud.openfeign.loadbalancer.RetryableFeignBlockingLoadBalancerClient.execute(RetryableFeignBlockingLoadBalancerClient.java:136)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:92)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:53)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:104)
	at jdk.proxy2/jdk.proxy2.$Proxy174.confirmBooking(Unknown Source)
	at com.rental.payment.controller.PaymentController.confirmPayment(PaymentController.java:172)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1474)

2025-12-26T19:09:37.648+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] <--- END ERROR
2025-12-26T19:09:37.648+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.controller.PaymentController       : âš ï¸ Ã‰chec mise Ã  jour booking: Invalid HTTP method: PATCH executing PATCH http://booking-service/bookings/1200/confirm?blockchainTxHash=0xTEST1234567890abcdef1234567890abcdef1234567890abcdef1234567890
2025-12-26T19:09:37.649+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.controller.PaymentController       : ðŸ”” CrÃ©ation notification PAYMENT_RECEIVED pour rÃ©servation #1200
2025-12-26T19:09:37.649+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.controller.PaymentController       : ðŸ“¤ Envoi notification: NotificationRequest(userId=100, notificationType=PAYMENT_RECEIVED, message=Votre paiement de 0.001 ETH a Ã©tÃ© reÃ§u et est en traitement, reservationId=1200, title=Paiement reÃ§u, data={reservationId=1200, transactionHash=0xTEST1234567890abcdef1234567890abcdef1234567890abcdef1234567890, status=RECEIVED, amount=0.001})
2025-12-26T19:09:37.652+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“§ Envoi de notification Ã  l'utilisateur #100 - Type: PAYMENT_RECEIVED
2025-12-26T19:09:37.654+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 3c495757-01e8-46eb-aa04-10eeb31083d1
2025-12-26T19:09:37.654+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] ---> POST http://NOTIFICATION-SERVICE/api/notifications HTTP/1.1
2025-12-26T19:09:37.656+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Accept: application/json
2025-12-26T19:09:37.656+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Accept-Encoding: gzip, deflate
2025-12-26T19:09:37.656+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Content-Length: 397
2025-12-26T19:09:37.656+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Content-Type: application/json
2025-12-26T19:09:37.656+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] X-Correlation-ID: 3c495757-01e8-46eb-aa04-10eeb31083d1
2025-12-26T19:09:37.656+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] X-Service-Name: payment-service
2025-12-26T19:09:37.656+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] X-Service-Version: 1.0
2025-12-26T19:09:37.656+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] 
2025-12-26T19:09:37.656+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] {
  "userId" : 100,
  "notificationType" : "PAYMENT_RECEIVED",
  "message" : "Votre paiement de 0.001 ETH a Ã©tÃ© reÃ§u et est en traitement",
  "reservationId" : 1200,
  "title" : "Paiement reÃ§u",
  "data" : {
    "reservationId" : 1200,
    "transactionHash" : "0xTEST1234567890abcdef1234567890abcdef1234567890abcdef1234567890",
    "status" : "RECEIVED",
    "amount" : 0.001
  }
}
2025-12-26T19:09:37.656+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] ---> END HTTP (397-byte body)
2025-12-26T19:09:37.656+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:09:37.657+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@472280e3 instance = InstanceInfo [instanceId = notification-service:c0d0e2b241aed3ba78c34595d446c118, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@490ce377]
2025-12-26T19:09:37.657+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@472280e3 instance = InstanceInfo [instanceId = notification-service:c0d0e2b241aed3ba78c34595d446c118, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@490ce377]
2025-12-26T19:09:37.691+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] <--- HTTP/1.1 201 (35ms)
2025-12-26T19:09:37.691+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] connection: keep-alive
2025-12-26T19:09:37.691+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] content-type: application/json
2025-12-26T19:09:37.691+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] date: Fri, 26 Dec 2025 18:09:37 GMT
2025-12-26T19:09:37.691+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] keep-alive: timeout=60
2025-12-26T19:09:37.691+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] transfer-encoding: chunked
2025-12-26T19:09:37.691+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] 
2025-12-26T19:09:37.691+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] {"id":10,"userId":100,"reservationId":1200,"notificationType":"PAYMENT_RECEIVED","title":"Paiement reÃ§u","message":"Votre paiement de 0.001 ETH a Ã©tÃ© reÃ§u et est en traitement","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-26T19:09:37.6783804"}
2025-12-26T19:09:37.691+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] <--- END HTTP (278-byte body)
2025-12-26T19:09:37.693+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.s.ExternalServiceOrchestrator      : âš ï¸ Ã‰chec de l'envoi de notification - RÃ©ponse: {id=10, userId=100, reservationId=1200, notificationType=PAYMENT_RECEIVED, title=Paiement reÃ§u, message=Votre paiement de 0.001 ETH a Ã©tÃ© reÃ§u et est en traitement, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-26T19:09:37.6783804}
2025-12-26T19:09:37.693+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.controller.PaymentController       : âœ… Notification envoyÃ©e avec succÃ¨s
2025-12-26T19:09:37.708+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.payment.service.RabbitMQService      : ðŸ“¤ âœ… Message envoyÃ© Ã  Booking Service: PAYMENT_CREATED
2025-12-26T19:09:50.224+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.controller.PaymentController       : ðŸ“Š RÃ©cupÃ©ration du statut pour rÃ©servation #1200
2025-12-26T19:09:54.059+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T19:10:04.895+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“œ RÃ©cupÃ©ration notifications pour rÃ©servation #1200
2025-12-26T19:10:04.907+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š Transactions trouvÃ©es pour rÃ©servation #1200: 1
2025-12-26T19:10:04.908+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T19:10:04.908+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 5a0bb050-e811-49c5-b534-32d71d84de0f
2025-12-26T19:10:04.908+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> GET http://booking-service/bookings/1200 HTTP/1.1
2025-12-26T19:10:04.909+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept: application/json
2025-12-26T19:10:04.909+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept-Encoding: gzip, deflate
2025-12-26T19:10:04.909+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Content-Type: application/json
2025-12-26T19:10:04.909+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Correlation-ID: 5a0bb050-e811-49c5-b534-32d71d84de0f
2025-12-26T19:10:04.909+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Name: payment-service
2025-12-26T19:10:04.909+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Version: 1.0
2025-12-26T19:10:04.909+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> END HTTP (0-byte body)
2025-12-26T19:10:04.909+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:10:04.909+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@28e2dda6 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:10:04.910+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@28e2dda6 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:10:04.936+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- HTTP/1.1 404 (27ms)
2025-12-26T19:10:04.936+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] cache-control: no-cache, no-store, max-age=0, must-revalidate
2025-12-26T19:10:04.936+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] connection: keep-alive
2025-12-26T19:10:04.937+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] content-type: application/json
2025-12-26T19:10:04.937+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] date: Fri, 26 Dec 2025 18:10:04 GMT
2025-12-26T19:10:04.937+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] expires: 0
2025-12-26T19:10:04.937+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] keep-alive: timeout=60
2025-12-26T19:10:04.937+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] pragma: no-cache
2025-12-26T19:10:04.937+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] transfer-encoding: chunked
2025-12-26T19:10:04.937+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Origin
2025-12-26T19:10:04.937+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Method
2025-12-26T19:10:04.937+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Headers
2025-12-26T19:10:04.937+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-content-type-options: nosniff
2025-12-26T19:10:04.937+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-frame-options: DENY
2025-12-26T19:10:04.937+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-xss-protection: 0
2025-12-26T19:10:04.937+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] 
2025-12-26T19:10:04.938+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] {"message":"RÃ©servation non trouvÃ©e avec l'ID: 1200","timestamp":"2025-12-26T19:10:04.9328221","status":404}
2025-12-26T19:10:04.938+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- END HTTP (110-byte body)
2025-12-26T19:10:04.938+01:00 ERROR 26528 --- [payment-service] [http-nio-8084-exec-6] com.rental.payment.config.FeignConfig    : âŒ Feign Client Error: Feign Error - Method: BookingServiceClient#getBookingById(Integer), Status: 404, Reason: null
2025-12-26T19:10:04.938+01:00 ERROR 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : âŒ Erreur lors de la rÃ©cupÃ©ration de la rÃ©servation #1200: Service Not Found: Feign Error - Method: BookingServiceClient#getBookingById(Integer), Status: 404, Reason: null
2025-12-26T19:10:04.938+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š UserId rÃ©cupÃ©rÃ©: null
2025-12-26T19:10:04.938+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š Utilisation de userId: null
2025-12-26T19:10:04.938+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“§ RÃ©cupÃ©ration des notifications pour l'utilisateur #null
2025-12-26T19:10:04.938+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 72c7b6ef-278f-40dc-9f40-103f8fea0ee9
2025-12-26T19:10:04.939+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] ---> GET http://NOTIFICATION-SERVICE/api/notifications/user/ HTTP/1.1
2025-12-26T19:10:04.939+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Accept: application/json
2025-12-26T19:10:04.939+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Accept-Encoding: gzip, deflate
2025-12-26T19:10:04.939+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Content-Type: application/json
2025-12-26T19:10:04.939+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Correlation-ID: 72c7b6ef-278f-40dc-9f40-103f8fea0ee9
2025-12-26T19:10:04.939+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Service-Name: payment-service
2025-12-26T19:10:04.939+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Service-Version: 1.0
2025-12-26T19:10:04.939+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] ---> END HTTP (0-byte body)
2025-12-26T19:10:04.940+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:10:04.941+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@6fc474df instance = InstanceInfo [instanceId = notification-service:c0d0e2b241aed3ba78c34595d446c118, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@490ce377]
2025-12-26T19:10:04.941+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@6fc474df instance = InstanceInfo [instanceId = notification-service:c0d0e2b241aed3ba78c34595d446c118, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@490ce377]
2025-12-26T19:10:05.092+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] <--- HTTP/1.1 500 (152ms)
2025-12-26T19:10:05.092+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] connection: close
2025-12-26T19:10:05.092+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] content-type: application/json
2025-12-26T19:10:05.092+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] date: Fri, 26 Dec 2025 18:10:05 GMT
2025-12-26T19:10:05.092+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] transfer-encoding: chunked
2025-12-26T19:10:05.092+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] 
2025-12-26T19:10:05.099+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] {"error":"Internal Server Error","message":"No static resource api/notifications/user for request '/api/notifications/user/'.","timestamp":"2025-12-26T19:10:05.0517815","status":500}
2025-12-26T19:10:05.101+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] <--- END HTTP (182-byte body)
2025-12-26T19:10:05.101+01:00 ERROR 26528 --- [payment-service] [http-nio-8084-exec-6] com.rental.payment.config.FeignConfig    : âŒ Feign Client Error: Feign Error - Method: NotificationServiceClient#getUserNotifications(Integer), Status: 500, Reason: null
2025-12-26T19:10:05.101+01:00 ERROR 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.s.ExternalServiceOrchestrator      : âŒ Erreur rÃ©cupÃ©ration notifications: Internal Server Error: Feign Error - Method: NotificationServiceClient#getUserNotifications(Integer), Status: 500, Reason: null
2025-12-26T19:10:05.103+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š Notifications rÃ©cupÃ©rÃ©es (total): 0
2025-12-26T19:10:05.103+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š Notifications pour rÃ©servation #1200: 0
2025-12-26T19:10:05.103+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š Notifications filtrÃ©es par type: 0
2025-12-26T19:10:05.104+01:00 ERROR 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : âŒ Erreur rÃ©cupÃ©ration notifications: null

java.lang.NullPointerException: null
	at java.base/java.util.Objects.requireNonNull(Objects.java:220) ~[na:na]
	at java.base/java.util.ImmutableCollections$MapN.<init>(ImmutableCollections.java:1437) ~[na:na]
	at java.base/java.util.Map.of(Map.java:1517) ~[na:na]
	at com.rental.payment.controller.PaymentController.getPaymentNotifications(PaymentController.java:779) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at java.base/java.lang.Thread.run(Thread.java:1474) ~[na:na]

2025-12-26T19:14:54.073+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T19:16:13.436+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.controller.PaymentController       : ðŸ©º Health check complet du service payment
2025-12-26T19:16:13.436+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion Ã  la base de donnÃ©es...
2025-12-26T19:16:13.441+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.controller.PaymentController       : âœ… Base de donnÃ©es connectÃ©e. Nombre d'enregistrements dans payments: 10
2025-12-26T19:16:13.441+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.controller.PaymentController       : ðŸ©º VÃ©rification santÃ© blockchain
2025-12-26T19:16:13.441+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.s.ExternalServiceOrchestrator      : ðŸ©º VÃ©rification de la santÃ© du service blockchain
2025-12-26T19:16:13.441+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 6e71b979-2dc0-4987-b735-3827d9d4d5fb
2025-12-26T19:16:13.442+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> GET http://BLOCKCHAIN-SERVICE/api/blockchain/health HTTP/1.1
2025-12-26T19:16:13.442+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept: application/json
2025-12-26T19:16:13.442+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Accept-Encoding: gzip, deflate
2025-12-26T19:16:13.442+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] Content-Type: application/json
2025-12-26T19:16:13.442+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Correlation-ID: 6e71b979-2dc0-4987-b735-3827d9d4d5fb
2025-12-26T19:16:13.442+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Name: payment-service
2025-12-26T19:16:13.442+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] X-Service-Version: 1.0
2025-12-26T19:16:13.442+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] ---> END HTTP (0-byte body)
2025-12-26T19:16:13.443+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:16:13.445+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@c88c1ce instance = InstanceInfo [instanceId = blockchain-service:bca984643220b07faa3c15ce98a84da5, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@2eb04d12]
2025-12-26T19:16:13.445+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@c88c1ce instance = InstanceInfo [instanceId = blockchain-service:bca984643220b07faa3c15ce98a84da5, appName = BLOCKCHAIN-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8089, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@2eb04d12]
2025-12-26T19:16:13.604+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- HTTP/1.1 200 (161ms)
2025-12-26T19:16:13.604+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] connection: keep-alive
2025-12-26T19:16:13.604+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] content-type: application/json
2025-12-26T19:16:13.604+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] date: Fri, 26 Dec 2025 18:16:13 GMT
2025-12-26T19:16:13.604+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] keep-alive: timeout=60
2025-12-26T19:16:13.604+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] transfer-encoding: chunked
2025-12-26T19:16:13.604+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Origin
2025-12-26T19:16:13.604+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Method
2025-12-26T19:16:13.604+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] vary: Access-Control-Request-Headers
2025-12-26T19:16:13.604+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] 
2025-12-26T19:16:13.607+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] {"status":"UP","message":"Blockchain Service is running","contractAddress":"0x23470CA6C42Fe32E3E48b85999123cC28a57Ca94","network":"sepolia","currentBlock":9919748,"adminWallet":"0x34f528b671cf1c31c2f579eef593ba537d63f1fd"}
2025-12-26T19:16:13.608+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.client.BlockchainServiceClient     : [BlockchainServiceClient#checkBlockchainStatus] <--- END HTTP (222-byte body)
2025-12-26T19:16:13.610+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.s.ExternalServiceOrchestrator      : âœ… Service blockchain en bonne santÃ©
2025-12-26T19:16:13.610+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion Ã  RabbitMQ...
2025-12-26T19:16:13.629+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.controller.PaymentController       : âœ… RabbitMQ connectÃ© avec succÃ¨s
2025-12-26T19:16:13.629+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.controller.PaymentController       : ðŸ” VÃ©rification de la connexion au booking-service...
2025-12-26T19:16:13.630+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: abfb2f50-b296-47f3-bb0f-0a925775d724
2025-12-26T19:16:13.630+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] ---> GET http://booking-service/bookings/health HTTP/1.1
2025-12-26T19:16:13.630+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Accept: application/json
2025-12-26T19:16:13.630+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Accept-Encoding: gzip, deflate
2025-12-26T19:16:13.630+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] Content-Type: application/json
2025-12-26T19:16:13.630+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Correlation-ID: abfb2f50-b296-47f3-bb0f-0a925775d724
2025-12-26T19:16:13.630+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Service-Name: payment-service
2025-12-26T19:16:13.630+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] X-Service-Version: 1.0
2025-12-26T19:16:13.630+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] ---> END HTTP (0-byte body)
2025-12-26T19:16:13.631+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:16:13.633+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@3b96b470 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:16:13.633+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@3b96b470 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:16:13.647+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] <--- HTTP/1.1 200 (16ms)
2025-12-26T19:16:13.647+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] cache-control: no-cache, no-store, max-age=0, must-revalidate
2025-12-26T19:16:13.647+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] connection: keep-alive
2025-12-26T19:16:13.647+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] content-type: application/json
2025-12-26T19:16:13.647+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] date: Fri, 26 Dec 2025 18:16:13 GMT
2025-12-26T19:16:13.647+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] expires: 0
2025-12-26T19:16:13.647+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] keep-alive: timeout=60
2025-12-26T19:16:13.647+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] pragma: no-cache
2025-12-26T19:16:13.647+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] transfer-encoding: chunked
2025-12-26T19:16:13.647+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Origin
2025-12-26T19:16:13.647+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Access-Control-Request-Method
2025-12-26T19:16:13.647+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] vary: Access-Control-Request-Headers
2025-12-26T19:16:13.647+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-content-type-options: nosniff
2025-12-26T19:16:13.649+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-frame-options: DENY
2025-12-26T19:16:13.649+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] x-xss-protection: 0
2025-12-26T19:16:13.649+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] 
2025-12-26T19:16:13.649+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] {"service":"booking-service","status":"UP"}
2025-12-26T19:16:13.649+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#healthCheck] <--- END HTTP (43-byte body)
2025-12-26T19:17:28.468+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.controller.PaymentController       : ðŸ“§ Envoi notification de paiement pour utilisateur #100
2025-12-26T19:17:28.468+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“§ Envoi de notification Ã  l'utilisateur #100 - Type: PAYMENT_RECEIVED
2025-12-26T19:17:28.469+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 305beb12-0803-43ef-93df-11ff1ab63f9b
2025-12-26T19:17:28.469+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] ---> POST http://NOTIFICATION-SERVICE/api/notifications HTTP/1.1
2025-12-26T19:17:28.469+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Accept: application/json
2025-12-26T19:17:28.469+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Accept-Encoding: gzip, deflate
2025-12-26T19:17:28.469+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Content-Length: 150
2025-12-26T19:17:28.469+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Content-Type: application/json
2025-12-26T19:17:28.469+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] X-Correlation-ID: 305beb12-0803-43ef-93df-11ff1ab63f9b
2025-12-26T19:17:28.470+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] X-Service-Name: payment-service
2025-12-26T19:17:28.470+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] X-Service-Version: 1.0
2025-12-26T19:17:28.470+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] 
2025-12-26T19:17:28.470+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] {
  "userId" : 100,
  "notificationType" : "PAYMENT_RECEIVED",
  "message" : "Notification test",
  "reservationId" : 1200,
  "title" : "Test"
}
2025-12-26T19:17:28.470+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] ---> END HTTP (150-byte body)
2025-12-26T19:17:28.470+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:17:28.471+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@4a9bcba1 instance = InstanceInfo [instanceId = notification-service:c0d0e2b241aed3ba78c34595d446c118, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@490ce377]
2025-12-26T19:17:28.471+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@4a9bcba1 instance = InstanceInfo [instanceId = notification-service:c0d0e2b241aed3ba78c34595d446c118, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@490ce377]
2025-12-26T19:17:28.487+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] <--- HTTP/1.1 201 (17ms)
2025-12-26T19:17:28.487+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] connection: keep-alive
2025-12-26T19:17:28.487+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] content-type: application/json
2025-12-26T19:17:28.487+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] date: Fri, 26 Dec 2025 18:17:28 GMT
2025-12-26T19:17:28.487+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] keep-alive: timeout=60
2025-12-26T19:17:28.487+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] transfer-encoding: chunked
2025-12-26T19:17:28.487+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] 
2025-12-26T19:17:28.488+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] {"id":11,"userId":100,"reservationId":1200,"notificationType":"PAYMENT_RECEIVED","title":"Test","message":"Notification test","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-26T19:17:28.4790483"}
2025-12-26T19:17:28.488+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] <--- END HTTP (223-byte body)
2025-12-26T19:17:28.489+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.s.ExternalServiceOrchestrator      : âš ï¸ Ã‰chec de l'envoi de notification - RÃ©ponse: {id=11, userId=100, reservationId=1200, notificationType=PAYMENT_RECEIVED, title=Test, message=Notification test, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-26T19:17:28.4790483}
2025-12-26T19:19:54.083+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T19:20:54.124+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : âœ… RÃ©ception transaction signÃ©e pour rÃ©servation #1200 - Hash: 0xREALHASH1234567890abcdef1234567890abcdef1234567890abcdef12345678
2025-12-26T19:20:54.139+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : âœ… Transaction enregistrÃ©e: ID 15
2025-12-26T19:20:54.139+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T19:20:54.140+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 3c17e9a5-b64d-416a-8acc-850ba30f656e
2025-12-26T19:20:54.141+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> GET http://booking-service/bookings/1200 HTTP/1.1
2025-12-26T19:20:54.141+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept: application/json
2025-12-26T19:20:54.141+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept-Encoding: gzip, deflate
2025-12-26T19:20:54.141+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Content-Type: application/json
2025-12-26T19:20:54.142+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Correlation-ID: 3c17e9a5-b64d-416a-8acc-850ba30f656e
2025-12-26T19:20:54.142+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Name: payment-service
2025-12-26T19:20:54.142+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Version: 1.0
2025-12-26T19:20:54.142+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> END HTTP (0-byte body)
2025-12-26T19:20:54.142+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:20:54.145+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@7630d21c instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:20:54.145+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@7630d21c instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:20:54.163+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- HTTP/1.1 404 (21ms)
2025-12-26T19:20:54.163+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] cache-control: no-cache, no-store, max-age=0, must-revalidate
2025-12-26T19:20:54.163+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] connection: keep-alive
2025-12-26T19:20:54.163+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] content-type: application/json
2025-12-26T19:20:54.163+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] date: Fri, 26 Dec 2025 18:20:54 GMT
2025-12-26T19:20:54.163+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] expires: 0
2025-12-26T19:20:54.163+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] keep-alive: timeout=60
2025-12-26T19:20:54.163+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] pragma: no-cache
2025-12-26T19:20:54.163+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] transfer-encoding: chunked
2025-12-26T19:20:54.163+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Origin
2025-12-26T19:20:54.163+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Method
2025-12-26T19:20:54.163+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Headers
2025-12-26T19:20:54.164+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-content-type-options: nosniff
2025-12-26T19:20:54.164+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-frame-options: DENY
2025-12-26T19:20:54.164+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-xss-protection: 0
2025-12-26T19:20:54.164+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] 
2025-12-26T19:20:54.165+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] {"message":"RÃ©servation non trouvÃ©e avec l'ID: 1200","timestamp":"2025-12-26T19:20:54.1593175","status":404}
2025-12-26T19:20:54.165+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- END HTTP (110-byte body)
2025-12-26T19:20:54.166+01:00 ERROR 26528 --- [payment-service] [http-nio-8084-exec-1] com.rental.payment.config.FeignConfig    : âŒ Feign Client Error: Feign Error - Method: BookingServiceClient#getBookingById(Integer), Status: 404, Reason: null
2025-12-26T19:20:54.166+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : âš ï¸ Impossible de rÃ©cupÃ©rer hostWalletAddress: Service Not Found: Feign Error - Method: BookingServiceClient#getBookingById(Integer), Status: 404, Reason: null
2025-12-26T19:20:54.174+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T19:20:54.174+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T19:20:54.174+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 193d106d-c220-47fd-a648-139fc9575c73
2025-12-26T19:20:54.174+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] ---> PATCH http://booking-service/bookings/1200/confirm?blockchainTxHash=0xREALHASH1234567890abcdef1234567890abcdef1234567890abcdef12345678 HTTP/1.1
2025-12-26T19:20:54.175+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] Accept: application/json
2025-12-26T19:20:54.175+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] Accept-Encoding: gzip, deflate
2025-12-26T19:20:54.175+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] Content-Type: application/json
2025-12-26T19:20:54.175+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Correlation-ID: 193d106d-c220-47fd-a648-139fc9575c73
2025-12-26T19:20:54.175+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Service-Name: payment-service
2025-12-26T19:20:54.175+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Service-Version: 1.0
2025-12-26T19:20:54.175+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] ---> END HTTP (0-byte body)
2025-12-26T19:20:54.175+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:20:54.175+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@7630d21c instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:20:54.175+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@7630d21c instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:20:54.176+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] <--- ERROR ProtocolException: Invalid HTTP method: PATCH (1ms)
2025-12-26T19:20:54.177+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] java.net.ProtocolException: Invalid HTTP method: PATCH
	at java.base/java.net.HttpURLConnection.setRequestMethod(HttpURLConnection.java:453)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.setRequestMethod(HttpURLConnection.java:576)
	at feign.Client$Default.convertAndSend(Client.java:176)
	at feign.Client$Default.execute(Client.java:109)
	at org.springframework.cloud.openfeign.loadbalancer.LoadBalancerUtils.executeWithLoadBalancerLifecycleProcessing(LoadBalancerUtils.java:56)
	at org.springframework.cloud.openfeign.loadbalancer.RetryableFeignBlockingLoadBalancerClient.lambda$execute$2(RetryableFeignBlockingLoadBalancerClient.java:189)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:246)
	at org.springframework.cloud.openfeign.loadbalancer.RetryableFeignBlockingLoadBalancerClient.execute(RetryableFeignBlockingLoadBalancerClient.java:136)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:92)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:53)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:104)
	at jdk.proxy2/jdk.proxy2.$Proxy174.confirmBooking(Unknown Source)
	at com.rental.payment.controller.PaymentController.confirmPayment(PaymentController.java:172)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1474)

2025-12-26T19:20:54.177+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] <--- END ERROR
2025-12-26T19:20:54.328+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] ---> RETRYING
2025-12-26T19:20:54.328+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 546c8f25-2bdf-4972-802a-4818f5a69bc0
2025-12-26T19:20:54.329+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] ---> PATCH http://booking-service/bookings/1200/confirm?blockchainTxHash=0xREALHASH1234567890abcdef1234567890abcdef1234567890abcdef12345678 HTTP/1.1
2025-12-26T19:20:54.333+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] Accept: application/json
2025-12-26T19:20:54.333+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] Accept-Encoding: gzip, deflate
2025-12-26T19:20:54.333+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] Content-Type: application/json
2025-12-26T19:20:54.333+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Correlation-ID: 193d106d-c220-47fd-a648-139fc9575c73
2025-12-26T19:20:54.333+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Correlation-ID: 546c8f25-2bdf-4972-802a-4818f5a69bc0
2025-12-26T19:20:54.333+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Service-Name: payment-service
2025-12-26T19:20:54.334+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Service-Version: 1.0
2025-12-26T19:20:54.334+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] ---> END HTTP (0-byte body)
2025-12-26T19:20:54.334+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:20:54.334+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@7630d21c instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:20:54.334+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@7630d21c instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:20:54.335+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] <--- ERROR ProtocolException: Invalid HTTP method: PATCH (1ms)
2025-12-26T19:20:54.336+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] java.net.ProtocolException: Invalid HTTP method: PATCH
	at java.base/java.net.HttpURLConnection.setRequestMethod(HttpURLConnection.java:453)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.setRequestMethod(HttpURLConnection.java:576)
	at feign.Client$Default.convertAndSend(Client.java:176)
	at feign.Client$Default.execute(Client.java:109)
	at org.springframework.cloud.openfeign.loadbalancer.LoadBalancerUtils.executeWithLoadBalancerLifecycleProcessing(LoadBalancerUtils.java:56)
	at org.springframework.cloud.openfeign.loadbalancer.RetryableFeignBlockingLoadBalancerClient.lambda$execute$2(RetryableFeignBlockingLoadBalancerClient.java:189)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:246)
	at org.springframework.cloud.openfeign.loadbalancer.RetryableFeignBlockingLoadBalancerClient.execute(RetryableFeignBlockingLoadBalancerClient.java:136)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:92)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:53)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:104)
	at jdk.proxy2/jdk.proxy2.$Proxy174.confirmBooking(Unknown Source)
	at com.rental.payment.controller.PaymentController.confirmPayment(PaymentController.java:172)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1474)

2025-12-26T19:20:54.336+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] <--- END ERROR
2025-12-26T19:20:54.562+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] ---> RETRYING
2025-12-26T19:20:54.563+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: d4d39887-be0a-4eec-af1c-dd52b6d4439d
2025-12-26T19:20:54.564+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] ---> PATCH http://booking-service/bookings/1200/confirm?blockchainTxHash=0xREALHASH1234567890abcdef1234567890abcdef1234567890abcdef12345678 HTTP/1.1
2025-12-26T19:20:54.564+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] Accept: application/json
2025-12-26T19:20:54.564+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] Accept-Encoding: gzip, deflate
2025-12-26T19:20:54.564+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] Content-Type: application/json
2025-12-26T19:20:54.567+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Correlation-ID: 193d106d-c220-47fd-a648-139fc9575c73
2025-12-26T19:20:54.567+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Correlation-ID: 546c8f25-2bdf-4972-802a-4818f5a69bc0
2025-12-26T19:20:54.567+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Correlation-ID: d4d39887-be0a-4eec-af1c-dd52b6d4439d
2025-12-26T19:20:54.567+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Service-Name: payment-service
2025-12-26T19:20:54.567+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] X-Service-Version: 1.0
2025-12-26T19:20:54.567+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] ---> END HTTP (0-byte body)
2025-12-26T19:20:54.567+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:20:54.568+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@7630d21c instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:20:54.568+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@7630d21c instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T19:20:54.569+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] <--- ERROR ProtocolException: Invalid HTTP method: PATCH (1ms)
2025-12-26T19:20:54.570+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] java.net.ProtocolException: Invalid HTTP method: PATCH
	at java.base/java.net.HttpURLConnection.setRequestMethod(HttpURLConnection.java:453)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.setRequestMethod(HttpURLConnection.java:576)
	at feign.Client$Default.convertAndSend(Client.java:176)
	at feign.Client$Default.execute(Client.java:109)
	at org.springframework.cloud.openfeign.loadbalancer.LoadBalancerUtils.executeWithLoadBalancerLifecycleProcessing(LoadBalancerUtils.java:56)
	at org.springframework.cloud.openfeign.loadbalancer.RetryableFeignBlockingLoadBalancerClient.lambda$execute$2(RetryableFeignBlockingLoadBalancerClient.java:189)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:246)
	at org.springframework.cloud.openfeign.loadbalancer.RetryableFeignBlockingLoadBalancerClient.execute(RetryableFeignBlockingLoadBalancerClient.java:136)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:92)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:53)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:104)
	at jdk.proxy2/jdk.proxy2.$Proxy174.confirmBooking(Unknown Source)
	at com.rental.payment.controller.PaymentController.confirmPayment(PaymentController.java:172)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1474)

2025-12-26T19:20:54.570+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#confirmBooking] <--- END ERROR
2025-12-26T19:20:54.570+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : âš ï¸ Ã‰chec mise Ã  jour booking: Invalid HTTP method: PATCH executing PATCH http://booking-service/bookings/1200/confirm?blockchainTxHash=0xREALHASH1234567890abcdef1234567890abcdef1234567890abcdef12345678
2025-12-26T19:20:54.570+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : ðŸ”” CrÃ©ation notification PAYMENT_RECEIVED pour rÃ©servation #1200
2025-12-26T19:20:54.570+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : ðŸ“¤ Envoi notification: NotificationRequest(userId=100, notificationType=PAYMENT_RECEIVED, message=Votre paiement de 0.001 ETH a Ã©tÃ© reÃ§u et est en traitement, reservationId=1200, title=Paiement reÃ§u, data={reservationId=1200, transactionHash=0xREALHASH1234567890abcdef1234567890abcdef1234567890abcdef12345678, status=RECEIVED, amount=0.001})
2025-12-26T19:20:54.571+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“§ Envoi de notification Ã  l'utilisateur #100 - Type: PAYMENT_RECEIVED
2025-12-26T19:20:54.572+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: f52f2b4e-a410-4bf1-ad7a-261446ddc292
2025-12-26T19:20:54.572+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] ---> POST http://NOTIFICATION-SERVICE/api/notifications HTTP/1.1
2025-12-26T19:20:54.572+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Accept: application/json
2025-12-26T19:20:54.572+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Accept-Encoding: gzip, deflate
2025-12-26T19:20:54.572+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Content-Length: 399
2025-12-26T19:20:54.572+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] Content-Type: application/json
2025-12-26T19:20:54.572+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] X-Correlation-ID: f52f2b4e-a410-4bf1-ad7a-261446ddc292
2025-12-26T19:20:54.572+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] X-Service-Name: payment-service
2025-12-26T19:20:54.572+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] X-Service-Version: 1.0
2025-12-26T19:20:54.572+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] 
2025-12-26T19:20:54.572+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] {
  "userId" : 100,
  "notificationType" : "PAYMENT_RECEIVED",
  "message" : "Votre paiement de 0.001 ETH a Ã©tÃ© reÃ§u et est en traitement",
  "reservationId" : 1200,
  "title" : "Paiement reÃ§u",
  "data" : {
    "reservationId" : 1200,
    "transactionHash" : "0xREALHASH1234567890abcdef1234567890abcdef1234567890abcdef12345678",
    "status" : "RECEIVED",
    "amount" : 0.001
  }
}
2025-12-26T19:20:54.573+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] ---> END HTTP (399-byte body)
2025-12-26T19:20:54.573+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T19:20:54.574+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@57445a97 instance = InstanceInfo [instanceId = notification-service:c0d0e2b241aed3ba78c34595d446c118, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@490ce377]
2025-12-26T19:20:54.574+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@57445a97 instance = InstanceInfo [instanceId = notification-service:c0d0e2b241aed3ba78c34595d446c118, appName = NOTIFICATION-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8086, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@490ce377]
2025-12-26T19:20:54.597+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] <--- HTTP/1.1 201 (23ms)
2025-12-26T19:20:54.597+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] connection: keep-alive
2025-12-26T19:20:54.597+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] content-type: application/json
2025-12-26T19:20:54.597+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] date: Fri, 26 Dec 2025 18:20:54 GMT
2025-12-26T19:20:54.597+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] keep-alive: timeout=60
2025-12-26T19:20:54.597+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] transfer-encoding: chunked
2025-12-26T19:20:54.597+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] 
2025-12-26T19:20:54.599+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] {"id":12,"userId":100,"reservationId":1200,"notificationType":"PAYMENT_RECEIVED","title":"Paiement reÃ§u","message":"Votre paiement de 0.001 ETH a Ã©tÃ© reÃ§u et est en traitement","isRead":false,"sentViaEmail":false,"sentViaSms":false,"createdAt":"2025-12-26T19:20:54.5869904"}
2025-12-26T19:20:54.599+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#createNotification] <--- END HTTP (278-byte body)
2025-12-26T19:20:54.599+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.s.ExternalServiceOrchestrator      : âš ï¸ Ã‰chec de l'envoi de notification - RÃ©ponse: {id=12, userId=100, reservationId=1200, notificationType=PAYMENT_RECEIVED, title=Paiement reÃ§u, message=Votre paiement de 0.001 ETH a Ã©tÃ© reÃ§u et est en traitement, isRead=false, sentViaEmail=false, sentViaSms=false, createdAt=2025-12-26T19:20:54.5869904}
2025-12-26T19:20:54.599+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : âœ… Notification envoyÃ©e avec succÃ¨s
2025-12-26T19:20:54.600+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.service.RabbitMQService      : ðŸ“¤ âœ… Message envoyÃ© Ã  Booking Service: PAYMENT_CREATED
2025-12-26T19:21:40.169+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.controller.PaymentController       : ðŸ“Š RÃ©cupÃ©ration du statut pour rÃ©servation #1200
2025-12-26T19:24:54.095+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T19:29:54.096+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T19:54:18.285+01:00  WARN 26528 --- [payment-service] [HikariPool-1:housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=23m29s783ms462Âµs600ns).
2025-12-26T19:57:56.025+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T19:58:21.567+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.controller.PaymentController       : ðŸ’¸ Demande de remboursement pour rÃ©servation #1200
2025-12-26T19:58:21.574+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-5] c.rental.payment.service.PaymentService  : ðŸ’¸ Remboursement pour rÃ©servation #1200, montant: 5.0E-4, raison: Test refund
2025-12-26T19:58:21.585+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-5] c.rental.payment.service.PaymentService  : ðŸ’° Remboursement de 5.0E-4 ETH vers 0x34f528b671cf1c31c2f579eef593ba537d63f1fd
2025-12-26T19:58:21.588+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.service.BlockchainService    : ðŸ“¤ Envoi de 0.00050 ETH vers 0x34f528b671cf1c31c2f579eef593ba537d63f1fd
2025-12-26T19:58:22.492+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.service.BlockchainService    : ðŸ’° Solde de 0x34f528b671cf1c31c2f579eef593ba537d63f1fd: 0.010043868026742061 ETH
2025-12-26T19:58:22.647+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.service.BlockchainService    : ðŸ”¢ Nonce: 78
2025-12-26T19:58:22.675+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.service.BlockchainService    : â›½ Gas Price: 4.1 Gwei, Gas Limit: 9000000
2025-12-26T19:58:23.102+01:00 ERROR 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.service.BlockchainService    : âŒ Erreur transaction: insufficient funds for gas * price + value: balance 10043868026742061, tx cost 37400000000000000, overshot 27356131973257939
2025-12-26T19:58:23.102+01:00 ERROR 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.service.BlockchainService    : âŒ Erreur lors de l'envoi d'ETH: Transaction Ã©chouÃ©e: insufficient funds for gas * price + value: balance 10043868026742061, tx cost 37400000000000000, overshot 27356131973257939

java.lang.RuntimeException: Transaction Ã©chouÃ©e: insufficient funds for gas * price + value: balance 10043868026742061, tx cost 37400000000000000, overshot 27356131973257939
	at com.rental.payment.service.BlockchainService.sendEther(BlockchainService.java:153) ~[classes/:na]
	at com.rental.payment.service.PaymentService.processRefund(PaymentService.java:180) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.14.jar:6.2.14]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.14.jar:6.2.14]
	at com.rental.payment.service.PaymentService$$SpringCGLIB$$1.processRefund(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:724) ~[spring-aop-6.2.14.jar:6.2.14]
	at com.rental.payment.service.PaymentService$$SpringCGLIB$$0.processRefund(<generated>) ~[classes/:na]
	at com.rental.payment.controller.PaymentController.processRefund(PaymentController.java:117) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at java.base/java.lang.Thread.run(Thread.java:1474) ~[na:na]

2025-12-26T19:58:23.107+01:00 ERROR 26528 --- [payment-service] [http-nio-8084-exec-5] c.rental.payment.service.PaymentService  : âŒ Erreur remboursement: Impossible d'envoyer l'ETH: Transaction Ã©chouÃ©e: insufficient funds for gas * price + value: balance 10043868026742061, tx cost 37400000000000000, overshot 27356131973257939

java.lang.RuntimeException: Impossible d'envoyer l'ETH: Transaction Ã©chouÃ©e: insufficient funds for gas * price + value: balance 10043868026742061, tx cost 37400000000000000, overshot 27356131973257939
	at com.rental.payment.service.BlockchainService.sendEther(BlockchainService.java:172) ~[classes/:na]
	at com.rental.payment.service.PaymentService.processRefund(PaymentService.java:180) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.14.jar:6.2.14]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728) ~[spring-aop-6.2.14.jar:6.2.14]
	at com.rental.payment.service.PaymentService$$SpringCGLIB$$1.processRefund(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360) ~[spring-aop-6.2.14.jar:6.2.14]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:724) ~[spring-aop-6.2.14.jar:6.2.14]
	at com.rental.payment.service.PaymentService$$SpringCGLIB$$0.processRefund(<generated>) ~[classes/:na]
	at com.rental.payment.controller.PaymentController.processRefund(PaymentController.java:117) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:565) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.14.jar:6.2.14]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.49.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.14.jar:6.2.14]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.14.jar:6.2.14]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.49.jar:10.1.49]
	at java.base/java.lang.Thread.run(Thread.java:1474) ~[na:na]
Caused by: java.lang.RuntimeException: Transaction Ã©chouÃ©e: insufficient funds for gas * price + value: balance 10043868026742061, tx cost 37400000000000000, overshot 27356131973257939
	at com.rental.payment.service.BlockchainService.sendEther(BlockchainService.java:153) ~[classes/:na]
	... 69 common frames omitted

2025-12-26T19:58:23.113+01:00 ERROR 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.controller.PaymentController       : âŒ Erreur remboursement: Ã‰chec remboursement: Impossible d'envoyer l'ETH: Transaction Ã©chouÃ©e: insufficient funds for gas * price + value: balance 10043868026742061, tx cost 37400000000000000, overshot 27356131973257939
2025-12-26T20:02:56.026+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T20:06:37.313+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ’° RÃ©cupÃ©ration du solde pour 0x34f528b671CF1c31C2f579eEf593bA537d63F1Fd
2025-12-26T20:06:38.256+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.payment.service.BlockchainService    : ðŸ’° Solde de 0x34f528b671CF1c31C2f579eEf593bA537d63F1Fd: 0.010043868026742061 ETH
2025-12-26T20:07:14.766+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ’° RÃ©cupÃ©ration du solde pour 0x34f528b671CF1c31C2f579eEf593bA537d63F1Fd
2025-12-26T20:07:14.911+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-8] c.r.payment.service.BlockchainService    : ðŸ’° Solde de 0x34f528b671CF1c31C2f579eEf593bA537d63F1Fd: 0.010043868026742061 ETH
2025-12-26T20:07:49.965+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.controller.PaymentController       : ðŸ’° RÃ©cupÃ©ration du solde pour 0x34f528b671CF1c31C2f579eEf593bA537d63F1Fd
2025-12-26T20:07:50.122+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.payment.service.BlockchainService    : ðŸ’° Solde de 0x34f528b671CF1c31C2f579eEf593bA537d63F1Fd: 0.010043868026742061 ETH
2025-12-26T20:07:56.035+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T20:08:49.055+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.controller.PaymentController       : ðŸ’° RÃ©cupÃ©ration du solde pour 0x34f528b671CF1c31C2f579eEf593bA537d63F1Fd
2025-12-26T20:08:49.206+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-10] c.r.payment.service.BlockchainService    : ðŸ’° Solde de 0x34f528b671CF1c31C2f579eEf593bA537d63F1Fd: 0.220043868026742061 ETH
2025-12-26T20:09:16.179+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.p.controller.PaymentController       : ðŸ’¸ Demande de remboursement pour rÃ©servation #1200
2025-12-26T20:09:16.179+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.rental.payment.service.PaymentService  : ðŸ’¸ Remboursement pour rÃ©servation #1200, montant: 5.0E-4, raison: Test avec assez d'ETH
2025-12-26T20:09:16.187+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.rental.payment.service.PaymentService  : ðŸ’° Remboursement de 5.0E-4 ETH vers 0x34f528b671cf1c31c2f579eef593ba537d63f1fd
2025-12-26T20:09:16.188+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.service.BlockchainService    : ðŸ“¤ Envoi de 0.00050 ETH vers 0x34f528b671cf1c31c2f579eef593ba537d63f1fd
2025-12-26T20:09:16.343+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.service.BlockchainService    : ðŸ’° Solde de 0x34f528b671cf1c31c2f579eef593ba537d63f1fd: 0.220043868026742061 ETH
2025-12-26T20:09:16.484+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.service.BlockchainService    : ðŸ”¢ Nonce: 78
2025-12-26T20:09:16.484+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.service.BlockchainService    : â›½ Gas Price: 4.1 Gwei, Gas Limit: 9000000
2025-12-26T20:09:16.783+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.service.BlockchainService    : âœ… Transaction envoyÃ©e! Hash: 0x701cb43c24b91a56ab2fbe5f68a0c614f2cb492f731036a3140fe6b2cbe32b83
2025-12-26T20:09:16.785+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.service.BlockchainService    : ðŸ”— Explorer: https://sepolia.etherscan.io/tx/0x701cb43c24b91a56ab2fbe5f68a0c614f2cb492f731036a3140fe6b2cbe32b83
2025-12-26T20:09:16.785+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.rental.payment.service.PaymentService  : âœ… Transaction de remboursement envoyÃ©e: 0x701cb43c24b91a56ab2fbe5f68a0c614f2cb492f731036a3140fe6b2cbe32b83
2025-12-26T20:09:16.813+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.service.RabbitMQService      : ðŸ“¤ Publication: Remboursement traitÃ©
2025-12-26T20:09:16.819+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.service.RabbitMQService      : ðŸ“¤ âœ… Message envoyÃ© Ã  Booking Service: REFUND_PROCESSED
2025-12-26T20:09:16.819+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.service.RabbitMQService      :    RÃ©servation: #1200
2025-12-26T20:09:16.820+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.service.RabbitMQService      :    Transaction: 0x701cb43c24b91a56ab2fbe5f68a0c614f2cb492f731036a3140fe6b2cbe32b83
2025-12-26T20:09:16.820+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-1] c.r.payment.service.RabbitMQService      :    Montant: 5.0E-4 ETH
2025-12-26T20:09:47.016+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.controller.PaymentController       : ðŸ’° RÃ©cupÃ©ration du solde pour 0x34f528b671CF1c31C2f579eEf593bA537d63F1Fd
2025-12-26T20:09:47.164+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-3] c.r.payment.service.BlockchainService    : ðŸ’° Solde de 0x34f528b671CF1c31C2f579eEf593bA537d63F1Fd: 0.219957768026742061 ETH
2025-12-26T20:11:34.716+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-4] c.r.p.controller.PaymentController       : ðŸ“Š RÃ©cupÃ©ration du statut pour rÃ©servation #1200
2025-12-26T20:12:24.983+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.controller.PaymentController       : ðŸ“Š RÃ©cupÃ©ration du statut pour rÃ©servation #1200
2025-12-26T20:12:56.043+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T20:14:21.034+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-6] c.r.p.controller.PaymentController       : ðŸ“Š RÃ©cupÃ©ration du statut pour rÃ©servation #1200
2025-12-26T20:14:28.651+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-7] c.r.p.controller.PaymentController       : ðŸ“Š RÃ©cupÃ©ration du statut pour rÃ©servation #1200
2025-12-26T20:14:30.231+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-8] c.r.p.controller.PaymentController       : ðŸ“Š RÃ©cupÃ©ration du statut pour rÃ©servation #1200
2025-12-26T20:14:32.419+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-9] c.r.p.controller.PaymentController       : ðŸ“Š RÃ©cupÃ©ration du statut pour rÃ©servation #1200
2025-12-26T20:17:56.053+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T20:22:56.057+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T20:23:59.118+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-10] c.r.p.controller.PaymentController       : ðŸ“œ RÃ©cupÃ©ration des paiements pour rÃ©servation #1
2025-12-26T20:24:56.348+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-3] c.r.p.controller.PaymentController       : ðŸ“Š RÃ©cupÃ©ration du statut pour rÃ©servation #1
2025-12-26T20:25:38.485+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.controller.PaymentController       : ðŸ“œ RÃ©cupÃ©ration notifications pour rÃ©servation #1
2025-12-26T20:25:38.492+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.controller.PaymentController       : ðŸ“Š Transactions trouvÃ©es pour rÃ©servation #1: 7
2025-12-26T20:25:38.497+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T20:25:38.497+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: c0991d7c-385a-4ac4-86c2-8ad45b697209
2025-12-26T20:25:38.497+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> GET http://booking-service/bookings/1 HTTP/1.1
2025-12-26T20:25:38.497+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept: application/json
2025-12-26T20:25:38.497+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Accept-Encoding: gzip, deflate
2025-12-26T20:25:38.497+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] Content-Type: application/json
2025-12-26T20:25:38.497+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Correlation-ID: c0991d7c-385a-4ac4-86c2-8ad45b697209
2025-12-26T20:25:38.497+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Name: payment-service
2025-12-26T20:25:38.497+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] X-Service-Version: 1.0
2025-12-26T20:25:38.497+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] ---> END HTTP (0-byte body)
2025-12-26T20:25:38.503+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T20:25:38.507+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Selected service instance: [EurekaServiceInstance@67814272 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T20:25:38.507+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Using service instance from LoadBalancedRetryContext: [EurekaServiceInstance@67814272 instance = InstanceInfo [instanceId = booking-service:8083, appName = BOOKING-SERVICE, hostName = 172.17.112.1, status = UP, ipAddr = 172.17.112.1, port = 8083, securePort = 443, dataCenterInfo = com.netflix.appinfo.MyDataCenterInfo@6b4ed94f]
2025-12-26T20:25:38.590+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- HTTP/1.1 200 (95ms)
2025-12-26T20:25:38.590+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] cache-control: no-cache, no-store, max-age=0, must-revalidate
2025-12-26T20:25:38.590+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] connection: keep-alive
2025-12-26T20:25:38.590+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] content-type: application/json
2025-12-26T20:25:38.590+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] date: Fri, 26 Dec 2025 19:25:38 GMT
2025-12-26T20:25:38.590+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] expires: 0
2025-12-26T20:25:38.590+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] keep-alive: timeout=60
2025-12-26T20:25:38.590+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] pragma: no-cache
2025-12-26T20:25:38.590+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] transfer-encoding: chunked
2025-12-26T20:25:38.590+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Origin
2025-12-26T20:25:38.590+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Method
2025-12-26T20:25:38.590+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] vary: Access-Control-Request-Headers
2025-12-26T20:25:38.590+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-content-type-options: nosniff
2025-12-26T20:25:38.590+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-frame-options: DENY
2025-12-26T20:25:38.590+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] x-xss-protection: 0
2025-12-26T20:25:38.590+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] 
2025-12-26T20:25:38.597+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] {"blockchainTxHash":null,"cancelledAt":null,"checkInDate":"2025-01-15T15:00:00","checkOutDate":"2025-01-20T12:00:00","createdAt":"2025-12-24T23:08:06","escrowReleaseTxHash":null,"escrowReleased":false,"id":1,"numGuests":null,"priceBreakdown":{"lockedPricePerNight":null,"baseAmount":450.0,"discountAmount":null,"cleaningFee":null,"petFee":null,"serviceFee":null,"totalAmount":500.0,"platformFeePercentage":null},"propertyId":1,"status":"COMPLETED","totalNights":null,"userId":1,"versionId":null}
2025-12-26T20:25:38.597+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.payment.client.BookingServiceClient  : [BookingServiceClient#getBookingById] <--- END HTTP (495-byte body)
2025-12-26T20:25:38.597+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.controller.PaymentController       : âœ… UserId 1 trouvÃ© pour rÃ©servation #1
2025-12-26T20:25:38.597+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.controller.PaymentController       : ðŸ“Š UserId rÃ©cupÃ©rÃ©: 1
2025-12-26T20:25:38.597+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.controller.PaymentController       : ðŸ“Š Utilisation de userId: 1
2025-12-26T20:25:38.597+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.s.ExternalServiceOrchestrator      : ðŸ“§ RÃ©cupÃ©ration des notifications pour l'utilisateur #1
2025-12-26T20:25:38.600+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] feign.template.Template                  : Explicit slash decoding specified, decoding all slashes in uri
2025-12-26T20:25:38.600+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: d8dff2b4-ad5d-4384-980e-24061e167830
2025-12-26T20:25:38.600+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] ---> GET http://NOTIFICATION-SERVICE/api/notifications/user/1 HTTP/1.1
2025-12-26T20:25:38.600+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Accept: application/json
2025-12-26T20:25:38.601+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Accept-Encoding: gzip, deflate
2025-12-26T20:25:38.601+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Content-Type: application/json
2025-12-26T20:25:38.601+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Correlation-ID: d8dff2b4-ad5d-4384-980e-24061e167830
2025-12-26T20:25:38.601+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Service-Name: payment-service
2025-12-26T20:25:38.601+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Service-Version: 1.0
2025-12-26T20:25:38.601+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] ---> END HTTP (0-byte body)
2025-12-26T20:25:38.601+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T20:25:38.603+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-5] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: NOTIFICATION-SERVICE
2025-12-26T20:25:38.607+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Selected service instance: null
2025-12-26T20:25:38.607+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Service instance was not resolved, executing the original request
2025-12-26T20:25:39.863+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T20:25:39.867+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-5] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: NOTIFICATION-SERVICE
2025-12-26T20:25:39.867+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Selected service instance: null
2025-12-26T20:25:39.867+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Service instance was not resolved, executing the original request
2025-12-26T20:25:39.867+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] <--- ERROR UnknownHostException: NOTIFICATION-SERVICE (1267ms)
2025-12-26T20:25:39.871+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] java.net.UnknownHostException: NOTIFICATION-SERVICE
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:569)
	at java.base/java.net.Socket.connect(Socket.java:659)
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:161)
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:516)
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:604)
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:276)
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:380)
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:393)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1030)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:963)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:899)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:872)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1377)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1302)
	at java.base/java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:493)
	at feign.Client$Default.convertResponse(Client.java:114)
	at feign.Client$Default.execute(Client.java:110)
	at org.springframework.cloud.openfeign.loadbalancer.LoadBalancerUtils.executeWithLoadBalancerLifecycleProcessing(LoadBalancerUtils.java:56)
	at org.springframework.cloud.openfeign.loadbalancer.RetryableFeignBlockingLoadBalancerClient.lambda$execute$2(RetryableFeignBlockingLoadBalancerClient.java:189)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:246)
	at org.springframework.cloud.openfeign.loadbalancer.RetryableFeignBlockingLoadBalancerClient.execute(RetryableFeignBlockingLoadBalancerClient.java:136)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:92)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:53)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:104)
	at jdk.proxy2/jdk.proxy2.$Proxy175.getUserNotifications(Unknown Source)
	at com.rental.payment.service.ExternalServiceOrchestrator.getUserNotifications(ExternalServiceOrchestrator.java:387)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.retry.interceptor.RetryOperationsInterceptor$1.doWithRetry(RetryOperationsInterceptor.java:114)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:246)
	at org.springframework.retry.interceptor.RetryOperationsInterceptor.invoke(RetryOperationsInterceptor.java:135)
	at org.springframework.retry.annotation.AnnotationAwareRetryOperationsInterceptor.invoke(AnnotationAwareRetryOperationsInterceptor.java:162)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.rental.payment.service.ExternalServiceOrchestrator$$SpringCGLIB$$0.getUserNotifications(<generated>)
	at com.rental.payment.controller.PaymentController.getPaymentNotifications(PaymentController.java:742)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1474)

2025-12-26T20:25:39.871+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] <--- END ERROR
2025-12-26T20:25:40.024+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] ---> RETRYING
2025-12-26T20:25:40.025+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: f9a49104-7428-4046-9c1a-20504df240df
2025-12-26T20:25:40.025+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] ---> GET http://NOTIFICATION-SERVICE/api/notifications/user/1 HTTP/1.1
2025-12-26T20:25:40.025+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Accept: application/json
2025-12-26T20:25:40.025+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Accept-Encoding: gzip, deflate
2025-12-26T20:25:40.025+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Content-Type: application/json
2025-12-26T20:25:40.025+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Correlation-ID: d8dff2b4-ad5d-4384-980e-24061e167830
2025-12-26T20:25:40.025+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Correlation-ID: f9a49104-7428-4046-9c1a-20504df240df
2025-12-26T20:25:40.025+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Service-Name: payment-service
2025-12-26T20:25:40.025+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Service-Version: 1.0
2025-12-26T20:25:40.025+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] ---> END HTTP (0-byte body)
2025-12-26T20:25:40.025+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T20:25:40.025+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-5] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: NOTIFICATION-SERVICE
2025-12-26T20:25:40.025+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Selected service instance: null
2025-12-26T20:25:40.025+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Service instance was not resolved, executing the original request
2025-12-26T20:25:40.027+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T20:25:40.027+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-5] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: NOTIFICATION-SERVICE
2025-12-26T20:25:40.027+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Selected service instance: null
2025-12-26T20:25:40.027+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Service instance was not resolved, executing the original request
2025-12-26T20:25:40.027+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] <--- ERROR UnknownHostException: NOTIFICATION-SERVICE (2ms)
2025-12-26T20:25:40.027+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] java.net.UnknownHostException: NOTIFICATION-SERVICE
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:569)
	at java.base/java.net.Socket.connect(Socket.java:659)
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:161)
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:516)
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:604)
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:276)
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:380)
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:393)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1030)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:963)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:899)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:872)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1377)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1302)
	at java.base/java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:493)
	at feign.Client$Default.convertResponse(Client.java:114)
	at feign.Client$Default.execute(Client.java:110)
	at org.springframework.cloud.openfeign.loadbalancer.LoadBalancerUtils.executeWithLoadBalancerLifecycleProcessing(LoadBalancerUtils.java:56)
	at org.springframework.cloud.openfeign.loadbalancer.RetryableFeignBlockingLoadBalancerClient.lambda$execute$2(RetryableFeignBlockingLoadBalancerClient.java:189)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:246)
	at org.springframework.cloud.openfeign.loadbalancer.RetryableFeignBlockingLoadBalancerClient.execute(RetryableFeignBlockingLoadBalancerClient.java:136)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:92)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:53)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:104)
	at jdk.proxy2/jdk.proxy2.$Proxy175.getUserNotifications(Unknown Source)
	at com.rental.payment.service.ExternalServiceOrchestrator.getUserNotifications(ExternalServiceOrchestrator.java:387)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.retry.interceptor.RetryOperationsInterceptor$1.doWithRetry(RetryOperationsInterceptor.java:114)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:246)
	at org.springframework.retry.interceptor.RetryOperationsInterceptor.invoke(RetryOperationsInterceptor.java:135)
	at org.springframework.retry.annotation.AnnotationAwareRetryOperationsInterceptor.invoke(AnnotationAwareRetryOperationsInterceptor.java:162)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.rental.payment.service.ExternalServiceOrchestrator$$SpringCGLIB$$0.getUserNotifications(<generated>)
	at com.rental.payment.controller.PaymentController.getPaymentNotifications(PaymentController.java:742)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1474)

2025-12-26T20:25:40.029+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] <--- END ERROR
2025-12-26T20:25:40.259+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] ---> RETRYING
2025-12-26T20:25:40.260+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] com.rental.payment.config.FeignConfig    : ðŸ“¤ Feign Request - Correlation ID: 638f68a2-e713-4022-8853-3acbd8c8e381
2025-12-26T20:25:40.260+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] ---> GET http://NOTIFICATION-SERVICE/api/notifications/user/1 HTTP/1.1
2025-12-26T20:25:40.260+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Accept: application/json
2025-12-26T20:25:40.260+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Accept-Encoding: gzip, deflate
2025-12-26T20:25:40.260+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] Content-Type: application/json
2025-12-26T20:25:40.260+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Correlation-ID: d8dff2b4-ad5d-4384-980e-24061e167830
2025-12-26T20:25:40.260+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Correlation-ID: f9a49104-7428-4046-9c1a-20504df240df
2025-12-26T20:25:40.260+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Correlation-ID: 638f68a2-e713-4022-8853-3acbd8c8e381
2025-12-26T20:25:40.260+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Service-Name: payment-service
2025-12-26T20:25:40.260+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] X-Service-Version: 1.0
2025-12-26T20:25:40.260+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] ---> END HTTP (0-byte body)
2025-12-26T20:25:40.265+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T20:25:40.265+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-5] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: NOTIFICATION-SERVICE
2025-12-26T20:25:40.265+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Selected service instance: null
2025-12-26T20:25:40.265+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Service instance was not resolved, executing the original request
2025-12-26T20:25:40.268+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Service instance retrieved from LoadBalancedRetryContext: was null. Reattempting service instance selection
2025-12-26T20:25:40.269+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-5] o.s.c.l.core.RoundRobinLoadBalancer      : No servers available for service: NOTIFICATION-SERVICE
2025-12-26T20:25:40.269+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Selected service instance: null
2025-12-26T20:25:40.269+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-5] RetryableFeignBlockingLoadBalancerClient : Service instance was not resolved, executing the original request
2025-12-26T20:25:40.270+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] <--- ERROR UnknownHostException: NOTIFICATION-SERVICE (4ms)
2025-12-26T20:25:40.270+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] java.net.UnknownHostException: NOTIFICATION-SERVICE
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:569)
	at java.base/java.net.Socket.connect(Socket.java:659)
	at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:161)
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:516)
	at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:604)
	at java.base/sun.net.www.http.HttpClient.<init>(HttpClient.java:276)
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:380)
	at java.base/sun.net.www.http.HttpClient.New(HttpClient.java:393)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1030)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:963)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:899)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:872)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1377)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1302)
	at java.base/java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:493)
	at feign.Client$Default.convertResponse(Client.java:114)
	at feign.Client$Default.execute(Client.java:110)
	at org.springframework.cloud.openfeign.loadbalancer.LoadBalancerUtils.executeWithLoadBalancerLifecycleProcessing(LoadBalancerUtils.java:56)
	at org.springframework.cloud.openfeign.loadbalancer.RetryableFeignBlockingLoadBalancerClient.lambda$execute$2(RetryableFeignBlockingLoadBalancerClient.java:189)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:246)
	at org.springframework.cloud.openfeign.loadbalancer.RetryableFeignBlockingLoadBalancerClient.execute(RetryableFeignBlockingLoadBalancerClient.java:136)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:92)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:53)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:104)
	at jdk.proxy2/jdk.proxy2.$Proxy175.getUserNotifications(Unknown Source)
	at com.rental.payment.service.ExternalServiceOrchestrator.getUserNotifications(ExternalServiceOrchestrator.java:387)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.retry.interceptor.RetryOperationsInterceptor$1.doWithRetry(RetryOperationsInterceptor.java:114)
	at org.springframework.retry.support.RetryTemplate.doExecute(RetryTemplate.java:357)
	at org.springframework.retry.support.RetryTemplate.execute(RetryTemplate.java:246)
	at org.springframework.retry.interceptor.RetryOperationsInterceptor.invoke(RetryOperationsInterceptor.java:135)
	at org.springframework.retry.annotation.AnnotationAwareRetryOperationsInterceptor.invoke(AnnotationAwareRetryOperationsInterceptor.java:162)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.rental.payment.service.ExternalServiceOrchestrator$$SpringCGLIB$$0.getUserNotifications(<generated>)
	at com.rental.payment.controller.PaymentController.getPaymentNotifications(PaymentController.java:742)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:110)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1474)

2025-12-26T20:25:40.270+01:00 DEBUG 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.client.NotificationServiceClient   : [NotificationServiceClient#getUserNotifications] <--- END ERROR
2025-12-26T20:25:40.271+01:00 ERROR 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.s.ExternalServiceOrchestrator      : âŒ Erreur rÃ©cupÃ©ration notifications: NOTIFICATION-SERVICE executing GET http://NOTIFICATION-SERVICE/api/notifications/user/1
2025-12-26T20:25:40.274+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.controller.PaymentController       : ðŸ“Š Notifications rÃ©cupÃ©rÃ©es (total): 0
2025-12-26T20:25:40.274+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.controller.PaymentController       : ðŸ“Š Notifications pour rÃ©servation #1: 0
2025-12-26T20:25:40.274+01:00  INFO 26528 --- [payment-service] [http-nio-8084-exec-5] c.r.p.controller.PaymentController       : ðŸ“Š Notifications filtrÃ©es par type: 0
2025-12-26T20:27:35.042+01:00  WARN 26528 --- [payment-service] [http-nio-8084-exec-7] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Unexpected character (''' (code 39)): expected a valid value (JSON String, Number, Array, Object or token 'null', 'true' or 'false')]
2025-12-26T20:27:56.063+01:00  INFO 26528 --- [payment-service] [AsyncResolver-bootstrap-executor-%d] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2025-12-26T20:30:10.439+01:00  WARN 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] o.s.a.r.l.SimpleMessageListenerContainer : Consumer raised exception, processing can restart if the connection factory supports it

com.rabbitmq.client.ShutdownSignalException: connection error; protocol method: #method<connection.close>(reply-code=320, reply-text=CONNECTION_FORCED - broker forced connection closure with reason 'shutdown', class-id=0, method-id=0)
	at com.rabbitmq.client.impl.AMQConnection.startShutdown(AMQConnection.java:1007) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection.shutdown(AMQConnection.java:997) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection.handleConnectionClose(AMQConnection.java:935) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection.processControlCommand(AMQConnection.java:890) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection$1.processAsync(AMQConnection.java:275) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQChannel.handleCompleteInboundCommand(AMQChannel.java:193) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQChannel.handleFrame(AMQChannel.java:125) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection.readFrame(AMQConnection.java:741) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection.access$400(AMQConnection.java:48) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:688) ~[amqp-client-5.25.0.jar:5.25.0]
	at java.base/java.lang.Thread.run(Thread.java:1474) ~[na:na]

2025-12-26T20:30:10.489+01:00  INFO 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] o.s.a.r.l.SimpleMessageListenerContainer : Restarting Consumer@d7d2dd9: tags=[[amq.ctag-2oHX9HCKJh_bDhTjy30ScA]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@127.0.0.1:5672/,2), conn: Proxy@50389782 Shared Rabbit Connection: SimpleConnection@7613e5b4 [delegate=amqp://admin@127.0.0.1:5672/, localPort=62268], acknowledgeMode=AUTO local queue size=0
2025-12-26T20:30:10.508+01:00  INFO 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [localhost:5672]
2025-12-26T20:30:10.541+01:00 ERROR 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Failed to check/redeclare auto-delete queue(s).

org.springframework.amqp.AmqpIOException: java.io.IOException
	at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:70) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:632) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:726) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createBareChannel(CachingConnectionFactory.java:671) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.getCachedChannelProxy(CachingConnectionFactory.java:644) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.getChannel(CachingConnectionFactory.java:533) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory$ChannelCachingConnectionProxy.createChannel(CachingConnectionFactory.java:1484) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:2267) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2234) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2214) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.core.RabbitAdmin.getQueueInfo(RabbitAdmin.java:467) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.core.RabbitAdmin.getQueueProperties(RabbitAdmin.java:451) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.attemptDeclarations(AbstractMessageListenerContainer.java:1972) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.redeclareElementsIfNecessary(AbstractMessageListenerContainer.java:1936) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.initialize(SimpleMessageListenerContainer.java:1489) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1328) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at java.base/java.lang.Thread.run(Thread.java:1474) ~[na:na]
Caused by: java.io.IOException: null
	at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:140) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:136) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:406) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1251) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1198) ~[amqp-client-5.25.0.jar:5.25.0]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connectAddresses(AbstractConnectionFactory.java:678) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connect(AbstractConnectionFactory.java:647) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:593) ~[spring-rabbit-3.2.8.jar:3.2.8]
	... 15 common frames omitted
Caused by: com.rabbitmq.client.ShutdownSignalException: connection error
	at com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:66) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:36) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:552) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:336) ~[amqp-client-5.25.0.jar:5.25.0]
	... 20 common frames omitted
Caused by: java.io.EOFException: null
	at java.base/java.io.DataInputStream.readUnsignedByte(DataInputStream.java:302) ~[na:na]
	at com.rabbitmq.client.impl.Frame.readFrom(Frame.java:91) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.SocketFrameHandler.readFrame(SocketFrameHandler.java:199) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:687) ~[amqp-client-5.25.0.jar:5.25.0]
	... 1 common frames omitted

2025-12-26T20:30:10.547+01:00  INFO 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [localhost:5672]
2025-12-26T20:30:10.609+01:00  WARN 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] o.s.a.r.l.SimpleMessageListenerContainer : Consumer raised exception, processing can restart if the connection factory supports it

com.rabbitmq.client.ShutdownSignalException: connection error; protocol method: #method<connection.close>(reply-code=320, reply-text=CONNECTION_FORCED - broker forced connection closure with reason 'shutdown', class-id=0, method-id=0)
	at com.rabbitmq.client.impl.AMQConnection.startShutdown(AMQConnection.java:1007) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection.shutdown(AMQConnection.java:997) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection.handleConnectionClose(AMQConnection.java:935) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection.processControlCommand(AMQConnection.java:890) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection$1.processAsync(AMQConnection.java:275) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQChannel.handleCompleteInboundCommand(AMQChannel.java:193) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQChannel.handleFrame(AMQChannel.java:125) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection.readFrame(AMQConnection.java:741) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection.access$400(AMQConnection.java:48) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:688) ~[amqp-client-5.25.0.jar:5.25.0]
	at java.base/java.lang.Thread.run(Thread.java:1474) ~[na:na]

2025-12-26T20:30:10.609+01:00  INFO 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] o.s.a.r.l.SimpleMessageListenerContainer : Restarting Consumer@1828db5c: tags=[[amq.ctag-I8LFuoFsWXrd4SFV8mKtHA]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@127.0.0.1:5672/,1), conn: Proxy@50389782 Shared Rabbit Connection: null, acknowledgeMode=AUTO local queue size=0
2025-12-26T20:30:10.614+01:00  INFO 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [localhost:5672]
2025-12-26T20:30:10.622+01:00 ERROR 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Failed to check/redeclare auto-delete queue(s).

org.springframework.amqp.AmqpIOException: java.io.IOException
	at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:70) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:632) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:726) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.createConnection(ConnectionFactoryUtils.java:257) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.doExecute(RabbitTemplate.java:2261) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2234) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.core.RabbitTemplate.execute(RabbitTemplate.java:2214) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.core.RabbitAdmin.getQueueInfo(RabbitAdmin.java:467) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.core.RabbitAdmin.getQueueProperties(RabbitAdmin.java:451) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.attemptDeclarations(AbstractMessageListenerContainer.java:1972) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.redeclareElementsIfNecessary(AbstractMessageListenerContainer.java:1936) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.initialize(SimpleMessageListenerContainer.java:1489) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1328) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at java.base/java.lang.Thread.run(Thread.java:1474) ~[na:na]
Caused by: java.io.IOException: null
	at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:140) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:136) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:406) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1251) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1198) ~[amqp-client-5.25.0.jar:5.25.0]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connectAddresses(AbstractConnectionFactory.java:678) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connect(AbstractConnectionFactory.java:647) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:593) ~[spring-rabbit-3.2.8.jar:3.2.8]
	... 12 common frames omitted
Caused by: com.rabbitmq.client.ShutdownSignalException: connection error
	at com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:66) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:36) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:552) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:336) ~[amqp-client-5.25.0.jar:5.25.0]
	... 17 common frames omitted
Caused by: java.io.EOFException: null
	at java.base/java.io.DataInputStream.readUnsignedByte(DataInputStream.java:302) ~[na:na]
	at com.rabbitmq.client.impl.Frame.readFrom(Frame.java:91) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.SocketFrameHandler.readFrame(SocketFrameHandler.java:199) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:687) ~[amqp-client-5.25.0.jar:5.25.0]
	... 1 common frames omitted

2025-12-26T20:30:10.623+01:00  INFO 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [localhost:5672]
2025-12-26T20:30:15.629+01:00  WARN 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Consumer raised exception, processing can restart if the connection factory supports it

org.springframework.amqp.AmqpIOException: java.io.IOException
	at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:70) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:632) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:726) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.createConnection(ConnectionFactoryUtils.java:257) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils$RabbitResourceFactory.createConnection(ConnectionFactoryUtils.java:345) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.doGetTransactionalResourceHolder(ConnectionFactoryUtils.java:140) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.getTransactionalResourceHolder(ConnectionFactoryUtils.java:102) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.getTransactionalResourceHolder(ConnectionFactoryUtils.java:85) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.listener.BlockingQueueConsumer.start(BlockingQueueConsumer.java:625) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.initialize(SimpleMessageListenerContainer.java:1490) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1328) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at java.base/java.lang.Thread.run(Thread.java:1474) ~[na:na]
Caused by: java.io.IOException: null
	at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:140) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:136) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:406) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1251) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1198) ~[amqp-client-5.25.0.jar:5.25.0]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connectAddresses(AbstractConnectionFactory.java:678) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connect(AbstractConnectionFactory.java:647) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:593) ~[spring-rabbit-3.2.8.jar:3.2.8]
	... 10 common frames omitted
Caused by: com.rabbitmq.client.ShutdownSignalException: connection error
	at com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:66) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:36) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:552) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:336) ~[amqp-client-5.25.0.jar:5.25.0]
	... 15 common frames omitted
Caused by: java.io.EOFException: null
	at java.base/java.io.DataInputStream.readUnsignedByte(DataInputStream.java:302) ~[na:na]
	at com.rabbitmq.client.impl.Frame.readFrom(Frame.java:91) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.SocketFrameHandler.readFrame(SocketFrameHandler.java:199) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:687) ~[amqp-client-5.25.0.jar:5.25.0]
	... 1 common frames omitted

2025-12-26T20:30:15.634+01:00  INFO 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] o.s.a.r.l.SimpleMessageListenerContainer : Restarting Consumer@3f0c0fa2: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
2025-12-26T20:30:15.640+01:00  INFO 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-3] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [localhost:5672]
2025-12-26T20:30:15.655+01:00 ERROR 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-3] o.s.a.r.l.SimpleMessageListenerContainer : Failed to check/redeclare auto-delete queue(s).
2025-12-26T20:30:15.655+01:00  INFO 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-3] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [localhost:5672]
2025-12-26T20:30:15.709+01:00  WARN 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Consumer raised exception, processing can restart if the connection factory supports it

org.springframework.amqp.AmqpIOException: java.io.IOException
	at org.springframework.amqp.rabbit.support.RabbitExceptionTranslator.convertRabbitAccessException(RabbitExceptionTranslator.java:70) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:632) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.CachingConnectionFactory.createConnection(CachingConnectionFactory.java:726) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.createConnection(ConnectionFactoryUtils.java:257) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils$RabbitResourceFactory.createConnection(ConnectionFactoryUtils.java:345) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.doGetTransactionalResourceHolder(ConnectionFactoryUtils.java:140) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.getTransactionalResourceHolder(ConnectionFactoryUtils.java:102) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.ConnectionFactoryUtils.getTransactionalResourceHolder(ConnectionFactoryUtils.java:85) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.listener.BlockingQueueConsumer.start(BlockingQueueConsumer.java:625) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.initialize(SimpleMessageListenerContainer.java:1490) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1328) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at java.base/java.lang.Thread.run(Thread.java:1474) ~[na:na]
Caused by: java.io.IOException: null
	at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:140) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:136) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:406) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1251) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.ConnectionFactory.newConnection(ConnectionFactory.java:1198) ~[amqp-client-5.25.0.jar:5.25.0]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connectAddresses(AbstractConnectionFactory.java:678) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.connect(AbstractConnectionFactory.java:647) ~[spring-rabbit-3.2.8.jar:3.2.8]
	at org.springframework.amqp.rabbit.connection.AbstractConnectionFactory.createBareConnection(AbstractConnectionFactory.java:593) ~[spring-rabbit-3.2.8.jar:3.2.8]
	... 10 common frames omitted
Caused by: com.rabbitmq.client.ShutdownSignalException: connection error
	at com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:66) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:36) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:552) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection.start(AMQConnection.java:336) ~[amqp-client-5.25.0.jar:5.25.0]
	... 15 common frames omitted
Caused by: java.io.EOFException: null
	at java.base/java.io.DataInputStream.readUnsignedByte(DataInputStream.java:302) ~[na:na]
	at com.rabbitmq.client.impl.Frame.readFrom(Frame.java:91) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.SocketFrameHandler.readFrame(SocketFrameHandler.java:199) ~[amqp-client-5.25.0.jar:5.25.0]
	at com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:687) ~[amqp-client-5.25.0.jar:5.25.0]
	... 1 common frames omitted

2025-12-26T20:30:15.711+01:00  INFO 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] o.s.a.r.l.SimpleMessageListenerContainer : Restarting Consumer@77597114: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
2025-12-26T20:30:15.713+01:00  INFO 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-3] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [localhost:5672]
2025-12-26T20:30:15.715+01:00 ERROR 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-3] o.s.a.r.l.SimpleMessageListenerContainer : Failed to check/redeclare auto-delete queue(s).
2025-12-26T20:30:15.715+01:00  INFO 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-3] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [localhost:5672]
2025-12-26T20:30:20.673+01:00  WARN 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-3] o.s.a.r.l.SimpleMessageListenerContainer : Consumer raised exception, processing can restart if the connection factory supports it. Exception summary: org.springframework.amqp.AmqpConnectException: java.net.ConnectException: Connection refused: getsockopt
2025-12-26T20:30:20.673+01:00  INFO 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-3] o.s.a.r.l.SimpleMessageListenerContainer : Restarting Consumer@5db4b4e5: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
2025-12-26T20:30:20.676+01:00  INFO 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-4] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [localhost:5672]
2025-12-26T20:30:20.678+01:00 ERROR 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-4] o.s.a.r.l.SimpleMessageListenerContainer : Failed to check/redeclare auto-delete queue(s).
2025-12-26T20:30:20.678+01:00  INFO 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-4] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [localhost:5672]
2025-12-26T20:30:20.730+01:00  WARN 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-3] o.s.a.r.l.SimpleMessageListenerContainer : Consumer raised exception, processing can restart if the connection factory supports it. Exception summary: org.springframework.amqp.AmqpConnectException: java.net.ConnectException: Connection refused: getsockopt
2025-12-26T20:30:20.730+01:00  INFO 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-3] o.s.a.r.l.SimpleMessageListenerContainer : Restarting Consumer@1bcfda2f: tags=[[]], channel=null, acknowledgeMode=AUTO local queue size=0
2025-12-26T20:30:20.733+01:00  INFO 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-4] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [localhost:5672]
2025-12-26T20:30:20.746+01:00 ERROR 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-4] o.s.a.r.l.SimpleMessageListenerContainer : Failed to check/redeclare auto-delete queue(s).
2025-12-26T20:30:20.747+01:00  INFO 26528 --- [payment-service] [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-4] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [localhost:5672]
